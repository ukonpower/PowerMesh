!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("three"),require("ore-three-ts")):"function"==typeof define&&define.amd?define(["three","ore-three-ts"],n):"object"==typeof exports?exports.PowerMesh=n(require("three"),require("ore-three-ts")):t.PowerMesh=n(t.THREE,t.ORE)}(self,((t,n)=>(()=>{"use strict";var e={906:t=>{t.exports=n},381:n=>{n.exports=t}},i={};function o(t){var n=i[t];if(void 0!==n)return n.exports;var a=i[t]={exports:{}};return e[t](a,a.exports,o),a.exports}o.d=(t,n)=>{for(var e in n)o.o(n,e)&&!o.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:n[e]})},o.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};return(()=>{o.r(a),o.d(a,{PowerMesh:()=>r,PowerReflectionMesh:()=>s});var t=o(381),n=o(906);const e="#define GLSLIFY 1\nattribute vec4 tangent;\n\nvarying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewNormal;\nvarying vec3 vTangent;\nvarying vec3 vBitangent;\nvarying vec3 vViewPos;\nvarying vec3 vWorldPos;\nvarying vec2 vHighPrecisionZW;\n\n/*-------------------------------\n\tShadowMap\n-------------------------------*/\n\n#include <shadowmap_pars_vertex>\n\nvoid main( void ) {\n\n\t/*-------------------------------\n\t\tPosition\n\t-------------------------------*/\n\n\tvec3 pos = position;\n\tvec4 worldPos = modelMatrix * vec4( pos, 1.0 );\n\tvec4 mvPosition = viewMatrix * worldPos;\n\t\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t/*-------------------------------\n\t\tNormal / Tangent\n\t-------------------------------*/\n\n\tvec3 transformedNormal = normalMatrix * normal;\n\tvec4 flipedTangent = tangent;\n\tflipedTangent.w *= -1.0;\n\n\t#ifdef FLIP_SIDED\n\t\ttransformedNormal *= -1.0;\n\t\tflipedTangent *= -1.0;\n\t#endif\n\t\n\tvec3 normal = normalize( transformedNormal );\n\tvec3 tangent = normalize( ( modelViewMatrix * vec4( flipedTangent.xyz, 0.0 ) ).xyz );\n\tvec3 biTangent = normalize( cross( normal, tangent ) * flipedTangent.w );\n\n\t/*-------------------------------\n\t\tShadow\n\t-------------------------------*/\n\t\n\tvec4 shadowWorldPos;\n\t\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\t\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\t\n\t\t\tshadowWorldPos = worldPos + vec4( vec4( transformedNormal, 0.0 ) * modelMatrix ) * directionalLightShadows[ i ].shadowNormalBias;\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPos;\n\t\t\t\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t\n\t#endif\n\n\t/*-------------------------------\n\t\tVarying\n\t-------------------------------*/\n\t\n\tvUv = uv;\n\tvNormal = normal;\n\tvTangent = tangent;\n\tvBitangent = biTangent;\n\tvViewPos = -mvPosition.xyz;\n\tvWorldPos = worldPos.xyz;\n\tvHighPrecisionZW = gl_Position.zw;\n\t\n}",i="#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec3 vTangent;\nvarying vec3 vBitangent;\n\n/*-------------------------------\n\tRequire\n-------------------------------*/\n\n#include <packing>\n\nvec2 packing16( float value ) { \n\n\tfloat v1 = value * 255.0;\n\tfloat r = floor(v1);\n\n\tfloat v2 = ( v1 - r ) * 255.0;\n\tfloat g = floor( v2 );\n\n\treturn vec2( r, g ) / 255.0;\n\n}\n\n/*-------------------------------\n\tRequiers\n-------------------------------*/\n\n#include <common>\n\nfloat random(vec2 p){\n\treturn fract(sin(dot(p.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\n/*-------------------------------\n\tMaterial Uniforms\n-------------------------------*/\n\nuniform float time;\n\n/*-------------------------------\n\tTextures\n-------------------------------*/\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#else\n\n\tuniform vec3 color;\n\n#endif\n\n#ifdef USE_NORMAL_MAP\n\n\tuniform sampler2D normalMap;\n\n#endif\n\n#ifdef USE_ROUGHNESS_MAP\n\n\tuniform sampler2D roughnessMap;\n\n#else\n\n\tuniform float roughness;\n\n#endif\n\n#ifdef USE_ALPHA_MAP\n\n\tuniform sampler2D alphaMap;\n\n#else\n\n\tuniform float opacity;\n\t\n#endif\n\n#ifdef USE_METALNESS_MAP\n\n\tuniform sampler2D metalnessMap;\n\n#else\n\n\tuniform float metalness;\n\n#endif\n#ifdef USE_EMISSION_MAP\n\n\tuniform sampler2D emissionMap;\n\n#else\n\n\tuniform vec3 emission;\n\n#endif\n\n#ifdef IS_REFLECTIONPLANE\n\n\tuniform sampler2D reflectionTex;\n\tuniform vec2 renderResolution;\n\tuniform vec2 mipMapResolution;\n\t\n#endif\n\n/*-------------------------------\n\tTypes\n-------------------------------*/\n\nstruct Geometry {\n\tvec3 pos;\n\tvec3 posWorld;\n\tvec3 viewDir;\n\tvec3 viewDirWorld;\n\tvec3 normal;\n\tvec3 normalWorld;\n};\n\nstruct Light {\n\tvec3 direction;\n\tvec3 color;\n};\n\nstruct Material {\n\tvec3 albedo;\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat metalness;\n\tfloat roughness;\n\tfloat opacity;\n};\n\n/*-------------------------------\n\tLights\n-------------------------------*/\n\n#if NUM_DIR_LIGHTS > 0\n\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\n#endif\n\n#if NUM_POINT_LIGHTS > 0\n\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\n#endif\n\n/*-------------------------------\n\tEnvMap\n-------------------------------*/\n\n#ifdef USE_ENV_MAP\n\n\tuniform sampler2D envMap;\n\tuniform float envMapIntensity;\n\tuniform float iblIntensity;\n\tuniform float maxLodLevel;\n\n\t#define ENVMAP_TYPE_CUBE_UV\n\t#include <cube_uv_reflection_fragment>\n\n#endif\n\n/*-------------------------------\n\tReflection\n-------------------------------*/\n\n#define REF_MIPMAP_LEVEL 8.0\n\n#ifdef IS_REFLECTIONPLANE\n\n\tvec2 getRefMipmapUV( vec2 uv, float level ) {\n\n\t\tvec2 ruv = uv;\n\n\t\tif( level > 0.0 ) {\n\n\t\t\truv.x *= 1.0 / ( 3.0 * ( pow( 2.0, level ) / 2.0 ) );\n\t\t\truv.y *= 1.0 / ( pow( 2.0, level ) );\n\t\t\truv.y += 1.0 / ( pow( 2.0, level ) );\n\t\t\truv.x += 1.0 / 1.5;\n\t\t\n\t\t} else {\n\n\t\t\truv.x /= 1.5;\n\t\t\t\n\t\t}\n\n\t\treturn ruv;\n\n\t}\n\t\n\tvec4 cubic(float v) {\n\t\tvec4 n = vec4(1.0, 2.0, 3.0, 4.0) - v;\n\t\tvec4 s = n * n * n;\n\t\tfloat x = s.x;\n\t\tfloat y = s.y - 4.0 * s.x;\n\t\tfloat z = s.z - 4.0 * s.y + 6.0 * s.x;\n\t\tfloat w = 6.0 - x - y - z;\n\t\treturn vec4(x, y, z, w);\n\t}\n\n\t// https://stackoverflow.com/questions/13501081/efficient-bicubic-filtering-code-in-glsl\n\tvec4 textureBicubic(sampler2D t, vec2 texCoords, vec2 textureSize) {\n\t\tvec2 invTexSize = 1.0 / textureSize;\n\t\ttexCoords = texCoords * textureSize - 0.5;\n\t\tvec2 fxy = fract(texCoords);\n\t\ttexCoords -= fxy;\n\t\tvec4 xcubic = cubic(fxy.x);\n\t\tvec4 ycubic = cubic(fxy.y);\n\t\tvec4 c = texCoords.xxyy + vec2 (-0.5, 1.5).xyxy;\n\t\tvec4 s = vec4(xcubic.xz + xcubic.yw, ycubic.xz + ycubic.yw);\n\t\tvec4 offset = c + vec4 (xcubic.yw, ycubic.yw) / s;\n\t\toffset *= invTexSize.xxyy;\n\t\tvec4 sample0 = texture2D(t, offset.xz);\n\t\tvec4 sample1 = texture2D(t, offset.yz);\n\t\tvec4 sample2 = texture2D(t, offset.xw);\n\t\tvec4 sample3 = texture2D(t, offset.yw);\n\t\tfloat sx = s.x / (s.x + s.y);\n\t\tfloat sy = s.z / (s.z + s.w);\n\t\treturn mix(\n\t\tmix(sample3, sample2, sx), mix(sample1, sample0, sx), sy);\n\t}\n\n#endif\n\n/*-------------------------------\n\tShadow\n-------------------------------*/\n\n#ifdef DEPTH\n\n\tvarying vec2 vHighPrecisionZW;\n\tuniform float cameraNear;\n\tuniform float cameraFar;\n\n#endif\n\n#ifdef USE_SHADOWMAP\n\n#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#define SHADOW_SAMPLE_COUNT 4\n\n\tvec2 poissonDisk[ SHADOW_SAMPLE_COUNT ];\n\n\tvoid initPoissonDisk( float seed ) {\n\n\t\tfloat r = 0.1;\n\t\tfloat rStep = (1.0 - r) / float( SHADOW_SAMPLE_COUNT );\n\n\t\tfloat ang = random( gl_FragCoord.xy * 0.01 + sin( time ) ) * PI2 * 1.0;\n\t\tfloat angStep = ( ( PI2 * 11.0 ) / float( SHADOW_SAMPLE_COUNT ) );\n\t\t\n\t\tfor( int i = 0; i < SHADOW_SAMPLE_COUNT; i++ ) {\n\n\t\t\tpoissonDisk[ i ] = vec2(\n\t\t\t\tsin( ang ),\n\t\t\t\tcos( ang )\n\t\t\t) * pow( r, 0.75 );\n\n\t\t\tr += rStep;\n\t\t\tang += angStep;\n\t\t}\n\t\t\n\t}\n\n\tvec2 compairShadowMapDepth( sampler2D shadowMap, vec2 shadowMapUV, float depth ) {\n\n\t\tif( shadowMapUV.x < 0.0 || shadowMapUV.x > 1.0 || shadowMapUV.y < 0.0 || shadowMapUV.y > 1.0 ) {\n\n\t\t\treturn vec2( 1.0, 0.0 );\n\n\t\t}\n\n\t\tfloat shadowMapDepth = unpackRGBAToDepth( texture2D( shadowMap, shadowMapUV ) );\n\n\t\tif( 0.0 >= shadowMapDepth || shadowMapDepth >= 1.0 ) {\n\n\t\t\treturn vec2( 1.0, 0.0 );\n\n\t\t}\n\t\t\n\t\tfloat shadow = depth <= shadowMapDepth ? 1.0 : 0.0;\n\n\t\treturn vec2( shadow, shadowMapDepth );\n\t\t\n\t}\n\n\tfloat shadowMapPCF( sampler2D shadowMap, vec4 shadowMapCoord, vec2 shadowSize ) {\n\n\t\tfloat shadow = 0.0;\n\t\t\n\t\tfor( int i = 0; i < SHADOW_SAMPLE_COUNT; i ++  ) {\n\t\t\t\n\t\t\tvec2 offset = poissonDisk[ i ] * shadowSize; \n\n\t\t\tshadow += compairShadowMapDepth( shadowMap, shadowMapCoord.xy + offset, shadowMapCoord.z ).x;\n\t\t\t\n\t\t}\n\n\t\tshadow /= float( SHADOW_SAMPLE_COUNT );\n\n\t\treturn shadow;\n\n\t}\n\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float bias, vec4 shadowMapCoord ) {\n\t\t\n\t\tshadowMapCoord.xyz /= shadowMapCoord.w;\n\t\tshadowMapCoord.z += bias - 0.0001;\n\n\t\tinitPoissonDisk(time);\n\n\t\tvec2 shadowSize = 1.0 / shadowMapSize;\n\n\t\treturn shadowMapPCF( shadowMap, shadowMapCoord, shadowSize );\n\n\t}\n\n#endif\n\n/*-------------------------------\n\tRE\n-------------------------------*/\n\nvarying vec3 vNormal;\nvarying vec3 vViewNormal;\nvarying vec3 vViewPos;\nvarying vec3 vWorldPos;\n\nfloat ggx( float dNH, float roughness ) {\n\t\n\tfloat a2 = roughness * roughness;\n\ta2 = a2 * a2;\n\tfloat dNH2 = dNH * dNH;\n\n\tif( dNH2 <= 0.0 ) return 0.0;\n\n\treturn a2 / ( PI * pow( dNH2 * ( a2 - 1.0 ) + 1.0, 2.0) );\n\n}\n\nvec3 lambert( vec3 diffuseColor ) {\n\n\treturn diffuseColor / PI;\n\n}\n\nfloat gSchlick( float d, float k ) {\n\n\tif( d == 0.0 ) return 0.0;\n\n\treturn d / ( d * ( 1.0 - k ) + k );\n\t\n}\n\nfloat gSmith( float dNV, float dNL, float roughness ) {\n\n\tfloat k = clamp( roughness * sqrt( 2.0 / PI ), 0.0, 1.0 );\n\n\treturn gSchlick( dNV, k ) * gSchlick( dNL, k );\n\t\n}\n\nfloat fresnel( float d ) {\n\t\n\tfloat f0 = 0.04;\n\n\treturn f0 + ( 1.0 - f0 ) * pow( 1.0 - d, 5.0 );\n\n}\n\nvec3 RE( Geometry geo, Material mat, Light light) {\n\n\tvec3 lightDir = normalize( light.direction );\n\tvec3 halfVec = normalize( geo.viewDir + lightDir );\n\n\tfloat dLH = clamp( dot( lightDir, halfVec ), 0.0, 1.0 );\n\tfloat dNH = clamp( dot( geo.normal, halfVec ), 0.0, 1.0 );\n\tfloat dNV = clamp( dot( geo.normal, geo.viewDir ), 0.0, 1.0 );\n\tfloat dNL = clamp( dot( geo.normal, lightDir), 0.0, 1.0 );\n\n\tvec3 irradiance = light.color * dNL;\n\n\t// diffuse\n\tvec3 diffuse = lambert( mat.diffuseColor ) * irradiance;\n\n\t// specular\n\tfloat D = ggx( dNH, mat.roughness );\n\tfloat G = gSmith( dNV, dNL, mat.roughness );\n\tfloat F = fresnel( dLH );\n\t\n\tvec3 specular = (( D * G * F ) / ( 4.0 * dNL * dNV + 0.0001 ) * mat.specularColor ) * irradiance; \n\n\tvec3 c = vec3( 0.0 );\n\tc += diffuse * ( 1.0 - F ) + specular;\n\n\treturn c;\n\n}\n\n/*-------------------------------\n\tMain\n-------------------------------*/\n\nvoid main( void ) {\n\n\t/*-------------------------------\n\t\tMaterial\n\t-------------------------------*/\n\n\tMaterial mat;\n\n\t#ifdef USE_MAP\n\n\t\tvec4 color = LinearTosRGB( texture2D( map, vUv ) );\n\t\tmat.albedo = color.xyz;\n\n\t#else\n\n\t\tmat.albedo = color.xyz;\n\t\tmat.opacity = 1.0;\n\t\n\t#endif\n\n\t#ifdef USE_ROUGHNESS_MAP\n\n\t\tmat.roughness = texture2D( roughnessMap, vUv ).y;\n\n\t#else\n\n\t\tmat.roughness = roughness;\n\t\n\t#endif\n\n\t#ifdef USE_METALNESS_MAP\n\n\t\tmat.metalness = texture2D( metalnessMap, vUv ).z;\n\n\t#else\n\n\t\tmat.metalness = metalness;\n\t\n\t#endif\n\n\t#ifdef USE_ALPHA_MAP\n\n\t\tmat.opacity = texture2D( alphaMap, vUv ).x;\n\n\t#else\n\n\t\tmat.opacity = opacity;\n\n\t#endif\n\t\n\tif( mat.opacity < 0.5 ) discard;\n\n\tmat.diffuseColor = mix( mat.albedo, vec3( 0.0, 0.0, 0.0 ), mat.metalness );\n\tmat.specularColor = mix( vec3( 1.0, 1.0, 1.0 ), mat.albedo, mat.metalness );\n\n\t// output\n\tvec3 outColor = vec3( 0.0 );\n\tfloat outOpacity = mat.opacity;\n\n\t/*-------------------------------\n\t\tDepth\n\t-------------------------------*/\n\n\t#ifdef DEPTH\n\n\t\tfloat fragCoordZ = 0.5 * vHighPrecisionZW.x / vHighPrecisionZW.y + 0.5;\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t\treturn;\n\t\n\t#endif\n\n\t/*-------------------------------\n\t\tGeometry\n\t-------------------------------*/\n\n\tfloat faceDirection = gl_FrontFacing ? 1.0 : -1.0;\n\n\tGeometry geo;\n\tgeo.pos = -vViewPos;\n\tgeo.posWorld = vWorldPos;\n\tgeo.viewDir = normalize( vViewPos );\n\tgeo.viewDirWorld = normalize( geo.posWorld - cameraPosition );\n\tgeo.normal = normalize( vNormal ) * faceDirection;\n\n\t#ifdef USE_NORMAL_MAP\n\t\t\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\ttangent *= faceDirection;\n\t\t\tbitangent *= faceDirection;\n\t\t\n\t\t#endif\n\t\t\n\t\tmat3 vTBN = mat3( tangent, bitangent, geo.normal );\n\t\t\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz;\n\t\tmapN = mapN * 2.0 - 1.0;\n\t\tgeo.normal = normalize( vTBN * mapN );\n\n\t#endif\n\t\n\tgeo.normalWorld = normalize( ( vec4( geo.normal, 0.0 ) * viewMatrix ).xyz );\n\n\t/*-------------------------------\n\t\tLighting\n\t-------------------------------*/\n\t\n\tLight light;\n\n\t#if NUM_DIR_LIGHTS > 0\n\n\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\t\t\tlight.direction = directionalLights[ i ].direction;\n\t\t\t\tlight.color = directionalLights[ i ].color;\n\n\t\t\t\tfloat shadow = 1.0;\n\t\t\t\t\n\t\t\t\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\t\t\t\tshadow = getShadow( directionalShadowMap[ i ], directionalLightShadows[ i ].shadowMapSize, directionalLightShadows[ i ].shadowBias, vDirectionalShadowCoord[ i ] );\n\n\t\t\t\t#endif\n\n\t\t\t\toutColor += RE( geo, mat, light ) * shadow;\n\t\t\t\t\n\t\t\t}\n\t\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_POINT_LIGHTS > 0\n\n\t\tPointLight pLight;\n\t\tvec3 v;\n\t\tfloat d;\n\t\tfloat attenuation;\n\t\t#pragma unroll_loop_start\n\n\t\t\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\t\t\tpLight = pointLights[ i ];\n\n\t\t\t\tv = pLight.position - geo.pos;\n\t\t\t\td = length( v );\n\t\t\t\tlight.direction = normalize( v );\n\t\t\n\t\t\t\tlight.color = pLight.color;\n\n\t\t\t\tif( pLight.distance > 0.0 && pLight.decay > 0.0 ) {\n\n\t\t\t\t\tattenuation = pow( clamp( -d / pLight.distance + 1.0, 0.0, 1.0 ), pLight.decay );\n\t\t\t\t\tlight.color *= attenuation;\n\n\t\t\t\t}\n\n\t\t\t\toutColor += RE( geo, mat, light );\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if defined( USE_ENV_MAP ) || defined( IS_REFLECTIONPLANE )\n\n\t\tfloat dNV = clamp( dot( geo.normal, geo.viewDir ), 0.0, 1.0 );\n\t\tfloat EF = fresnel( dNV );\n\n\t#endif\n\n\t/*-------------------------------\n\t\tEnvironment Lighting\n\t-------------------------------*/\n\n\t#ifdef USE_ENV_MAP\n\n\t\tvec3 refDir = reflect( geo.viewDirWorld, geo.normalWorld );\n\t\trefDir.x *= -1.0;\n\t\n\t\tvec4 envMapColor = textureCubeUV( envMap, geo.normalWorld, 1.0 ) * iblIntensity * envMapIntensity;\n\t\toutColor += mat.diffuseColor * envMapColor.xyz * ( 1.0 - mat.metalness );\n\n\t#endif\n\n\t/*-------------------------------\n\t\tReflection\n\t-------------------------------*/\n\t\n\t#ifdef IS_REFLECTIONPLANE\n\t\n\t\tvec2 refUV = gl_FragCoord.xy / renderResolution;\n\n\t\trefUV.x += geo.normal.x * 0.5;\n\n\t\tfloat l = (mat.roughness ) * 1.6 * REF_MIPMAP_LEVEL;\n\n\t\tfloat offset1 = floor( l );\n\t\tfloat offset2 = offset1 + 1.0;\n\t\tfloat blend = fract( l );\n\t\t\n\t\tvec2 ruv1 = getRefMipmapUV( refUV, offset1 );\n\t\tvec2 ruv2 = getRefMipmapUV( refUV, offset2 );\n\n\t\tvec3 ref1 = textureBicubic( reflectionTex, ruv1, mipMapResolution ).xyz;\n\t\tvec3 ref2 = textureBicubic( reflectionTex, ruv2, mipMapResolution ).xyz;\n\n\t\tvec3 ref = mat.specularColor * mix( ref1, ref2, blend );\n\n\t\toutColor = mix(\n\t\t\toutColor + ref * mat.metalness,\n\t\t\tref,\n\t\t\tEF\n\t\t);\n\n\t#elif defined( USE_ENV_MAP )\n\t\n\t\tvec3 env = mat.specularColor * textureCubeUV( envMap, refDir, mat.roughness ).xyz * envMapIntensity;\n\t\n\t\toutColor = mix(\n\t\t\toutColor + env * mat.metalness,\n\t\t\tenv,\n\t\t\tEF\n\t\t);\n\t\n\t#endif\n\n\t/*-------------------------------\n\t\tEmission\n\t-------------------------------*/\n\n\t#ifdef USE_EMISSION_MAP\n\n\t\toutColor += LinearTosRGB( texture2D( emissionMap, vUv ) ).xyz;\n\t\n\t#else\n\n\t\toutColor += emission;\n\n\t#endif\n\n\tgl_FragColor = vec4( outColor, outOpacity );\n\n}";class r extends t.Mesh{constructor(o,a,r){a=a||{};let s,l=n.UniformsLib.mergeUniforms(a.uniforms||{},{envMap:{value:null},envMapIntensity:{value:null},iblIntensity:{value:null},maxLodLevel:{value:0},shadowLightModelViewMatrix:{value:new t.Matrix4},shadowLightProjectionMatrix:{value:new t.Matrix4},shadowLightDirection:{value:new t.Vector3},shadowLightCameraClip:{value:new t.Vector2},shadowMap:{value:null},shadowMapSize:{value:new t.Vector2},shadowMapResolution:{value:new t.Vector2},shadowLightSize:{value:1},cameraNear:{value:.01},cameraFar:{value:1e3},color:{value:new t.Color(1,1,1)},metalness:{value:0},roughness:{value:.5},opacity:{value:1},emission:{value:new t.Color(0,0,0)}});if(l=n.UniformsLib.mergeUniforms(l,t.UniformsUtils.clone(t.UniformsLib.lights)),"isBufferGeometry"in o)s=o;else if("isMesh"in o){s=o.geometry;let t=o.material;t.isMeshStandardMaterial&&(t.map?l.map={value:t.map}:t.color&&l.color.value.copy(t.color),t.roughnessMap?l.roughnessMap={value:t.roughnessMap}:l.roughness.value=t.roughness,t.alphaMap?l.alphaMap={value:t.alphaMap}:l.opacity.value=t.opacity,t.metalnessMap?(console.log(t.metalnessMap),l.metalnessMap={value:t.metalnessMap}):l.metalness.value=t.metalness,t.normalMap&&(l.normalMap={value:t.normalMap}),t.emissiveMap?l.emissionMap={value:t.emissiveMap}:l.emission.value.copy(t.emissive))}else s=new t.BufferGeometry;s.getAttribute("tangent")||s.getIndex()&&s.getAttribute("position")&&s.getAttribute("normal")&&s.getAttribute("uv")&&s.computeTangents(),a.uniforms=l;let c=new t.ShaderMaterial(Object.assign({vertexShader:e,fragmentShader:i,lights:!0,transparent:!0,side:t.DoubleSide,extensions:{derivatives:!0},defines:{}},a));if(l.map&&(c.defines.USE_MAP=""),l.roughnessMap&&(c.defines.USE_ROUGHNESS_MAP=""),l.metalnessMap&&(c.defines.USE_METALNESS_MAP=""),l.alphaMap&&(c.defines.USE_ALPHA_MAP=""),l.normalMap&&(c.defines.USE_NORMAL_MAP=""),l.emissionMap&&(c.defines.USE_EMISSION_MAP=""),super(s,c),this.name=o.name,this.userData.colorMat=this.material,this.customDepthMaterial=new t.ShaderMaterial(Object.assign(Object.assign({vertexShader:e,fragmentShader:i,side:t.DoubleSide,lights:!0,extensions:{derivatives:!0}},a),{defines:Object.assign(Object.assign({},c.defines),{DEPTH:""})})),this.commonUniforms=l,"isMesh"in o&&r){o.geometry.dispose(),o.children.slice().forEach((t=>{this.add(t)})),this.position.copy(o.position),this.rotation.copy(o.rotation),this.scale.copy(o.scale);let t=o.parent;t&&(t.add(this),t.remove(o))}this.envMapSrc=null,this.envMapUpdate=!1,this.envMapResolution=256,this.envMapRenderTarget=new t.WebGLCubeRenderTarget(this.envMapResolution,{format:t.RGBAFormat,generateMipmaps:!0,magFilter:t.LinearFilter,minFilter:t.LinearFilter}),this.envMapCamera=new t.CubeCamera(.001,1e3,this.envMapRenderTarget),this.getWorldPosition(this.envMapCamera.position),this.onBeforeRender=(t,n,e)=>{this.dispatchEvent({type:"beforeRender",renderer:t,scene:n,camera:e})},this.addEventListener("beforeRender",(n=>{let e=n.renderer,i=n.scene,o=n.camera;if(this.envMapUpdate){let n=null,o=new t.PMREMGenerator(e);o.compileEquirectangularShader(),this.envMapSrc?n="isCubeTexture"in this.envMapSrc?o.fromCubemap(this.envMapSrc):o.fromEquirectangular(this.envMapSrc):(this.visible=!1,this.envMapCamera.update(e,i),n=o.fromCubemap(this.envMapRenderTarget.texture),this.visible=!0);let a=n.height;const r=Math.round(Math.log2(a))-2,s=1/a,l=1/(3*Math.max(Math.pow(2,r),112));c.defines.USE_ENV_MAP="",c.defines.CUBEUV_MAX_MIP=r+".0",c.defines.CUBEUV_TEXEL_WIDTH=l+"",c.defines.CUBEUV_TEXEL_HEIGHT=s+"",this.commonUniforms.envMap.value=n.texture,this.envMapUpdate=!1}o.userData.depthCamera&&(this.material=this.userData.depthMat,this.commonUniforms.cameraNear.value=o.near,this.commonUniforms.cameraFar.value=o.far,this.material||(this.visible=!1))}));const d=()=>{this.envMapRenderTarget.dispose(),this.geometry.dispose(),this.material.dispose(),this.removeEventListener("dispose",d)};this.addEventListener("dispose",d)}updateEnvMap(t=null){this.envMapSrc=t,this.envMapUpdate=!0,null==this.commonUniforms.envMapIntensity.value&&(this.commonUniforms.envMapIntensity.value=1),null==this.commonUniforms.iblIntensity.value&&(this.commonUniforms.iblIntensity.value=1)}set envMapIntensity(t){this.commonUniforms.envMapIntensity.value=t}set iblIntensity(t){this.commonUniforms.iblIntensity.value=t}dispose(){this.dispatchEvent({type:"dispsoe"})}get isPowerMesh(){return!0}}class s extends r{constructor(e,i,o){(i=i||{}).uniforms=n.UniformsLib.mergeUniforms(i.uniforms||{},{reflectionTex:{value:null},renderResolution:{value:new t.Vector2(1,1)},textureMatrix:{value:new t.Matrix4},mipMapResolution:{value:new t.Vector2(1,1)}}),i.defines={IS_REFLECTIONPLANE:""},super(e,i,o),this.reflectorPlane=new t.Plane,this.normal=new t.Vector3,this.reflectorWorldPosition=new t.Vector3,this.cameraWorldPosition=new t.Vector3,this.rotationMatrix=new t.Matrix4,this.lookAtPosition=new t.Vector3(0,0,-1),this.clipPlane=new t.Vector4,this.textureMatrix=this.commonUniforms.textureMatrix.value,this.clipBias=.1,this.view=new t.Vector3,this.target=new t.Vector3,this.q=new t.Vector4,this.virtualCamera=new t.PerspectiveCamera,this.mipmapPP=null,this.mipmapGeo=new t.BufferGeometry;let a=[],r=[],s=[],l=new t.Vector2(0,0),c=2;a.push(l.x,l.y,0),a.push(l.x+c,l.y,0),a.push(l.x+c,l.y-c,0),a.push(l.x,l.y-c,0),r.push(1,1),r.push(0,1),r.push(0,0),r.push(1,0),s.push(0,2,1,0,3,2),l.set(c,0);for(let t=0;t<7;t++){c*=.5,a.push(l.x,l.y,0),a.push(l.x+c,l.y,0),a.push(l.x+c,l.y-c,0),a.push(l.x,l.y-c,0),r.push(1,1),r.push(0,1),r.push(0,0),r.push(1,0);let n=4*(t+0);s.push(n+0,n+2,n+1,n+0,n+3,n+2),l.y=l.y-c}let d=new t.BufferAttribute(new Float32Array(a),3),m=new t.BufferAttribute(new Float32Array(r),2),f=new t.BufferAttribute(new Uint16Array(s),1);d.applyMatrix4((new t.Matrix4).makeScale(1/1.5,1,1)),d.applyMatrix4((new t.Matrix4).makeTranslation(-1,1,0)),this.mipmapGeo.setAttribute("position",d),this.mipmapGeo.setAttribute("uv",m),this.mipmapGeo.setIndex(f),this.renderTargets={ref:new t.WebGLRenderTarget(1,1),mipmap:new t.WebGLRenderTarget(1,1)},this.addEventListener("beforeRender",(e=>{let i=e.renderer,o=e.scene,a=e.camera;if(this.reflectorWorldPosition.setFromMatrixPosition(this.matrixWorld),this.cameraWorldPosition.setFromMatrixPosition(a.matrixWorld),this.rotationMatrix.extractRotation(this.matrixWorld),this.normal.set(0,1,0),this.normal.applyMatrix4(this.rotationMatrix),this.view.subVectors(this.reflectorWorldPosition,this.cameraWorldPosition),this.view.dot(this.normal)>0)return;this.view.reflect(this.normal).negate(),this.view.add(this.reflectorWorldPosition),this.rotationMatrix.extractRotation(a.matrixWorld),this.lookAtPosition.set(0,0,-1),this.lookAtPosition.applyMatrix4(this.rotationMatrix),this.lookAtPosition.add(this.cameraWorldPosition),this.target.subVectors(this.reflectorWorldPosition,this.lookAtPosition),this.target.reflect(this.normal).negate(),this.target.add(this.reflectorWorldPosition),this.virtualCamera.position.copy(this.view),this.virtualCamera.up.set(0,1,0),this.virtualCamera.up.applyMatrix4(this.rotationMatrix),this.virtualCamera.up.reflect(this.normal),this.virtualCamera.lookAt(this.target),a.far&&(this.virtualCamera.far=a.far),this.virtualCamera.updateMatrixWorld(),this.virtualCamera.projectionMatrix.copy(a.projectionMatrix),this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.virtualCamera.projectionMatrix),this.textureMatrix.multiply(this.virtualCamera.matrixWorldInverse),this.textureMatrix.multiply(this.matrixWorld),this.reflectorPlane.setFromNormalAndCoplanarPoint(this.normal,this.reflectorWorldPosition),this.reflectorPlane.applyMatrix4(this.virtualCamera.matrixWorldInverse),this.clipPlane.set(this.reflectorPlane.normal.x,this.reflectorPlane.normal.y,this.reflectorPlane.normal.z,this.reflectorPlane.constant);var r=this.virtualCamera.projectionMatrix;this.q.x=(Math.sign(this.clipPlane.x)+r.elements[8])/r.elements[0],this.q.y=(Math.sign(this.clipPlane.y)+r.elements[9])/r.elements[5],this.q.z=-1,this.q.w=(1+r.elements[10])/r.elements[14],this.clipPlane.multiplyScalar(2/this.clipPlane.dot(this.q)),r.elements[2]=this.clipPlane.x,r.elements[6]=this.clipPlane.y,r.elements[10]=this.clipPlane.z+1-this.clipBias,r.elements[14]=this.clipPlane.w;let s=i.getRenderTarget();i.setRenderTarget(this.renderTargets.ref),this.visible=!1,i.clear(),i.render(o,this.virtualCamera),i.clearDepth(),i.setRenderTarget(s),this.visible=!0,null==this.mipmapPP&&(this.mipmapPP=new n.PostProcessing(i,{fragmentShader:"#define GLSLIFY 1\nuniform sampler2D tex;\nvarying vec2 vUv;\n\nfloat clip( vec2 uv ) {\n\tvec2 c = step( abs(uv - 0.5), vec2( 0.5 ) );\n\treturn c.x * c.y;\n}\n\nvoid main( void ) {\n\n\tvec4 col = texture2D( tex, vUv );\n\tgl_FragColor = col;\n\n}",side:t.DoubleSide},this.mipmapGeo)),this.mipmapPP.render({tex:this.renderTargets.ref.texture},this.renderTargets.mipmap),this.commonUniforms.reflectionTex.value=this.renderTargets.mipmap.texture;let l=i.getRenderTarget();l?this.commonUniforms.renderResolution.value.set(l.width,l.height):(i.getSize(this.commonUniforms.renderResolution.value),this.commonUniforms.renderResolution.value.multiplyScalar(i.getPixelRatio()))})),this.resize()}resize(){this.renderTargets.ref.setSize(512,512);let n=new t.Vector2(768,512);this.renderTargets.mipmap.setSize(n.x,n.y),this.commonUniforms.mipMapResolution.value.copy(n)}}})(),a})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFXbEQsR0FDNUR2RixLQUFLSyxlQUFlMkQsaUJBQWlCOUgsTUFBTWlDLEtBQU1zSyxNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vUG93ZXJNZXNoL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9Qb3dlck1lc2gvZXh0ZXJuYWwgdW1kIHtcImNvbW1vbmpzXCI6XCJvcmUtdGhyZWUtdHNcIixcImNvbW1vbmpzMlwiOlwib3JlLXRocmVlLXRzXCIsXCJhbWRcIjpcIm9yZS10aHJlZS10c1wiLFwicm9vdFwiOlwiT1JFXCJ9Iiwid2VicGFjazovL1Bvd2VyTWVzaC9leHRlcm5hbCB1bWQge1wiY29tbW9uanNcIjpcInRocmVlXCIsXCJjb21tb25qczJcIjpcInRocmVlXCIsXCJhbWRcIjpcInRocmVlXCIsXCJyb290XCI6XCJUSFJFRVwifSIsIndlYnBhY2s6Ly9Qb3dlck1lc2gvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vUG93ZXJNZXNoL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9Qb3dlck1lc2gvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9Qb3dlck1lc2gvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9Qb3dlck1lc2gvLi9zcmMvUG93ZXJNZXNoL3NoYWRlcnMvcG93ZXIudnMiLCJ3ZWJwYWNrOi8vUG93ZXJNZXNoLy4vc3JjL1Bvd2VyTWVzaC9zaGFkZXJzL3Bvd2VyLmZzIiwid2VicGFjazovL1Bvd2VyTWVzaC8uL3NyYy9Qb3dlck1lc2gvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vUG93ZXJNZXNoLy4vc3JjL1Bvd2VyUmVmbGVjdGlvbk1lc2gvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vUG93ZXJNZXNoLy4vc3JjL1Bvd2VyUmVmbGVjdGlvbk1lc2gvc2hhZGVycy9taXBtYXAuZnMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwidGhyZWVcIiksIHJlcXVpcmUoXCJvcmUtdGhyZWUtdHNcIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW1widGhyZWVcIiwgXCJvcmUtdGhyZWUtdHNcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiUG93ZXJNZXNoXCJdID0gZmFjdG9yeShyZXF1aXJlKFwidGhyZWVcIiksIHJlcXVpcmUoXCJvcmUtdGhyZWUtdHNcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIlBvd2VyTWVzaFwiXSA9IGZhY3Rvcnkocm9vdFtcIlRIUkVFXCJdLCByb290W1wiT1JFXCJdKTtcbn0pKHNlbGYsIChfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18zODFfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fOTA2X18pID0+IHtcbnJldHVybiAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzkwNl9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMzgxX187IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJleHBvcnQgZGVmYXVsdCBcIiNkZWZpbmUgR0xTTElGWSAxXFxuYXR0cmlidXRlIHZlYzQgdGFuZ2VudDtcXG5cXG52YXJ5aW5nIHZlYzIgdlV2O1xcbnZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbnZhcnlpbmcgdmVjMyB2Vmlld05vcm1hbDtcXG52YXJ5aW5nIHZlYzMgdlRhbmdlbnQ7XFxudmFyeWluZyB2ZWMzIHZCaXRhbmdlbnQ7XFxudmFyeWluZyB2ZWMzIHZWaWV3UG9zO1xcbnZhcnlpbmcgdmVjMyB2V29ybGRQb3M7XFxudmFyeWluZyB2ZWMyIHZIaWdoUHJlY2lzaW9uWlc7XFxuXFxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXFxuXFx0U2hhZG93TWFwXFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXFxuXFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX3ZlcnRleD5cXG5cXG52b2lkIG1haW4oIHZvaWQgKSB7XFxuXFxuXFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXFxuXFx0XFx0UG9zaXRpb25cXG5cXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cXG5cXG5cXHR2ZWMzIHBvcyA9IHBvc2l0aW9uO1xcblxcdHZlYzQgd29ybGRQb3MgPSBtb2RlbE1hdHJpeCAqIHZlYzQoIHBvcywgMS4wICk7XFxuXFx0dmVjNCBtdlBvc2l0aW9uID0gdmlld01hdHJpeCAqIHdvcmxkUG9zO1xcblxcdFxcblxcdGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG12UG9zaXRpb247XFxuXFxuXFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXFxuXFx0XFx0Tm9ybWFsIC8gVGFuZ2VudFxcblxcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xcblxcblxcdHZlYzMgdHJhbnNmb3JtZWROb3JtYWwgPSBub3JtYWxNYXRyaXggKiBub3JtYWw7XFxuXFx0dmVjNCBmbGlwZWRUYW5nZW50ID0gdGFuZ2VudDtcXG5cXHRmbGlwZWRUYW5nZW50LncgKj0gLTEuMDtcXG5cXG5cXHQjaWZkZWYgRkxJUF9TSURFRFxcblxcdFxcdHRyYW5zZm9ybWVkTm9ybWFsICo9IC0xLjA7XFxuXFx0XFx0ZmxpcGVkVGFuZ2VudCAqPSAtMS4wO1xcblxcdCNlbmRpZlxcblxcdFxcblxcdHZlYzMgbm9ybWFsID0gbm9ybWFsaXplKCB0cmFuc2Zvcm1lZE5vcm1hbCApO1xcblxcdHZlYzMgdGFuZ2VudCA9IG5vcm1hbGl6ZSggKCBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBmbGlwZWRUYW5nZW50Lnh5eiwgMC4wICkgKS54eXogKTtcXG5cXHR2ZWMzIGJpVGFuZ2VudCA9IG5vcm1hbGl6ZSggY3Jvc3MoIG5vcm1hbCwgdGFuZ2VudCApICogZmxpcGVkVGFuZ2VudC53ICk7XFxuXFxuXFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXFxuXFx0XFx0U2hhZG93XFxuXFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXFxuXFx0XFxuXFx0dmVjNCBzaGFkb3dXb3JsZFBvcztcXG5cXHRcXG5cXHQjaWYgZGVmaW5lZCggVVNFX1NIQURPV01BUCApICYmIE5VTV9ESVJfTElHSFRfU0hBRE9XUyA+IDBcXG5cXHRcXG5cXHRcXHQjcHJhZ21hIHVucm9sbF9sb29wX3N0YXJ0XFxuXFx0XFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0RJUl9MSUdIVF9TSEFET1dTOyBpICsrICkge1xcblxcdFxcdFxcdFxcblxcdFxcdFxcdHNoYWRvd1dvcmxkUG9zID0gd29ybGRQb3MgKyB2ZWM0KCB2ZWM0KCB0cmFuc2Zvcm1lZE5vcm1hbCwgMC4wICkgKiBtb2RlbE1hdHJpeCApICogZGlyZWN0aW9uYWxMaWdodFNoYWRvd3NbIGkgXS5zaGFkb3dOb3JtYWxCaWFzO1xcblxcdFxcdFxcdHZEaXJlY3Rpb25hbFNoYWRvd0Nvb3JkWyBpIF0gPSBkaXJlY3Rpb25hbFNoYWRvd01hdHJpeFsgaSBdICogc2hhZG93V29ybGRQb3M7XFxuXFx0XFx0XFx0XFxuXFx0XFx0fVxcblxcdFxcdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXFxuXFx0XFx0XFxuXFx0I2VuZGlmXFxuXFxuXFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXFxuXFx0XFx0VmFyeWluZ1xcblxcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xcblxcdFxcblxcdHZVdiA9IHV2O1xcblxcdHZOb3JtYWwgPSBub3JtYWw7XFxuXFx0dlRhbmdlbnQgPSB0YW5nZW50O1xcblxcdHZCaXRhbmdlbnQgPSBiaVRhbmdlbnQ7XFxuXFx0dlZpZXdQb3MgPSAtbXZQb3NpdGlvbi54eXo7XFxuXFx0dldvcmxkUG9zID0gd29ybGRQb3MueHl6O1xcblxcdHZIaWdoUHJlY2lzaW9uWlcgPSBnbF9Qb3NpdGlvbi56dztcXG5cXHRcXG59XCI7IiwiZXhwb3J0IGRlZmF1bHQgXCIjZGVmaW5lIEdMU0xJRlkgMVxcbnZhcnlpbmcgdmVjMiB2VXY7XFxudmFyeWluZyB2ZWMzIHZUYW5nZW50O1xcbnZhcnlpbmcgdmVjMyB2Qml0YW5nZW50O1xcblxcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcblxcdFJlcXVpcmVcXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cXG5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG5cXG52ZWMyIHBhY2tpbmcxNiggZmxvYXQgdmFsdWUgKSB7IFxcblxcblxcdGZsb2F0IHYxID0gdmFsdWUgKiAyNTUuMDtcXG5cXHRmbG9hdCByID0gZmxvb3IodjEpO1xcblxcblxcdGZsb2F0IHYyID0gKCB2MSAtIHIgKSAqIDI1NS4wO1xcblxcdGZsb2F0IGcgPSBmbG9vciggdjIgKTtcXG5cXG5cXHRyZXR1cm4gdmVjMiggciwgZyApIC8gMjU1LjA7XFxuXFxufVxcblxcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcblxcdFJlcXVpZXJzXFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXFxuXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG5cXG5mbG9hdCByYW5kb20odmVjMiBwKXtcXG5cXHRyZXR1cm4gZnJhY3Qoc2luKGRvdChwLnh5ICx2ZWMyKDEyLjk4OTgsNzguMjMzKSkpICogNDM3NTguNTQ1Myk7XFxufVxcblxcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcblxcdE1hdGVyaWFsIFVuaWZvcm1zXFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXFxuXFxudW5pZm9ybSBmbG9hdCB0aW1lO1xcblxcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcblxcdFRleHR1cmVzXFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXFxuXFxuI2lmZGVmIFVTRV9NQVBcXG5cXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBtYXA7XFxuXFxuI2Vsc2VcXG5cXG5cXHR1bmlmb3JtIHZlYzMgY29sb3I7XFxuXFxuI2VuZGlmXFxuXFxuI2lmZGVmIFVTRV9OT1JNQUxfTUFQXFxuXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgbm9ybWFsTWFwO1xcblxcbiNlbmRpZlxcblxcbiNpZmRlZiBVU0VfUk9VR0hORVNTX01BUFxcblxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIHJvdWdobmVzc01hcDtcXG5cXG4jZWxzZVxcblxcblxcdHVuaWZvcm0gZmxvYXQgcm91Z2huZXNzO1xcblxcbiNlbmRpZlxcblxcbiNpZmRlZiBVU0VfQUxQSEFfTUFQXFxuXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgYWxwaGFNYXA7XFxuXFxuI2Vsc2VcXG5cXG5cXHR1bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxuXFx0XFxuI2VuZGlmXFxuXFxuI2lmZGVmIFVTRV9NRVRBTE5FU1NfTUFQXFxuXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgbWV0YWxuZXNzTWFwO1xcblxcbiNlbHNlXFxuXFxuXFx0dW5pZm9ybSBmbG9hdCBtZXRhbG5lc3M7XFxuXFxuI2VuZGlmXFxuI2lmZGVmIFVTRV9FTUlTU0lPTl9NQVBcXG5cXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBlbWlzc2lvbk1hcDtcXG5cXG4jZWxzZVxcblxcblxcdHVuaWZvcm0gdmVjMyBlbWlzc2lvbjtcXG5cXG4jZW5kaWZcXG5cXG4jaWZkZWYgSVNfUkVGTEVDVElPTlBMQU5FXFxuXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgcmVmbGVjdGlvblRleDtcXG5cXHR1bmlmb3JtIHZlYzIgcmVuZGVyUmVzb2x1dGlvbjtcXG5cXHR1bmlmb3JtIHZlYzIgbWlwTWFwUmVzb2x1dGlvbjtcXG5cXHRcXG4jZW5kaWZcXG5cXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXG5cXHRUeXBlc1xcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xcblxcbnN0cnVjdCBHZW9tZXRyeSB7XFxuXFx0dmVjMyBwb3M7XFxuXFx0dmVjMyBwb3NXb3JsZDtcXG5cXHR2ZWMzIHZpZXdEaXI7XFxuXFx0dmVjMyB2aWV3RGlyV29ybGQ7XFxuXFx0dmVjMyBub3JtYWw7XFxuXFx0dmVjMyBub3JtYWxXb3JsZDtcXG59O1xcblxcbnN0cnVjdCBMaWdodCB7XFxuXFx0dmVjMyBkaXJlY3Rpb247XFxuXFx0dmVjMyBjb2xvcjtcXG59O1xcblxcbnN0cnVjdCBNYXRlcmlhbCB7XFxuXFx0dmVjMyBhbGJlZG87XFxuXFx0dmVjMyBkaWZmdXNlQ29sb3I7XFxuXFx0dmVjMyBzcGVjdWxhckNvbG9yO1xcblxcdGZsb2F0IG1ldGFsbmVzcztcXG5cXHRmbG9hdCByb3VnaG5lc3M7XFxuXFx0ZmxvYXQgb3BhY2l0eTtcXG59O1xcblxcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcblxcdExpZ2h0c1xcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xcblxcbiNpZiBOVU1fRElSX0xJR0hUUyA+IDBcXG5cXG5cXHRzdHJ1Y3QgRGlyZWN0aW9uYWxMaWdodCB7XFxuXFx0XFx0dmVjMyBkaXJlY3Rpb247XFxuXFx0XFx0dmVjMyBjb2xvcjtcXG5cXHR9O1xcblxcblxcdHVuaWZvcm0gRGlyZWN0aW9uYWxMaWdodCBkaXJlY3Rpb25hbExpZ2h0c1sgTlVNX0RJUl9MSUdIVFMgXTtcXG5cXG4jZW5kaWZcXG5cXG4jaWYgTlVNX1BPSU5UX0xJR0hUUyA+IDBcXG5cXG5cXHRzdHJ1Y3QgUG9pbnRMaWdodCB7XFxuXFx0XFx0dmVjMyBwb3NpdGlvbjtcXG5cXHRcXHR2ZWMzIGNvbG9yO1xcblxcdFxcdGZsb2F0IGRpc3RhbmNlO1xcblxcdFxcdGZsb2F0IGRlY2F5O1xcblxcdH07XFxuXFxuXFx0dW5pZm9ybSBQb2ludExpZ2h0IHBvaW50TGlnaHRzWyBOVU1fUE9JTlRfTElHSFRTIF07XFxuXFxuI2VuZGlmXFxuXFxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXFxuXFx0RW52TWFwXFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXFxuXFxuI2lmZGVmIFVTRV9FTlZfTUFQXFxuXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgZW52TWFwO1xcblxcdHVuaWZvcm0gZmxvYXQgZW52TWFwSW50ZW5zaXR5O1xcblxcdHVuaWZvcm0gZmxvYXQgaWJsSW50ZW5zaXR5O1xcblxcdHVuaWZvcm0gZmxvYXQgbWF4TG9kTGV2ZWw7XFxuXFxuXFx0I2RlZmluZSBFTlZNQVBfVFlQRV9DVUJFX1VWXFxuXFx0I2luY2x1ZGUgPGN1YmVfdXZfcmVmbGVjdGlvbl9mcmFnbWVudD5cXG5cXG4jZW5kaWZcXG5cXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXG5cXHRSZWZsZWN0aW9uXFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXFxuXFxuI2RlZmluZSBSRUZfTUlQTUFQX0xFVkVMIDguMFxcblxcbiNpZmRlZiBJU19SRUZMRUNUSU9OUExBTkVcXG5cXG5cXHR2ZWMyIGdldFJlZk1pcG1hcFVWKCB2ZWMyIHV2LCBmbG9hdCBsZXZlbCApIHtcXG5cXG5cXHRcXHR2ZWMyIHJ1diA9IHV2O1xcblxcblxcdFxcdGlmKCBsZXZlbCA+IDAuMCApIHtcXG5cXG5cXHRcXHRcXHRydXYueCAqPSAxLjAgLyAoIDMuMCAqICggcG93KCAyLjAsIGxldmVsICkgLyAyLjAgKSApO1xcblxcdFxcdFxcdHJ1di55ICo9IDEuMCAvICggcG93KCAyLjAsIGxldmVsICkgKTtcXG5cXHRcXHRcXHRydXYueSArPSAxLjAgLyAoIHBvdyggMi4wLCBsZXZlbCApICk7XFxuXFx0XFx0XFx0cnV2LnggKz0gMS4wIC8gMS41O1xcblxcdFxcdFxcblxcdFxcdH0gZWxzZSB7XFxuXFxuXFx0XFx0XFx0cnV2LnggLz0gMS41O1xcblxcdFxcdFxcdFxcblxcdFxcdH1cXG5cXG5cXHRcXHRyZXR1cm4gcnV2O1xcblxcblxcdH1cXG5cXHRcXG5cXHR2ZWM0IGN1YmljKGZsb2F0IHYpIHtcXG5cXHRcXHR2ZWM0IG4gPSB2ZWM0KDEuMCwgMi4wLCAzLjAsIDQuMCkgLSB2O1xcblxcdFxcdHZlYzQgcyA9IG4gKiBuICogbjtcXG5cXHRcXHRmbG9hdCB4ID0gcy54O1xcblxcdFxcdGZsb2F0IHkgPSBzLnkgLSA0LjAgKiBzLng7XFxuXFx0XFx0ZmxvYXQgeiA9IHMueiAtIDQuMCAqIHMueSArIDYuMCAqIHMueDtcXG5cXHRcXHRmbG9hdCB3ID0gNi4wIC0geCAtIHkgLSB6O1xcblxcdFxcdHJldHVybiB2ZWM0KHgsIHksIHosIHcpO1xcblxcdH1cXG5cXG5cXHQvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMzUwMTA4MS9lZmZpY2llbnQtYmljdWJpYy1maWx0ZXJpbmctY29kZS1pbi1nbHNsXFxuXFx0dmVjNCB0ZXh0dXJlQmljdWJpYyhzYW1wbGVyMkQgdCwgdmVjMiB0ZXhDb29yZHMsIHZlYzIgdGV4dHVyZVNpemUpIHtcXG5cXHRcXHR2ZWMyIGludlRleFNpemUgPSAxLjAgLyB0ZXh0dXJlU2l6ZTtcXG5cXHRcXHR0ZXhDb29yZHMgPSB0ZXhDb29yZHMgKiB0ZXh0dXJlU2l6ZSAtIDAuNTtcXG5cXHRcXHR2ZWMyIGZ4eSA9IGZyYWN0KHRleENvb3Jkcyk7XFxuXFx0XFx0dGV4Q29vcmRzIC09IGZ4eTtcXG5cXHRcXHR2ZWM0IHhjdWJpYyA9IGN1YmljKGZ4eS54KTtcXG5cXHRcXHR2ZWM0IHljdWJpYyA9IGN1YmljKGZ4eS55KTtcXG5cXHRcXHR2ZWM0IGMgPSB0ZXhDb29yZHMueHh5eSArIHZlYzIgKC0wLjUsIDEuNSkueHl4eTtcXG5cXHRcXHR2ZWM0IHMgPSB2ZWM0KHhjdWJpYy54eiArIHhjdWJpYy55dywgeWN1YmljLnh6ICsgeWN1YmljLnl3KTtcXG5cXHRcXHR2ZWM0IG9mZnNldCA9IGMgKyB2ZWM0ICh4Y3ViaWMueXcsIHljdWJpYy55dykgLyBzO1xcblxcdFxcdG9mZnNldCAqPSBpbnZUZXhTaXplLnh4eXk7XFxuXFx0XFx0dmVjNCBzYW1wbGUwID0gdGV4dHVyZTJEKHQsIG9mZnNldC54eik7XFxuXFx0XFx0dmVjNCBzYW1wbGUxID0gdGV4dHVyZTJEKHQsIG9mZnNldC55eik7XFxuXFx0XFx0dmVjNCBzYW1wbGUyID0gdGV4dHVyZTJEKHQsIG9mZnNldC54dyk7XFxuXFx0XFx0dmVjNCBzYW1wbGUzID0gdGV4dHVyZTJEKHQsIG9mZnNldC55dyk7XFxuXFx0XFx0ZmxvYXQgc3ggPSBzLnggLyAocy54ICsgcy55KTtcXG5cXHRcXHRmbG9hdCBzeSA9IHMueiAvIChzLnogKyBzLncpO1xcblxcdFxcdHJldHVybiBtaXgoXFxuXFx0XFx0bWl4KHNhbXBsZTMsIHNhbXBsZTIsIHN4KSwgbWl4KHNhbXBsZTEsIHNhbXBsZTAsIHN4KSwgc3kpO1xcblxcdH1cXG5cXG4jZW5kaWZcXG5cXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXG5cXHRTaGFkb3dcXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cXG5cXG4jaWZkZWYgREVQVEhcXG5cXG5cXHR2YXJ5aW5nIHZlYzIgdkhpZ2hQcmVjaXNpb25aVztcXG5cXHR1bmlmb3JtIGZsb2F0IGNhbWVyYU5lYXI7XFxuXFx0dW5pZm9ybSBmbG9hdCBjYW1lcmFGYXI7XFxuXFxuI2VuZGlmXFxuXFxuI2lmZGVmIFVTRV9TSEFET1dNQVBcXG5cXG4jaWYgTlVNX0RJUl9MSUdIVF9TSEFET1dTID4gMFxcblxcblxcdFxcdHVuaWZvcm0gc2FtcGxlcjJEIGRpcmVjdGlvbmFsU2hhZG93TWFwWyBOVU1fRElSX0xJR0hUX1NIQURPV1MgXTtcXG5cXHRcXHR2YXJ5aW5nIHZlYzQgdkRpcmVjdGlvbmFsU2hhZG93Q29vcmRbIE5VTV9ESVJfTElHSFRfU0hBRE9XUyBdO1xcblxcblxcdFxcdHN0cnVjdCBEaXJlY3Rpb25hbExpZ2h0U2hhZG93IHtcXG5cXHRcXHRcXHRmbG9hdCBzaGFkb3dCaWFzO1xcblxcdFxcdFxcdGZsb2F0IHNoYWRvd05vcm1hbEJpYXM7XFxuXFx0XFx0XFx0ZmxvYXQgc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdHZlYzIgc2hhZG93TWFwU2l6ZTtcXG5cXHRcXHR9O1xcblxcblxcdFxcdHVuaWZvcm0gRGlyZWN0aW9uYWxMaWdodFNoYWRvdyBkaXJlY3Rpb25hbExpZ2h0U2hhZG93c1sgTlVNX0RJUl9MSUdIVF9TSEFET1dTIF07XFxuXFxuXFx0I2VuZGlmXFxuXFxuXFx0I2RlZmluZSBTSEFET1dfU0FNUExFX0NPVU5UIDRcXG5cXG5cXHR2ZWMyIHBvaXNzb25EaXNrWyBTSEFET1dfU0FNUExFX0NPVU5UIF07XFxuXFxuXFx0dm9pZCBpbml0UG9pc3NvbkRpc2soIGZsb2F0IHNlZWQgKSB7XFxuXFxuXFx0XFx0ZmxvYXQgciA9IDAuMTtcXG5cXHRcXHRmbG9hdCByU3RlcCA9ICgxLjAgLSByKSAvIGZsb2F0KCBTSEFET1dfU0FNUExFX0NPVU5UICk7XFxuXFxuXFx0XFx0ZmxvYXQgYW5nID0gcmFuZG9tKCBnbF9GcmFnQ29vcmQueHkgKiAwLjAxICsgc2luKCB0aW1lICkgKSAqIFBJMiAqIDEuMDtcXG5cXHRcXHRmbG9hdCBhbmdTdGVwID0gKCAoIFBJMiAqIDExLjAgKSAvIGZsb2F0KCBTSEFET1dfU0FNUExFX0NPVU5UICkgKTtcXG5cXHRcXHRcXG5cXHRcXHRmb3IoIGludCBpID0gMDsgaSA8IFNIQURPV19TQU1QTEVfQ09VTlQ7IGkrKyApIHtcXG5cXG5cXHRcXHRcXHRwb2lzc29uRGlza1sgaSBdID0gdmVjMihcXG5cXHRcXHRcXHRcXHRzaW4oIGFuZyApLFxcblxcdFxcdFxcdFxcdGNvcyggYW5nIClcXG5cXHRcXHRcXHQpICogcG93KCByLCAwLjc1ICk7XFxuXFxuXFx0XFx0XFx0ciArPSByU3RlcDtcXG5cXHRcXHRcXHRhbmcgKz0gYW5nU3RlcDtcXG5cXHRcXHR9XFxuXFx0XFx0XFxuXFx0fVxcblxcblxcdHZlYzIgY29tcGFpclNoYWRvd01hcERlcHRoKCBzYW1wbGVyMkQgc2hhZG93TWFwLCB2ZWMyIHNoYWRvd01hcFVWLCBmbG9hdCBkZXB0aCApIHtcXG5cXG5cXHRcXHRpZiggc2hhZG93TWFwVVYueCA8IDAuMCB8fCBzaGFkb3dNYXBVVi54ID4gMS4wIHx8IHNoYWRvd01hcFVWLnkgPCAwLjAgfHwgc2hhZG93TWFwVVYueSA+IDEuMCApIHtcXG5cXG5cXHRcXHRcXHRyZXR1cm4gdmVjMiggMS4wLCAwLjAgKTtcXG5cXG5cXHRcXHR9XFxuXFxuXFx0XFx0ZmxvYXQgc2hhZG93TWFwRGVwdGggPSB1bnBhY2tSR0JBVG9EZXB0aCggdGV4dHVyZTJEKCBzaGFkb3dNYXAsIHNoYWRvd01hcFVWICkgKTtcXG5cXG5cXHRcXHRpZiggMC4wID49IHNoYWRvd01hcERlcHRoIHx8IHNoYWRvd01hcERlcHRoID49IDEuMCApIHtcXG5cXG5cXHRcXHRcXHRyZXR1cm4gdmVjMiggMS4wLCAwLjAgKTtcXG5cXG5cXHRcXHR9XFxuXFx0XFx0XFxuXFx0XFx0ZmxvYXQgc2hhZG93ID0gZGVwdGggPD0gc2hhZG93TWFwRGVwdGggPyAxLjAgOiAwLjA7XFxuXFxuXFx0XFx0cmV0dXJuIHZlYzIoIHNoYWRvdywgc2hhZG93TWFwRGVwdGggKTtcXG5cXHRcXHRcXG5cXHR9XFxuXFxuXFx0ZmxvYXQgc2hhZG93TWFwUENGKCBzYW1wbGVyMkQgc2hhZG93TWFwLCB2ZWM0IHNoYWRvd01hcENvb3JkLCB2ZWMyIHNoYWRvd1NpemUgKSB7XFxuXFxuXFx0XFx0ZmxvYXQgc2hhZG93ID0gMC4wO1xcblxcdFxcdFxcblxcdFxcdGZvciggaW50IGkgPSAwOyBpIDwgU0hBRE9XX1NBTVBMRV9DT1VOVDsgaSArKyAgKSB7XFxuXFx0XFx0XFx0XFxuXFx0XFx0XFx0dmVjMiBvZmZzZXQgPSBwb2lzc29uRGlza1sgaSBdICogc2hhZG93U2l6ZTsgXFxuXFxuXFx0XFx0XFx0c2hhZG93ICs9IGNvbXBhaXJTaGFkb3dNYXBEZXB0aCggc2hhZG93TWFwLCBzaGFkb3dNYXBDb29yZC54eSArIG9mZnNldCwgc2hhZG93TWFwQ29vcmQueiApLng7XFxuXFx0XFx0XFx0XFxuXFx0XFx0fVxcblxcblxcdFxcdHNoYWRvdyAvPSBmbG9hdCggU0hBRE9XX1NBTVBMRV9DT1VOVCApO1xcblxcblxcdFxcdHJldHVybiBzaGFkb3c7XFxuXFxuXFx0fVxcblxcblxcdGZsb2F0IGdldFNoYWRvdyggc2FtcGxlcjJEIHNoYWRvd01hcCwgdmVjMiBzaGFkb3dNYXBTaXplLCBmbG9hdCBiaWFzLCB2ZWM0IHNoYWRvd01hcENvb3JkICkge1xcblxcdFxcdFxcblxcdFxcdHNoYWRvd01hcENvb3JkLnh5eiAvPSBzaGFkb3dNYXBDb29yZC53O1xcblxcdFxcdHNoYWRvd01hcENvb3JkLnogKz0gYmlhcyAtIDAuMDAwMTtcXG5cXG5cXHRcXHRpbml0UG9pc3NvbkRpc2sodGltZSk7XFxuXFxuXFx0XFx0dmVjMiBzaGFkb3dTaXplID0gMS4wIC8gc2hhZG93TWFwU2l6ZTtcXG5cXG5cXHRcXHRyZXR1cm4gc2hhZG93TWFwUENGKCBzaGFkb3dNYXAsIHNoYWRvd01hcENvb3JkLCBzaGFkb3dTaXplICk7XFxuXFxuXFx0fVxcblxcbiNlbmRpZlxcblxcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcblxcdFJFXFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXFxuXFxudmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxudmFyeWluZyB2ZWMzIHZWaWV3Tm9ybWFsO1xcbnZhcnlpbmcgdmVjMyB2Vmlld1BvcztcXG52YXJ5aW5nIHZlYzMgdldvcmxkUG9zO1xcblxcbmZsb2F0IGdneCggZmxvYXQgZE5ILCBmbG9hdCByb3VnaG5lc3MgKSB7XFxuXFx0XFxuXFx0ZmxvYXQgYTIgPSByb3VnaG5lc3MgKiByb3VnaG5lc3M7XFxuXFx0YTIgPSBhMiAqIGEyO1xcblxcdGZsb2F0IGROSDIgPSBkTkggKiBkTkg7XFxuXFxuXFx0aWYoIGROSDIgPD0gMC4wICkgcmV0dXJuIDAuMDtcXG5cXG5cXHRyZXR1cm4gYTIgLyAoIFBJICogcG93KCBkTkgyICogKCBhMiAtIDEuMCApICsgMS4wLCAyLjApICk7XFxuXFxufVxcblxcbnZlYzMgbGFtYmVydCggdmVjMyBkaWZmdXNlQ29sb3IgKSB7XFxuXFxuXFx0cmV0dXJuIGRpZmZ1c2VDb2xvciAvIFBJO1xcblxcbn1cXG5cXG5mbG9hdCBnU2NobGljayggZmxvYXQgZCwgZmxvYXQgayApIHtcXG5cXG5cXHRpZiggZCA9PSAwLjAgKSByZXR1cm4gMC4wO1xcblxcblxcdHJldHVybiBkIC8gKCBkICogKCAxLjAgLSBrICkgKyBrICk7XFxuXFx0XFxufVxcblxcbmZsb2F0IGdTbWl0aCggZmxvYXQgZE5WLCBmbG9hdCBkTkwsIGZsb2F0IHJvdWdobmVzcyApIHtcXG5cXG5cXHRmbG9hdCBrID0gY2xhbXAoIHJvdWdobmVzcyAqIHNxcnQoIDIuMCAvIFBJICksIDAuMCwgMS4wICk7XFxuXFxuXFx0cmV0dXJuIGdTY2hsaWNrKCBkTlYsIGsgKSAqIGdTY2hsaWNrKCBkTkwsIGsgKTtcXG5cXHRcXG59XFxuXFxuZmxvYXQgZnJlc25lbCggZmxvYXQgZCApIHtcXG5cXHRcXG5cXHRmbG9hdCBmMCA9IDAuMDQ7XFxuXFxuXFx0cmV0dXJuIGYwICsgKCAxLjAgLSBmMCApICogcG93KCAxLjAgLSBkLCA1LjAgKTtcXG5cXG59XFxuXFxudmVjMyBSRSggR2VvbWV0cnkgZ2VvLCBNYXRlcmlhbCBtYXQsIExpZ2h0IGxpZ2h0KSB7XFxuXFxuXFx0dmVjMyBsaWdodERpciA9IG5vcm1hbGl6ZSggbGlnaHQuZGlyZWN0aW9uICk7XFxuXFx0dmVjMyBoYWxmVmVjID0gbm9ybWFsaXplKCBnZW8udmlld0RpciArIGxpZ2h0RGlyICk7XFxuXFxuXFx0ZmxvYXQgZExIID0gY2xhbXAoIGRvdCggbGlnaHREaXIsIGhhbGZWZWMgKSwgMC4wLCAxLjAgKTtcXG5cXHRmbG9hdCBkTkggPSBjbGFtcCggZG90KCBnZW8ubm9ybWFsLCBoYWxmVmVjICksIDAuMCwgMS4wICk7XFxuXFx0ZmxvYXQgZE5WID0gY2xhbXAoIGRvdCggZ2VvLm5vcm1hbCwgZ2VvLnZpZXdEaXIgKSwgMC4wLCAxLjAgKTtcXG5cXHRmbG9hdCBkTkwgPSBjbGFtcCggZG90KCBnZW8ubm9ybWFsLCBsaWdodERpciksIDAuMCwgMS4wICk7XFxuXFxuXFx0dmVjMyBpcnJhZGlhbmNlID0gbGlnaHQuY29sb3IgKiBkTkw7XFxuXFxuXFx0Ly8gZGlmZnVzZVxcblxcdHZlYzMgZGlmZnVzZSA9IGxhbWJlcnQoIG1hdC5kaWZmdXNlQ29sb3IgKSAqIGlycmFkaWFuY2U7XFxuXFxuXFx0Ly8gc3BlY3VsYXJcXG5cXHRmbG9hdCBEID0gZ2d4KCBkTkgsIG1hdC5yb3VnaG5lc3MgKTtcXG5cXHRmbG9hdCBHID0gZ1NtaXRoKCBkTlYsIGROTCwgbWF0LnJvdWdobmVzcyApO1xcblxcdGZsb2F0IEYgPSBmcmVzbmVsKCBkTEggKTtcXG5cXHRcXG5cXHR2ZWMzIHNwZWN1bGFyID0gKCggRCAqIEcgKiBGICkgLyAoIDQuMCAqIGROTCAqIGROViArIDAuMDAwMSApICogbWF0LnNwZWN1bGFyQ29sb3IgKSAqIGlycmFkaWFuY2U7IFxcblxcblxcdHZlYzMgYyA9IHZlYzMoIDAuMCApO1xcblxcdGMgKz0gZGlmZnVzZSAqICggMS4wIC0gRiApICsgc3BlY3VsYXI7XFxuXFxuXFx0cmV0dXJuIGM7XFxuXFxufVxcblxcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcblxcdE1haW5cXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cXG5cXG52b2lkIG1haW4oIHZvaWQgKSB7XFxuXFxuXFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXFxuXFx0XFx0TWF0ZXJpYWxcXG5cXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cXG5cXG5cXHRNYXRlcmlhbCBtYXQ7XFxuXFxuXFx0I2lmZGVmIFVTRV9NQVBcXG5cXG5cXHRcXHR2ZWM0IGNvbG9yID0gTGluZWFyVG9zUkdCKCB0ZXh0dXJlMkQoIG1hcCwgdlV2ICkgKTtcXG5cXHRcXHRtYXQuYWxiZWRvID0gY29sb3IueHl6O1xcblxcblxcdCNlbHNlXFxuXFxuXFx0XFx0bWF0LmFsYmVkbyA9IGNvbG9yLnh5ejtcXG5cXHRcXHRtYXQub3BhY2l0eSA9IDEuMDtcXG5cXHRcXG5cXHQjZW5kaWZcXG5cXG5cXHQjaWZkZWYgVVNFX1JPVUdITkVTU19NQVBcXG5cXG5cXHRcXHRtYXQucm91Z2huZXNzID0gdGV4dHVyZTJEKCByb3VnaG5lc3NNYXAsIHZVdiApLnk7XFxuXFxuXFx0I2Vsc2VcXG5cXG5cXHRcXHRtYXQucm91Z2huZXNzID0gcm91Z2huZXNzO1xcblxcdFxcblxcdCNlbmRpZlxcblxcblxcdCNpZmRlZiBVU0VfTUVUQUxORVNTX01BUFxcblxcblxcdFxcdG1hdC5tZXRhbG5lc3MgPSB0ZXh0dXJlMkQoIG1ldGFsbmVzc01hcCwgdlV2ICkuejtcXG5cXG5cXHQjZWxzZVxcblxcblxcdFxcdG1hdC5tZXRhbG5lc3MgPSBtZXRhbG5lc3M7XFxuXFx0XFxuXFx0I2VuZGlmXFxuXFxuXFx0I2lmZGVmIFVTRV9BTFBIQV9NQVBcXG5cXG5cXHRcXHRtYXQub3BhY2l0eSA9IHRleHR1cmUyRCggYWxwaGFNYXAsIHZVdiApLng7XFxuXFxuXFx0I2Vsc2VcXG5cXG5cXHRcXHRtYXQub3BhY2l0eSA9IG9wYWNpdHk7XFxuXFxuXFx0I2VuZGlmXFxuXFx0XFxuXFx0aWYoIG1hdC5vcGFjaXR5IDwgMC41ICkgZGlzY2FyZDtcXG5cXG5cXHRtYXQuZGlmZnVzZUNvbG9yID0gbWl4KCBtYXQuYWxiZWRvLCB2ZWMzKCAwLjAsIDAuMCwgMC4wICksIG1hdC5tZXRhbG5lc3MgKTtcXG5cXHRtYXQuc3BlY3VsYXJDb2xvciA9IG1peCggdmVjMyggMS4wLCAxLjAsIDEuMCApLCBtYXQuYWxiZWRvLCBtYXQubWV0YWxuZXNzICk7XFxuXFxuXFx0Ly8gb3V0cHV0XFxuXFx0dmVjMyBvdXRDb2xvciA9IHZlYzMoIDAuMCApO1xcblxcdGZsb2F0IG91dE9wYWNpdHkgPSBtYXQub3BhY2l0eTtcXG5cXG5cXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXG5cXHRcXHREZXB0aFxcblxcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xcblxcblxcdCNpZmRlZiBERVBUSFxcblxcblxcdFxcdGZsb2F0IGZyYWdDb29yZFogPSAwLjUgKiB2SGlnaFByZWNpc2lvblpXLnggLyB2SGlnaFByZWNpc2lvblpXLnkgKyAwLjU7XFxuXFx0XFx0Z2xfRnJhZ0NvbG9yID0gcGFja0RlcHRoVG9SR0JBKCBmcmFnQ29vcmRaICk7XFxuXFx0XFx0cmV0dXJuO1xcblxcdFxcblxcdCNlbmRpZlxcblxcblxcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcblxcdFxcdEdlb21ldHJ5XFxuXFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXFxuXFxuXFx0ZmxvYXQgZmFjZURpcmVjdGlvbiA9IGdsX0Zyb250RmFjaW5nID8gMS4wIDogLTEuMDtcXG5cXG5cXHRHZW9tZXRyeSBnZW87XFxuXFx0Z2VvLnBvcyA9IC12Vmlld1BvcztcXG5cXHRnZW8ucG9zV29ybGQgPSB2V29ybGRQb3M7XFxuXFx0Z2VvLnZpZXdEaXIgPSBub3JtYWxpemUoIHZWaWV3UG9zICk7XFxuXFx0Z2VvLnZpZXdEaXJXb3JsZCA9IG5vcm1hbGl6ZSggZ2VvLnBvc1dvcmxkIC0gY2FtZXJhUG9zaXRpb24gKTtcXG5cXHRnZW8ubm9ybWFsID0gbm9ybWFsaXplKCB2Tm9ybWFsICkgKiBmYWNlRGlyZWN0aW9uO1xcblxcblxcdCNpZmRlZiBVU0VfTk9STUFMX01BUFxcblxcdFxcdFxcblxcdFxcdHZlYzMgdGFuZ2VudCA9IG5vcm1hbGl6ZSggdlRhbmdlbnQgKTtcXG5cXHRcXHR2ZWMzIGJpdGFuZ2VudCA9IG5vcm1hbGl6ZSggdkJpdGFuZ2VudCApO1xcblxcblxcdFxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXG5cXHRcXHRcXHR0YW5nZW50ICo9IGZhY2VEaXJlY3Rpb247XFxuXFx0XFx0XFx0Yml0YW5nZW50ICo9IGZhY2VEaXJlY3Rpb247XFxuXFx0XFx0XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0XFxuXFx0XFx0bWF0MyB2VEJOID0gbWF0MyggdGFuZ2VudCwgYml0YW5nZW50LCBnZW8ubm9ybWFsICk7XFxuXFx0XFx0XFxuXFx0XFx0dmVjMyBtYXBOID0gdGV4dHVyZTJEKCBub3JtYWxNYXAsIHZVdiApLnh5ejtcXG5cXHRcXHRtYXBOID0gbWFwTiAqIDIuMCAtIDEuMDtcXG5cXHRcXHRnZW8ubm9ybWFsID0gbm9ybWFsaXplKCB2VEJOICogbWFwTiApO1xcblxcblxcdCNlbmRpZlxcblxcdFxcblxcdGdlby5ub3JtYWxXb3JsZCA9IG5vcm1hbGl6ZSggKCB2ZWM0KCBnZW8ubm9ybWFsLCAwLjAgKSAqIHZpZXdNYXRyaXggKS54eXogKTtcXG5cXG5cXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXG5cXHRcXHRMaWdodGluZ1xcblxcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xcblxcdFxcblxcdExpZ2h0IGxpZ2h0O1xcblxcblxcdCNpZiBOVU1fRElSX0xJR0hUUyA+IDBcXG5cXG5cXHRcXHQjcHJhZ21hIHVucm9sbF9sb29wX3N0YXJ0XFxuXFx0XFx0XFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0RJUl9MSUdIVFM7IGkgKysgKSB7XFxuXFxuXFx0XFx0XFx0XFx0bGlnaHQuZGlyZWN0aW9uID0gZGlyZWN0aW9uYWxMaWdodHNbIGkgXS5kaXJlY3Rpb247XFxuXFx0XFx0XFx0XFx0bGlnaHQuY29sb3IgPSBkaXJlY3Rpb25hbExpZ2h0c1sgaSBdLmNvbG9yO1xcblxcblxcdFxcdFxcdFxcdGZsb2F0IHNoYWRvdyA9IDEuMDtcXG5cXHRcXHRcXHRcXHRcXG5cXHRcXHRcXHRcXHQjaWYgZGVmaW5lZCggVVNFX1NIQURPV01BUCApICYmIE5VTV9ESVJfTElHSFRfU0hBRE9XUyA+IDBcXG5cXG5cXHRcXHRcXHRcXHRcXHRzaGFkb3cgPSBnZXRTaGFkb3coIGRpcmVjdGlvbmFsU2hhZG93TWFwWyBpIF0sIGRpcmVjdGlvbmFsTGlnaHRTaGFkb3dzWyBpIF0uc2hhZG93TWFwU2l6ZSwgZGlyZWN0aW9uYWxMaWdodFNoYWRvd3NbIGkgXS5zaGFkb3dCaWFzLCB2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgaSBdICk7XFxuXFxuXFx0XFx0XFx0XFx0I2VuZGlmXFxuXFxuXFx0XFx0XFx0XFx0b3V0Q29sb3IgKz0gUkUoIGdlbywgbWF0LCBsaWdodCApICogc2hhZG93O1xcblxcdFxcdFxcdFxcdFxcblxcdFxcdFxcdH1cXG5cXHRcXHQjcHJhZ21hIHVucm9sbF9sb29wX2VuZFxcblxcblxcdCNlbmRpZlxcblxcblxcdCNpZiBOVU1fUE9JTlRfTElHSFRTID4gMFxcblxcblxcdFxcdFBvaW50TGlnaHQgcExpZ2h0O1xcblxcdFxcdHZlYzMgdjtcXG5cXHRcXHRmbG9hdCBkO1xcblxcdFxcdGZsb2F0IGF0dGVudWF0aW9uO1xcblxcdFxcdCNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnRcXG5cXG5cXHRcXHRcXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fUE9JTlRfTElHSFRTOyBpICsrICkge1xcblxcblxcdFxcdFxcdFxcdHBMaWdodCA9IHBvaW50TGlnaHRzWyBpIF07XFxuXFxuXFx0XFx0XFx0XFx0diA9IHBMaWdodC5wb3NpdGlvbiAtIGdlby5wb3M7XFxuXFx0XFx0XFx0XFx0ZCA9IGxlbmd0aCggdiApO1xcblxcdFxcdFxcdFxcdGxpZ2h0LmRpcmVjdGlvbiA9IG5vcm1hbGl6ZSggdiApO1xcblxcdFxcdFxcblxcdFxcdFxcdFxcdGxpZ2h0LmNvbG9yID0gcExpZ2h0LmNvbG9yO1xcblxcblxcdFxcdFxcdFxcdGlmKCBwTGlnaHQuZGlzdGFuY2UgPiAwLjAgJiYgcExpZ2h0LmRlY2F5ID4gMC4wICkge1xcblxcblxcdFxcdFxcdFxcdFxcdGF0dGVudWF0aW9uID0gcG93KCBjbGFtcCggLWQgLyBwTGlnaHQuZGlzdGFuY2UgKyAxLjAsIDAuMCwgMS4wICksIHBMaWdodC5kZWNheSApO1xcblxcdFxcdFxcdFxcdFxcdGxpZ2h0LmNvbG9yICo9IGF0dGVudWF0aW9uO1xcblxcblxcdFxcdFxcdFxcdH1cXG5cXG5cXHRcXHRcXHRcXHRvdXRDb2xvciArPSBSRSggZ2VvLCBtYXQsIGxpZ2h0ICk7XFxuXFx0XFx0XFx0XFx0XFxuXFx0XFx0XFx0fVxcblxcdFxcdFxcdFxcblxcdFxcdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXFxuXFxuXFx0I2VuZGlmXFxuXFxuXFx0I2lmIGRlZmluZWQoIFVTRV9FTlZfTUFQICkgfHwgZGVmaW5lZCggSVNfUkVGTEVDVElPTlBMQU5FIClcXG5cXG5cXHRcXHRmbG9hdCBkTlYgPSBjbGFtcCggZG90KCBnZW8ubm9ybWFsLCBnZW8udmlld0RpciApLCAwLjAsIDEuMCApO1xcblxcdFxcdGZsb2F0IEVGID0gZnJlc25lbCggZE5WICk7XFxuXFxuXFx0I2VuZGlmXFxuXFxuXFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXFxuXFx0XFx0RW52aXJvbm1lbnQgTGlnaHRpbmdcXG5cXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cXG5cXG5cXHQjaWZkZWYgVVNFX0VOVl9NQVBcXG5cXG5cXHRcXHR2ZWMzIHJlZkRpciA9IHJlZmxlY3QoIGdlby52aWV3RGlyV29ybGQsIGdlby5ub3JtYWxXb3JsZCApO1xcblxcdFxcdHJlZkRpci54ICo9IC0xLjA7XFxuXFx0XFxuXFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmVDdWJlVVYoIGVudk1hcCwgZ2VvLm5vcm1hbFdvcmxkLCAxLjAgKSAqIGlibEludGVuc2l0eSAqIGVudk1hcEludGVuc2l0eTtcXG5cXHRcXHRvdXRDb2xvciArPSBtYXQuZGlmZnVzZUNvbG9yICogZW52TWFwQ29sb3IueHl6ICogKCAxLjAgLSBtYXQubWV0YWxuZXNzICk7XFxuXFxuXFx0I2VuZGlmXFxuXFxuXFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXFxuXFx0XFx0UmVmbGVjdGlvblxcblxcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xcblxcdFxcblxcdCNpZmRlZiBJU19SRUZMRUNUSU9OUExBTkVcXG5cXHRcXG5cXHRcXHR2ZWMyIHJlZlVWID0gZ2xfRnJhZ0Nvb3JkLnh5IC8gcmVuZGVyUmVzb2x1dGlvbjtcXG5cXG5cXHRcXHRyZWZVVi54ICs9IGdlby5ub3JtYWwueCAqIDAuNTtcXG5cXG5cXHRcXHRmbG9hdCBsID0gKG1hdC5yb3VnaG5lc3MgKSAqIDEuNiAqIFJFRl9NSVBNQVBfTEVWRUw7XFxuXFxuXFx0XFx0ZmxvYXQgb2Zmc2V0MSA9IGZsb29yKCBsICk7XFxuXFx0XFx0ZmxvYXQgb2Zmc2V0MiA9IG9mZnNldDEgKyAxLjA7XFxuXFx0XFx0ZmxvYXQgYmxlbmQgPSBmcmFjdCggbCApO1xcblxcdFxcdFxcblxcdFxcdHZlYzIgcnV2MSA9IGdldFJlZk1pcG1hcFVWKCByZWZVViwgb2Zmc2V0MSApO1xcblxcdFxcdHZlYzIgcnV2MiA9IGdldFJlZk1pcG1hcFVWKCByZWZVViwgb2Zmc2V0MiApO1xcblxcblxcdFxcdHZlYzMgcmVmMSA9IHRleHR1cmVCaWN1YmljKCByZWZsZWN0aW9uVGV4LCBydXYxLCBtaXBNYXBSZXNvbHV0aW9uICkueHl6O1xcblxcdFxcdHZlYzMgcmVmMiA9IHRleHR1cmVCaWN1YmljKCByZWZsZWN0aW9uVGV4LCBydXYyLCBtaXBNYXBSZXNvbHV0aW9uICkueHl6O1xcblxcblxcdFxcdHZlYzMgcmVmID0gbWF0LnNwZWN1bGFyQ29sb3IgKiBtaXgoIHJlZjEsIHJlZjIsIGJsZW5kICk7XFxuXFxuXFx0XFx0b3V0Q29sb3IgPSBtaXgoXFxuXFx0XFx0XFx0b3V0Q29sb3IgKyByZWYgKiBtYXQubWV0YWxuZXNzLFxcblxcdFxcdFxcdHJlZixcXG5cXHRcXHRcXHRFRlxcblxcdFxcdCk7XFxuXFxuXFx0I2VsaWYgZGVmaW5lZCggVVNFX0VOVl9NQVAgKVxcblxcdFxcblxcdFxcdHZlYzMgZW52ID0gbWF0LnNwZWN1bGFyQ29sb3IgKiB0ZXh0dXJlQ3ViZVVWKCBlbnZNYXAsIHJlZkRpciwgbWF0LnJvdWdobmVzcyApLnh5eiAqIGVudk1hcEludGVuc2l0eTtcXG5cXHRcXG5cXHRcXHRvdXRDb2xvciA9IG1peChcXG5cXHRcXHRcXHRvdXRDb2xvciArIGVudiAqIG1hdC5tZXRhbG5lc3MsXFxuXFx0XFx0XFx0ZW52LFxcblxcdFxcdFxcdEVGXFxuXFx0XFx0KTtcXG5cXHRcXG5cXHQjZW5kaWZcXG5cXG5cXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXG5cXHRcXHRFbWlzc2lvblxcblxcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xcblxcblxcdCNpZmRlZiBVU0VfRU1JU1NJT05fTUFQXFxuXFxuXFx0XFx0b3V0Q29sb3IgKz0gTGluZWFyVG9zUkdCKCB0ZXh0dXJlMkQoIGVtaXNzaW9uTWFwLCB2VXYgKSApLnh5ejtcXG5cXHRcXG5cXHQjZWxzZVxcblxcblxcdFxcdG91dENvbG9yICs9IGVtaXNzaW9uO1xcblxcblxcdCNlbmRpZlxcblxcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dENvbG9yLCBvdXRPcGFjaXR5ICk7XFxuXFxufVwiOyIsImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcclxuaW1wb3J0ICogYXMgT1JFIGZyb20gJ29yZS10aHJlZS10cyc7XHJcblxyXG5pbXBvcnQgcG93ZXJWZXJ0IGZyb20gJy4vc2hhZGVycy9wb3dlci52cyc7XHJcbmltcG9ydCBwb3dlckZyYWcgZnJvbSAnLi9zaGFkZXJzL3Bvd2VyLmZzJztcclxuXHJcbmV4cG9ydCB0eXBlIFBvd2VyTWVzaE1hdGVyaWFsVHlwZSA9ICdjb2xvcicgfCAnZGVwdGgnIHwgJ2NvYydcclxuZXhwb3J0IGNsYXNzIFBvd2VyTWVzaCBleHRlbmRzIFRIUkVFLk1lc2g8VEhSRUUuQnVmZmVyR2VvbWV0cnksIFRIUkVFLlNoYWRlck1hdGVyaWFsPiB7XHJcblxyXG5cdHByb3RlY3RlZCBjb21tb25Vbmlmb3JtczogT1JFLlVuaWZvcm1zO1xyXG5cclxuXHQvLyBlbnZNYXBcclxuXHRwcm90ZWN0ZWQgZW52TWFwUmVzb2x1dGlvbjogbnVtYmVyO1xyXG5cdHByb3RlY3RlZCBlbnZNYXBSZW5kZXJUYXJnZXQ6IFRIUkVFLldlYkdMQ3ViZVJlbmRlclRhcmdldDtcclxuXHRwcm90ZWN0ZWQgZW52TWFwQ2FtZXJhOiBUSFJFRS5DdWJlQ2FtZXJhO1xyXG5cdHByb3RlY3RlZCBlbnZNYXBVcGRhdGU6IGJvb2xlYW47XHJcblx0cHJvdGVjdGVkIGVudk1hcFNyYzogVEhSRUUuQ3ViZVRleHR1cmUgfCBUSFJFRS5UZXh0dXJlIHwgbnVsbDtcclxuXHJcblx0Y29uc3RydWN0b3IoIGdlb21ldHJ5OiBUSFJFRS5CdWZmZXJHZW9tZXRyeSwgbWF0ZXJpYWxPcHRpb24/OiBUSFJFRS5TaGFkZXJNYXRlcmlhbFBhcmFtZXRlcnMsIG92ZXJyaWRlPzogYm9vbGVhbiApO1xyXG5cclxuXHRjb25zdHJ1Y3RvciggbWVzaDogVEhSRUUuTWVzaCwgbWF0ZXJpYWxPcHRpb24/OiBUSFJFRS5TaGFkZXJNYXRlcmlhbFBhcmFtZXRlcnMsIG92ZXJyaWRlPzogYm9vbGVhbiApO1xyXG5cclxuXHRjb25zdHJ1Y3RvciggZ2VvTWVzaDogVEhSRUUuQnVmZmVyR2VvbWV0cnkgfCBUSFJFRS5NZXNoLCBtYXRlcmlhbE9wdGlvbj86IFRIUkVFLlNoYWRlck1hdGVyaWFsUGFyYW1ldGVycywgb3ZlcnJpZGU/OiBib29sZWFuICkge1xyXG5cclxuXHRcdG1hdGVyaWFsT3B0aW9uID0gbWF0ZXJpYWxPcHRpb24gfHwge307XHJcblxyXG5cdFx0bGV0IHVuaSA9IE9SRS5Vbmlmb3Jtc0xpYi5tZXJnZVVuaWZvcm1zKCBtYXRlcmlhbE9wdGlvbi51bmlmb3JtcyB8fCB7fSwge1xyXG5cdFx0XHRlbnZNYXA6IHtcclxuXHRcdFx0XHR2YWx1ZTogbnVsbFxyXG5cdFx0XHR9LFxyXG5cdFx0XHRlbnZNYXBJbnRlbnNpdHk6IHtcclxuXHRcdFx0XHR2YWx1ZTogbnVsbFxyXG5cdFx0XHR9LFxyXG5cdFx0XHRpYmxJbnRlbnNpdHk6IHtcclxuXHRcdFx0XHR2YWx1ZTogbnVsbFxyXG5cdFx0XHR9LFxyXG5cdFx0XHRtYXhMb2RMZXZlbDoge1xyXG5cdFx0XHRcdHZhbHVlOiAwXHJcblx0XHRcdH0sXHJcblx0XHRcdHNoYWRvd0xpZ2h0TW9kZWxWaWV3TWF0cml4OiB7XHJcblx0XHRcdFx0dmFsdWU6IG5ldyBUSFJFRS5NYXRyaXg0KClcclxuXHRcdFx0fSxcclxuXHRcdFx0c2hhZG93TGlnaHRQcm9qZWN0aW9uTWF0cml4OiB7XHJcblx0XHRcdFx0dmFsdWU6IG5ldyBUSFJFRS5NYXRyaXg0KClcclxuXHRcdFx0fSxcclxuXHRcdFx0c2hhZG93TGlnaHREaXJlY3Rpb246IHtcclxuXHRcdFx0XHR2YWx1ZTogbmV3IFRIUkVFLlZlY3RvcjMoKVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRzaGFkb3dMaWdodENhbWVyYUNsaXA6IHtcclxuXHRcdFx0XHR2YWx1ZTogbmV3IFRIUkVFLlZlY3RvcjIoKVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRzaGFkb3dNYXA6IHtcclxuXHRcdFx0XHR2YWx1ZTogbnVsbFxyXG5cdFx0XHR9LFxyXG5cdFx0XHRzaGFkb3dNYXBTaXplOiB7XHJcblx0XHRcdFx0dmFsdWU6IG5ldyBUSFJFRS5WZWN0b3IyKClcclxuXHRcdFx0fSxcclxuXHRcdFx0c2hhZG93TWFwUmVzb2x1dGlvbjoge1xyXG5cdFx0XHRcdHZhbHVlOiBuZXcgVEhSRUUuVmVjdG9yMigpXHJcblx0XHRcdH0sXHJcblx0XHRcdHNoYWRvd0xpZ2h0U2l6ZToge1xyXG5cdFx0XHRcdHZhbHVlOiAxLjBcclxuXHRcdFx0fSxcclxuXHRcdFx0Y2FtZXJhTmVhcjoge1xyXG5cdFx0XHRcdHZhbHVlOiAwLjAxXHJcblx0XHRcdH0sXHJcblx0XHRcdGNhbWVyYUZhcjoge1xyXG5cdFx0XHRcdHZhbHVlOiAxMDAwLjBcclxuXHRcdFx0fSxcclxuXHRcdFx0Ly8gZGVmYXVsdCBwcm9wc1xyXG5cdFx0XHRjb2xvcjoge1xyXG5cdFx0XHRcdHZhbHVlOiBuZXcgVEhSRUUuQ29sb3IoIDEuMCwgMS4wLCAxLjAgKVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRtZXRhbG5lc3M6IHtcclxuXHRcdFx0XHR2YWx1ZTogMFxyXG5cdFx0XHR9LFxyXG5cdFx0XHRyb3VnaG5lc3M6IHtcclxuXHRcdFx0XHR2YWx1ZTogMC41XHJcblx0XHRcdH0sXHJcblx0XHRcdG9wYWNpdHk6IHtcclxuXHRcdFx0XHR2YWx1ZTogMVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRlbWlzc2lvbjoge1xyXG5cdFx0XHRcdHZhbHVlOiBuZXcgVEhSRUUuQ29sb3IoIDAuMCwgMC4wLCAwLjAgKVxyXG5cdFx0XHR9XHJcblx0XHR9ICk7XHJcblxyXG5cdFx0dW5pID0gT1JFLlVuaWZvcm1zTGliLm1lcmdlVW5pZm9ybXMoIHVuaSwgVEhSRUUuVW5pZm9ybXNVdGlscy5jbG9uZSggVEhSRUUuVW5pZm9ybXNMaWIubGlnaHRzICkgKTtcclxuXHJcblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdFx0R2VvbWV0cnlcclxuXHRcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuXHRcdGxldCBnZW86IFRIUkVFLkJ1ZmZlckdlb21ldHJ5O1xyXG5cclxuXHRcdGlmICggJ2lzQnVmZmVyR2VvbWV0cnknIGluIGdlb01lc2ggKSB7XHJcblxyXG5cdFx0XHRnZW8gPSBnZW9NZXNoO1xyXG5cclxuXHRcdH0gZWxzZSBpZiAoICdpc01lc2gnIGluIGdlb01lc2ggKSB7XHJcblxyXG5cdFx0XHRnZW8gPSBnZW9NZXNoLmdlb21ldHJ5O1xyXG5cclxuXHRcdFx0bGV0IG1hdCA9ICggZ2VvTWVzaC5tYXRlcmlhbCBhcyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCApO1xyXG5cclxuXHRcdFx0aWYgKCBtYXQuaXNNZXNoU3RhbmRhcmRNYXRlcmlhbCApIHtcclxuXHJcblx0XHRcdFx0aWYgKCBtYXQubWFwICkge1xyXG5cclxuXHRcdFx0XHRcdHVuaS5tYXAgPSB7XHJcblx0XHRcdFx0XHRcdHZhbHVlOiBtYXQubWFwXHJcblx0XHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHR9IGVsc2UgaWYgKCBtYXQuY29sb3IgKSB7XHJcblxyXG5cdFx0XHRcdFx0dW5pLmNvbG9yLnZhbHVlLmNvcHkoIG1hdC5jb2xvciApO1xyXG5cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmICggbWF0LnJvdWdobmVzc01hcCApIHtcclxuXHJcblx0XHRcdFx0XHR1bmkucm91Z2huZXNzTWFwID0ge1xyXG5cdFx0XHRcdFx0XHR2YWx1ZTogbWF0LnJvdWdobmVzc01hcFxyXG5cdFx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0XHR1bmkucm91Z2huZXNzLnZhbHVlID0gbWF0LnJvdWdobmVzcztcclxuXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoIG1hdC5hbHBoYU1hcCApIHtcclxuXHJcblx0XHRcdFx0XHR1bmkuYWxwaGFNYXAgPSB7XHJcblx0XHRcdFx0XHRcdHZhbHVlOiBtYXQuYWxwaGFNYXBcclxuXHRcdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdFx0dW5pLm9wYWNpdHkudmFsdWUgPSBtYXQub3BhY2l0eTtcclxuXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoIG1hdC5tZXRhbG5lc3NNYXAgKSB7XHJcblxyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coIG1hdC5tZXRhbG5lc3NNYXAgKTtcclxuXHJcblx0XHRcdFx0XHR1bmkubWV0YWxuZXNzTWFwID0ge1xyXG5cdFx0XHRcdFx0XHR2YWx1ZTogbWF0Lm1ldGFsbmVzc01hcFxyXG5cdFx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0XHR1bmkubWV0YWxuZXNzLnZhbHVlID0gbWF0Lm1ldGFsbmVzcztcclxuXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoIG1hdC5ub3JtYWxNYXAgKSB7XHJcblxyXG5cdFx0XHRcdFx0dW5pLm5vcm1hbE1hcCA9IHtcclxuXHRcdFx0XHRcdFx0dmFsdWU6IG1hdC5ub3JtYWxNYXBcclxuXHRcdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKCBtYXQuZW1pc3NpdmVNYXAgKSB7XHJcblxyXG5cdFx0XHRcdFx0dW5pLmVtaXNzaW9uTWFwID0ge1xyXG5cdFx0XHRcdFx0XHR2YWx1ZTogbWF0LmVtaXNzaXZlTWFwXHJcblx0XHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHRcdHVuaS5lbWlzc2lvbi52YWx1ZS5jb3B5KCBtYXQuZW1pc3NpdmUgKTtcclxuXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRnZW8gPSBuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gdGFuZ2VudHNcclxuXHJcblx0XHRpZiAoICEgZ2VvLmdldEF0dHJpYnV0ZSggJ3RhbmdlbnQnICkgKSB7XHJcblxyXG5cdFx0XHRpZiAoXHJcblx0XHRcdFx0Z2VvLmdldEluZGV4KCkgJiZcclxuXHRcdFx0XHRnZW8uZ2V0QXR0cmlidXRlKCAncG9zaXRpb24nICkgJiZcclxuXHRcdFx0XHRnZW8uZ2V0QXR0cmlidXRlKCAnbm9ybWFsJyApICYmXHJcblx0XHRcdFx0Z2VvLmdldEF0dHJpYnV0ZSggJ3V2JyApXHJcblx0XHRcdCkge1xyXG5cclxuXHRcdFx0XHRnZW8uY29tcHV0ZVRhbmdlbnRzKCk7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0XHRNYXRlcmlhbFxyXG5cdFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5cdFx0bWF0ZXJpYWxPcHRpb24udW5pZm9ybXMgPSB1bmk7XHJcblxyXG5cdFx0bGV0IG1hdCA9IG5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbCgge1xyXG5cdFx0XHR2ZXJ0ZXhTaGFkZXI6IHBvd2VyVmVydCxcclxuXHRcdFx0ZnJhZ21lbnRTaGFkZXI6IHBvd2VyRnJhZyxcclxuXHRcdFx0bGlnaHRzOiB0cnVlLFxyXG5cdFx0XHR0cmFuc3BhcmVudDogdHJ1ZSxcclxuXHRcdFx0c2lkZTogVEhSRUUuRG91YmxlU2lkZSxcclxuXHRcdFx0ZXh0ZW5zaW9uczoge1xyXG5cdFx0XHRcdGRlcml2YXRpdmVzOiB0cnVlLFxyXG5cdFx0XHR9LFxyXG5cdFx0XHRkZWZpbmVzOiB7XHJcblx0XHRcdH0sXHJcblx0XHRcdC4uLm1hdGVyaWFsT3B0aW9uXHJcblx0XHR9ICk7XHJcblxyXG5cdFx0aWYgKCB1bmkubWFwICkge1xyXG5cclxuXHRcdFx0bWF0LmRlZmluZXMuVVNFX01BUCA9ICcnO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHVuaS5yb3VnaG5lc3NNYXAgKSB7XHJcblxyXG5cdFx0XHRtYXQuZGVmaW5lcy5VU0VfUk9VR0hORVNTX01BUCA9ICcnO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHVuaS5tZXRhbG5lc3NNYXAgKSB7XHJcblxyXG5cdFx0XHRtYXQuZGVmaW5lcy5VU0VfTUVUQUxORVNTX01BUCA9ICcnO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHVuaS5hbHBoYU1hcCApIHtcclxuXHJcblx0XHRcdG1hdC5kZWZpbmVzLlVTRV9BTFBIQV9NQVAgPSAnJztcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCB1bmkubm9ybWFsTWFwICkge1xyXG5cclxuXHRcdFx0bWF0LmRlZmluZXMuVVNFX05PUk1BTF9NQVAgPSAnJztcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCB1bmkuZW1pc3Npb25NYXAgKSB7XHJcblxyXG5cdFx0XHRtYXQuZGVmaW5lcy5VU0VfRU1JU1NJT05fTUFQID0gJyc7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHN1cGVyKCBnZW8sIG1hdCApO1xyXG5cclxuXHRcdHRoaXMubmFtZSA9IGdlb01lc2gubmFtZTtcclxuXHJcblx0XHR0aGlzLnVzZXJEYXRhLmNvbG9yTWF0ID0gdGhpcy5tYXRlcmlhbDtcclxuXHJcblx0XHR0aGlzLmN1c3RvbURlcHRoTWF0ZXJpYWwgPSBuZXcgVEhSRUUuU2hhZGVyTWF0ZXJpYWwoIHtcclxuXHRcdFx0dmVydGV4U2hhZGVyOiBwb3dlclZlcnQsXHJcblx0XHRcdGZyYWdtZW50U2hhZGVyOiBwb3dlckZyYWcsXHJcblx0XHRcdHNpZGU6IFRIUkVFLkRvdWJsZVNpZGUsXHJcblx0XHRcdGxpZ2h0czogdHJ1ZSxcclxuXHRcdFx0ZXh0ZW5zaW9uczoge1xyXG5cdFx0XHRcdGRlcml2YXRpdmVzOiB0cnVlXHJcblx0XHRcdH0sXHJcblx0XHRcdC4uLm1hdGVyaWFsT3B0aW9uLFxyXG5cdFx0XHRkZWZpbmVzOiB7XHJcblx0XHRcdFx0Li4ubWF0LmRlZmluZXMsXHJcblx0XHRcdFx0J0RFUFRIJzogXCJcIixcclxuXHRcdFx0fSxcclxuXHRcdH0gKTtcclxuXHJcblx0XHR0aGlzLmNvbW1vblVuaWZvcm1zID0gdW5pO1xyXG5cclxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0XHRUcmFuc2Zvcm1cclxuXHRcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuXHRcdGlmICggJ2lzTWVzaCcgaW4gZ2VvTWVzaCAmJiBvdmVycmlkZSApIHtcclxuXHJcblx0XHRcdGdlb01lc2guZ2VvbWV0cnkuZGlzcG9zZSgpO1xyXG5cclxuXHRcdFx0bGV0IGNoaWxkQXJyYXkgPSBnZW9NZXNoLmNoaWxkcmVuLnNsaWNlKCk7XHJcblxyXG5cdFx0XHRjaGlsZEFycmF5LmZvckVhY2goIGNoaWxkID0+IHtcclxuXHJcblx0XHRcdFx0dGhpcy5hZGQoIGNoaWxkICk7XHJcblxyXG5cdFx0XHR9ICk7XHJcblxyXG5cdFx0XHR0aGlzLnBvc2l0aW9uLmNvcHkoIGdlb01lc2gucG9zaXRpb24gKTtcclxuXHRcdFx0dGhpcy5yb3RhdGlvbi5jb3B5KCBnZW9NZXNoLnJvdGF0aW9uICk7XHJcblx0XHRcdHRoaXMuc2NhbGUuY29weSggZ2VvTWVzaC5zY2FsZSApO1xyXG5cclxuXHRcdFx0bGV0IHBhcmVudCA9IGdlb01lc2gucGFyZW50O1xyXG5cclxuXHRcdFx0aWYgKCBwYXJlbnQgKSB7XHJcblxyXG5cdFx0XHRcdHBhcmVudC5hZGQoIHRoaXMgKTtcclxuXHJcblx0XHRcdFx0cGFyZW50LnJlbW92ZSggZ2VvTWVzaCApO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdH1cclxuXHJcblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdFx0RW52TWFwXHJcblx0XHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcblx0XHR0aGlzLmVudk1hcFNyYyA9IG51bGw7XHJcblx0XHR0aGlzLmVudk1hcFVwZGF0ZSA9IGZhbHNlO1xyXG5cdFx0dGhpcy5lbnZNYXBSZXNvbHV0aW9uID0gMjU2O1xyXG5cclxuXHRcdHRoaXMuZW52TWFwUmVuZGVyVGFyZ2V0ID0gbmV3IFRIUkVFLldlYkdMQ3ViZVJlbmRlclRhcmdldCggdGhpcy5lbnZNYXBSZXNvbHV0aW9uLCB7XHJcblx0XHRcdGZvcm1hdDogVEhSRUUuUkdCQUZvcm1hdCxcclxuXHRcdFx0Z2VuZXJhdGVNaXBtYXBzOiB0cnVlLFxyXG5cdFx0XHRtYWdGaWx0ZXI6IFRIUkVFLkxpbmVhckZpbHRlcixcclxuXHRcdFx0bWluRmlsdGVyOiBUSFJFRS5MaW5lYXJGaWx0ZXJcclxuXHRcdH0gKTtcclxuXHJcblx0XHR0aGlzLmVudk1hcENhbWVyYSA9IG5ldyBUSFJFRS5DdWJlQ2FtZXJhKCAwLjAwMSwgMTAwMCwgdGhpcy5lbnZNYXBSZW5kZXJUYXJnZXQgKTtcclxuXHRcdHRoaXMuZ2V0V29ybGRQb3NpdGlvbiggdGhpcy5lbnZNYXBDYW1lcmEucG9zaXRpb24gKTtcclxuXHJcblx0XHR0aGlzLm9uQmVmb3JlUmVuZGVyID0gKCByZW5kZXJlciwgc2NlbmUsIGNhbWVyYSApID0+IHtcclxuXHJcblx0XHRcdHRoaXMuZGlzcGF0Y2hFdmVudCgge1xyXG5cdFx0XHRcdHR5cGU6ICdiZWZvcmVSZW5kZXInLFxyXG5cdFx0XHRcdHJlbmRlcmVyLFxyXG5cdFx0XHRcdHNjZW5lLFxyXG5cdFx0XHRcdGNhbWVyYVxyXG5cdFx0XHR9ICk7XHJcblxyXG5cdFx0fTtcclxuXHJcblx0XHR0aGlzLmFkZEV2ZW50TGlzdGVuZXIoICdiZWZvcmVSZW5kZXInLCAoIGU6IFRIUkVFLkV2ZW50ICkgPT4ge1xyXG5cclxuXHRcdFx0bGV0IHJlbmRlcmVyID0gZS5yZW5kZXJlcjtcclxuXHRcdFx0bGV0IHNjZW5lID0gZS5zY2VuZTtcclxuXHRcdFx0bGV0IGNhbWVyYSA9IGUuY2FtZXJhO1xyXG5cclxuXHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHRcdFx0RW52TWFwXHJcblx0XHRcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLmVudk1hcFVwZGF0ZSApIHtcclxuXHJcblx0XHRcdFx0bGV0IGVudk1hcFJUOiBUSFJFRS5XZWJHTFJlbmRlclRhcmdldCB8IG51bGwgPSBudWxsO1xyXG5cclxuXHRcdFx0XHRsZXQgcG1yZW1HZW5lcmF0b3IgPSBuZXcgVEhSRUUuUE1SRU1HZW5lcmF0b3IoIHJlbmRlcmVyICk7XHJcblx0XHRcdFx0cG1yZW1HZW5lcmF0b3IuY29tcGlsZUVxdWlyZWN0YW5ndWxhclNoYWRlcigpO1xyXG5cclxuXHRcdFx0XHRpZiAoIHRoaXMuZW52TWFwU3JjICkge1xyXG5cclxuXHRcdFx0XHRcdGlmICggJ2lzQ3ViZVRleHR1cmUnIGluIHRoaXMuZW52TWFwU3JjICkge1xyXG5cclxuXHRcdFx0XHRcdFx0ZW52TWFwUlQgPSBwbXJlbUdlbmVyYXRvci5mcm9tQ3ViZW1hcCggdGhpcy5lbnZNYXBTcmMgKTtcclxuXHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHRcdFx0ZW52TWFwUlQgPSBwbXJlbUdlbmVyYXRvci5mcm9tRXF1aXJlY3Rhbmd1bGFyKCB0aGlzLmVudk1hcFNyYyApO1xyXG5cclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0XHR0aGlzLnZpc2libGUgPSBmYWxzZTtcclxuXHJcblx0XHRcdFx0XHR0aGlzLmVudk1hcENhbWVyYS51cGRhdGUoIHJlbmRlcmVyLCBzY2VuZSApO1xyXG5cdFx0XHRcdFx0ZW52TWFwUlQgPSBwbXJlbUdlbmVyYXRvci5mcm9tQ3ViZW1hcCggdGhpcy5lbnZNYXBSZW5kZXJUYXJnZXQudGV4dHVyZSApO1xyXG5cclxuXHRcdFx0XHRcdHRoaXMudmlzaWJsZSA9IHRydWU7XHJcblxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gZW52bWFwXHJcblx0XHRcdFx0bGV0IGVudk1hcFJlc29sdXRpb24gPSBlbnZNYXBSVC5oZWlnaHQ7XHJcblxyXG5cdFx0XHRcdGNvbnN0IG1heE1pcCA9IE1hdGgucm91bmQoIE1hdGgubG9nMiggZW52TWFwUmVzb2x1dGlvbiApICkgLSAyO1xyXG5cdFx0XHRcdGNvbnN0IHRleGVsSGVpZ2h0ID0gMS4wIC8gZW52TWFwUmVzb2x1dGlvbjtcclxuXHRcdFx0XHRjb25zdCB0ZXhlbFdpZHRoID0gMS4wIC8gKCAzICogTWF0aC5tYXgoIE1hdGgucG93KCAyLCBtYXhNaXAgKSwgNyAqIDE2ICkgKTtcclxuXHJcblx0XHRcdFx0bWF0LmRlZmluZXNbICdVU0VfRU5WX01BUCcgXSA9ICcnO1xyXG5cdFx0XHRcdG1hdC5kZWZpbmVzWyAnQ1VCRVVWX01BWF9NSVAnIF0gPSBtYXhNaXAgKyAnLjAnO1xyXG5cdFx0XHRcdG1hdC5kZWZpbmVzWyAnQ1VCRVVWX1RFWEVMX1dJRFRIJyBdID0gdGV4ZWxXaWR0aCArICcnO1xyXG5cdFx0XHRcdG1hdC5kZWZpbmVzWyAnQ1VCRVVWX1RFWEVMX0hFSUdIVCcgXSA9IHRleGVsSGVpZ2h0ICsgJyc7XHJcblxyXG5cdFx0XHRcdHRoaXMuY29tbW9uVW5pZm9ybXMuZW52TWFwLnZhbHVlID0gZW52TWFwUlQudGV4dHVyZTtcclxuXHRcdFx0XHR0aGlzLmVudk1hcFVwZGF0ZSA9IGZhbHNlO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHRcdFx0RGVwdGhcclxuXHRcdFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5cdFx0XHRpZiAoIGNhbWVyYS51c2VyRGF0YS5kZXB0aENhbWVyYSApIHtcclxuXHJcblx0XHRcdFx0dGhpcy5tYXRlcmlhbCA9IHRoaXMudXNlckRhdGEuZGVwdGhNYXQ7XHJcblx0XHRcdFx0dGhpcy5jb21tb25Vbmlmb3Jtcy5jYW1lcmFOZWFyLnZhbHVlID0gY2FtZXJhLm5lYXI7XHJcblx0XHRcdFx0dGhpcy5jb21tb25Vbmlmb3Jtcy5jYW1lcmFGYXIudmFsdWUgPSBjYW1lcmEuZmFyO1xyXG5cclxuXHRcdFx0XHRpZiAoICEgdGhpcy5tYXRlcmlhbCApIHtcclxuXHJcblx0XHRcdFx0XHR0aGlzLnZpc2libGUgPSBmYWxzZTtcclxuXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdH0gKTtcclxuXHJcblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdFx0RGlzcG9zZVxyXG5cdFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5cdFx0Y29uc3Qgb25EaXNwb3NlID0gKCkgPT4ge1xyXG5cclxuXHRcdFx0dGhpcy5lbnZNYXBSZW5kZXJUYXJnZXQuZGlzcG9zZSgpO1xyXG5cdFx0XHR0aGlzLmdlb21ldHJ5LmRpc3Bvc2UoKTtcclxuXHRcdFx0dGhpcy5tYXRlcmlhbC5kaXNwb3NlKCk7XHJcblxyXG5cdFx0XHR0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoICdkaXNwb3NlJywgb25EaXNwb3NlICk7XHJcblxyXG5cdFx0fTtcclxuXHJcblx0XHR0aGlzLmFkZEV2ZW50TGlzdGVuZXIoICdkaXNwb3NlJywgb25EaXNwb3NlICk7XHJcblxyXG5cdH1cclxuXHJcblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHRFbnZNYXAgLyBJQkxcclxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcblx0cHVibGljIHVwZGF0ZUVudk1hcCggZW52TWFwOiBUSFJFRS5DdWJlVGV4dHVyZSB8IFRIUkVFLlRleHR1cmUgfCBudWxsID0gbnVsbCApIHtcclxuXHJcblx0XHR0aGlzLmVudk1hcFNyYyA9IGVudk1hcDtcclxuXHRcdHRoaXMuZW52TWFwVXBkYXRlID0gdHJ1ZTtcclxuXHJcblx0XHRpZiAoIHRoaXMuY29tbW9uVW5pZm9ybXMuZW52TWFwSW50ZW5zaXR5LnZhbHVlID09IG51bGwgKSB7XHJcblxyXG5cdFx0XHR0aGlzLmNvbW1vblVuaWZvcm1zLmVudk1hcEludGVuc2l0eS52YWx1ZSA9IDE7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggdGhpcy5jb21tb25Vbmlmb3Jtcy5pYmxJbnRlbnNpdHkudmFsdWUgPT0gbnVsbCApIHtcclxuXHJcblx0XHRcdHRoaXMuY29tbW9uVW5pZm9ybXMuaWJsSW50ZW5zaXR5LnZhbHVlID0gMTtcclxuXHJcblx0XHR9XHJcblxyXG5cdH1cclxuXHJcblx0cHVibGljIHNldCBlbnZNYXBJbnRlbnNpdHkoIHZhbHVlOiBudW1iZXIgKSB7XHJcblxyXG5cdFx0dGhpcy5jb21tb25Vbmlmb3Jtcy5lbnZNYXBJbnRlbnNpdHkudmFsdWUgPSB2YWx1ZTtcclxuXHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0IGlibEludGVuc2l0eSggdmFsdWU6IG51bWJlciApIHtcclxuXHJcblx0XHR0aGlzLmNvbW1vblVuaWZvcm1zLmlibEludGVuc2l0eS52YWx1ZSA9IHZhbHVlO1xyXG5cclxuXHR9XHJcblxyXG5cdHB1YmxpYyBkaXNwb3NlKCkge1xyXG5cclxuXHRcdHRoaXMuZGlzcGF0Y2hFdmVudCggeyB0eXBlOiAnZGlzcHNvZScgfSApO1xyXG5cclxuXHR9XHJcblxyXG5cdHB1YmxpYyBnZXQgaXNQb3dlck1lc2goKSB7XHJcblxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblxyXG5cdH1cclxuXHJcbn1cclxuIiwiaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xyXG5pbXBvcnQgKiBhcyBPUkUgZnJvbSAnb3JlLXRocmVlLXRzJztcclxuXHJcbmltcG9ydCB7IFBvd2VyTWVzaCB9IGZyb20gJy4uL1Bvd2VyTWVzaCc7XHJcblxyXG5pbXBvcnQgbWlwbWFwVmVydCBmcm9tICcuL3NoYWRlcnMvbWlwbWFwLnZzJztcclxuaW1wb3J0IG1pcG1hcEZyYWcgZnJvbSAnLi9zaGFkZXJzL21pcG1hcC5mcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgUG93ZXJSZWZsZWN0aW9uTWVzaCBleHRlbmRzIFBvd2VyTWVzaCB7XHJcblxyXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0UmVuZGVyVGFyZ2V0XHJcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5cdHByaXZhdGUgcmVuZGVyVGFyZ2V0czoge1xyXG5cdFx0cmVmOiBUSFJFRS5XZWJHTFJlbmRlclRhcmdldCxcclxuXHRcdG1pcG1hcDogVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXRcclxuXHR9O1xyXG5cclxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdE1pcG1hcFxyXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuXHRwcml2YXRlIG1pcG1hcEdlbzogVEhSRUUuQnVmZmVyR2VvbWV0cnk7XHJcblx0cHJpdmF0ZSBtaXBtYXBQUDogT1JFLlBvc3RQcm9jZXNzaW5nIHwgbnVsbDtcclxuXHJcblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHRSZWZsZWN0aW9uIENhbWVyYVxyXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuXHRwcml2YXRlIGxvb2tBdFBvc2l0aW9uOiBUSFJFRS5WZWN0b3IzO1xyXG5cdHByaXZhdGUgcm90YXRpb25NYXRyaXg6IFRIUkVFLk1hdHJpeDQ7XHJcblx0cHJpdmF0ZSB0YXJnZXQ6IFRIUkVFLlZlY3RvcjM7XHJcblx0cHJpdmF0ZSB2aWV3OiBUSFJFRS5WZWN0b3IzO1xyXG5cclxuXHRwcml2YXRlIHZpcnR1YWxDYW1lcmE6IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhO1xyXG5cdHByaXZhdGUgcmVmbGVjdG9yUGxhbmU6IFRIUkVFLlBsYW5lO1xyXG5cdHByaXZhdGUgbm9ybWFsOiBUSFJFRS5WZWN0b3IzO1xyXG5cclxuXHRwcml2YXRlIHJlZmxlY3RvcldvcmxkUG9zaXRpb246IFRIUkVFLlZlY3RvcjM7XHJcblx0cHJpdmF0ZSBjYW1lcmFXb3JsZFBvc2l0aW9uOiBUSFJFRS5WZWN0b3IzO1xyXG5cclxuXHRwcml2YXRlIGNsaXBQbGFuZTogVEhSRUUuVmVjdG9yNDtcclxuXHRwcml2YXRlIGNsaXBCaWFzOiBudW1iZXI7XHJcblx0cHJpdmF0ZSBxOiBUSFJFRS5WZWN0b3I0O1xyXG5cclxuXHRwcml2YXRlIHRleHR1cmVNYXRyaXg6IFRIUkVFLk1hdHJpeDQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKCBnZW9tZXRyeTogVEhSRUUuQnVmZmVyR2VvbWV0cnksIG1hdGVyaWFsT3B0aW9uPzogVEhSRUUuU2hhZGVyTWF0ZXJpYWxQYXJhbWV0ZXJzLCBvdmVycmlkZT86IGJvb2xlYW4gKTtcclxuXHJcblx0Y29uc3RydWN0b3IoIG1lc2g6IFRIUkVFLk1lc2gsIG1hdGVyaWFsT3B0aW9uPzogVEhSRUUuU2hhZGVyTWF0ZXJpYWxQYXJhbWV0ZXJzLCBvdmVycmlkZT86IGJvb2xlYW4gKTtcclxuXHJcblx0Y29uc3RydWN0b3IoIGdlb01lc2g6IFRIUkVFLkJ1ZmZlckdlb21ldHJ5IHwgVEhSRUUuTWVzaDxUSFJFRS5CdWZmZXJHZW9tZXRyeT4sIG1hdGVyaWFsT3B0aW9uPzogVEhSRUUuU2hhZGVyTWF0ZXJpYWxQYXJhbWV0ZXJzLCBvdmVycmlkZT86IGJvb2xlYW4gKSB7XHJcblxyXG5cdFx0bWF0ZXJpYWxPcHRpb24gPSBtYXRlcmlhbE9wdGlvbiB8fCB7fTtcclxuXHJcblx0XHRtYXRlcmlhbE9wdGlvbi51bmlmb3JtcyA9IE9SRS5Vbmlmb3Jtc0xpYi5tZXJnZVVuaWZvcm1zKCBtYXRlcmlhbE9wdGlvbi51bmlmb3JtcyB8fCB7fSwge1xyXG5cdFx0XHRyZWZsZWN0aW9uVGV4OiB7XHJcblx0XHRcdFx0dmFsdWU6IG51bGxcclxuXHRcdFx0fSxcclxuXHRcdFx0cmVuZGVyUmVzb2x1dGlvbjoge1xyXG5cdFx0XHRcdHZhbHVlOiBuZXcgVEhSRUUuVmVjdG9yMiggMSwgMSApXHJcblx0XHRcdH0sXHJcblx0XHRcdHRleHR1cmVNYXRyaXg6IHtcclxuXHRcdFx0XHR2YWx1ZTogbmV3IFRIUkVFLk1hdHJpeDQoKVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRtaXBNYXBSZXNvbHV0aW9uOiB7XHJcblx0XHRcdFx0dmFsdWU6IG5ldyBUSFJFRS5WZWN0b3IyKCAxLCAxIClcclxuXHRcdFx0fVxyXG5cdFx0fSApO1xyXG5cclxuXHRcdG1hdGVyaWFsT3B0aW9uLmRlZmluZXMgPSB7XHJcblx0XHRcdElTX1JFRkxFQ1RJT05QTEFORTogJycsXHJcblx0XHR9O1xyXG5cclxuXHRcdHN1cGVyKCBnZW9NZXNoIGFzIFRIUkVFLkJ1ZmZlckdlb21ldHJ5LCBtYXRlcmlhbE9wdGlvbiwgb3ZlcnJpZGUgKTtcclxuXHJcblx0XHR0aGlzLnJlZmxlY3RvclBsYW5lID0gbmV3IFRIUkVFLlBsYW5lKCk7XHJcblx0XHR0aGlzLm5vcm1hbCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcblx0XHR0aGlzLnJlZmxlY3RvcldvcmxkUG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG5cdFx0dGhpcy5jYW1lcmFXb3JsZFBvc2l0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuXHRcdHRoaXMucm90YXRpb25NYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xyXG5cdFx0dGhpcy5sb29rQXRQb3NpdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCAwLCAwLCAtIDEgKTtcclxuXHRcdHRoaXMuY2xpcFBsYW5lID0gbmV3IFRIUkVFLlZlY3RvcjQoKTtcclxuXHRcdHRoaXMudGV4dHVyZU1hdHJpeCA9IHRoaXMuY29tbW9uVW5pZm9ybXMudGV4dHVyZU1hdHJpeC52YWx1ZTtcclxuXHRcdHRoaXMuY2xpcEJpYXMgPSAwLjE7XHJcblxyXG5cdFx0dGhpcy52aWV3ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuXHRcdHRoaXMudGFyZ2V0ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuXHRcdHRoaXMucSA9IG5ldyBUSFJFRS5WZWN0b3I0KCk7XHJcblxyXG5cdFx0dGhpcy52aXJ0dWFsQ2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKCk7XHJcblxyXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHRcdE1pcE1hcFxyXG5cdFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5cdFx0dGhpcy5taXBtYXBQUCA9IG51bGw7XHJcblx0XHR0aGlzLm1pcG1hcEdlbyA9IG5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSgpO1xyXG5cclxuXHRcdGxldCBwb3NBcnJheSA9IFtdO1xyXG5cdFx0bGV0IHV2QXJyYXkgPSBbXTtcclxuXHRcdGxldCBpbmRleEFycmF5ID0gW107XHJcblxyXG5cdFx0bGV0IHAgPSBuZXcgVEhSRUUuVmVjdG9yMiggMCwgMCApO1xyXG5cdFx0bGV0IHMgPSAyLjA7XHJcblxyXG5cdFx0cG9zQXJyYXkucHVzaCggcC54LCBwLnksIDAgKTtcclxuXHRcdHBvc0FycmF5LnB1c2goIHAueCArIHMsIHAueSwgMCApO1xyXG5cdFx0cG9zQXJyYXkucHVzaCggcC54ICsgcywgcC55IC0gcywgMCApO1xyXG5cdFx0cG9zQXJyYXkucHVzaCggcC54LCBwLnkgLSBzLCAwICk7XHJcblxyXG5cdFx0dXZBcnJheS5wdXNoKCAxLjAsIDEuMCApO1xyXG5cdFx0dXZBcnJheS5wdXNoKCAwLjAsIDEuMCApO1xyXG5cdFx0dXZBcnJheS5wdXNoKCAwLjAsIDAuMCApO1xyXG5cdFx0dXZBcnJheS5wdXNoKCAxLjAsIDAuMCApO1xyXG5cclxuXHRcdGluZGV4QXJyYXkucHVzaCggMCwgMiwgMSwgMCwgMywgMiApO1xyXG5cclxuXHRcdHAuc2V0KCBzLCAwICk7XHJcblxyXG5cdFx0Zm9yICggbGV0IGkgPSAwOyBpIDwgNzsgaSArKyApIHtcclxuXHJcblx0XHRcdHMgKj0gMC41O1xyXG5cclxuXHRcdFx0cG9zQXJyYXkucHVzaCggcC54LFx0XHRwLnksXHRcdDAgKTtcclxuXHRcdFx0cG9zQXJyYXkucHVzaCggcC54ICsgcywgcC55LFx0XHQwICk7XHJcblx0XHRcdHBvc0FycmF5LnB1c2goIHAueCArIHMsIHAueSAtIHMsXHQwICk7XHJcblx0XHRcdHBvc0FycmF5LnB1c2goIHAueCxcdFx0cC55IC0gcywgXHQwICk7XHJcblxyXG5cdFx0XHR1dkFycmF5LnB1c2goIDEuMCwgMS4wICk7XHJcblx0XHRcdHV2QXJyYXkucHVzaCggMC4wLCAxLjAgKTtcclxuXHRcdFx0dXZBcnJheS5wdXNoKCAwLjAsIDAuMCApO1xyXG5cdFx0XHR1dkFycmF5LnB1c2goIDEuMCwgMC4wICk7XHJcblxyXG5cdFx0XHRsZXQgaW5kZXhPZmZzZXQgPSAoIGkgKyAwLjAgKSAqIDQ7XHJcblx0XHRcdGluZGV4QXJyYXkucHVzaCggaW5kZXhPZmZzZXQgKyAwLCBpbmRleE9mZnNldCArIDIsIGluZGV4T2Zmc2V0ICsgMSwgaW5kZXhPZmZzZXQgKyAwLCBpbmRleE9mZnNldCArIDMsIGluZGV4T2Zmc2V0ICsgMiApO1xyXG5cclxuXHRcdFx0cC55ID0gcC55IC0gcztcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IHBvc0F0dHIgPSBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKCBuZXcgRmxvYXQzMkFycmF5KCBwb3NBcnJheSApLCAzICk7XHJcblx0XHRsZXQgdXZBdHRyID0gbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSggbmV3IEZsb2F0MzJBcnJheSggdXZBcnJheSApLCAyICk7XHJcblx0XHRsZXQgaW5kZXhBdHRyID0gbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSggbmV3IFVpbnQxNkFycmF5KCBpbmRleEFycmF5ICksIDEgKTtcclxuXHJcblx0XHRsZXQgZ3MgPSAxO1xyXG5cdFx0cG9zQXR0ci5hcHBseU1hdHJpeDQoIG5ldyBUSFJFRS5NYXRyaXg0KCkubWFrZVNjYWxlKCAoIDEuMCAvIDEuNSApLCBncywgZ3MgKSApO1xyXG5cdFx0cG9zQXR0ci5hcHBseU1hdHJpeDQoIG5ldyBUSFJFRS5NYXRyaXg0KCkubWFrZVRyYW5zbGF0aW9uKCAtIDEuMCwgMS4wLCAwICkgKTtcclxuXHJcblx0XHR0aGlzLm1pcG1hcEdlby5zZXRBdHRyaWJ1dGUoICdwb3NpdGlvbicsIHBvc0F0dHIgKTtcclxuXHRcdHRoaXMubWlwbWFwR2VvLnNldEF0dHJpYnV0ZSggJ3V2JywgdXZBdHRyICk7XHJcblx0XHR0aGlzLm1pcG1hcEdlby5zZXRJbmRleCggaW5kZXhBdHRyICk7XHJcblxyXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHRcdFJlbmRlclRhcmdldHNcclxuXHRcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuXHRcdHRoaXMucmVuZGVyVGFyZ2V0cyA9IHtcclxuXHRcdFx0cmVmOiBuZXcgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQoIDEsIDEgKSxcclxuXHRcdFx0bWlwbWFwOiBuZXcgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQoIDEsIDEgKSxcclxuXHRcdH07XHJcblxyXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHRcdFJlZmxlY3Rpb25cclxuXHRcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuXHRcdHRoaXMuYWRkRXZlbnRMaXN0ZW5lciggJ2JlZm9yZVJlbmRlcicsICggZTogVEhSRUUuRXZlbnQgKSA9PiB7XHJcblxyXG5cdFx0XHRsZXQgcmVuZGVyZXIgPSBlLnJlbmRlcmVyIGFzIFRIUkVFLldlYkdMUmVuZGVyZXI7XHJcblx0XHRcdGxldCBzY2VuZSA9IGUuc2NlbmUgYXMgVEhSRUUuU2NlbmU7XHJcblx0XHRcdGxldCBjYW1lcmEgPSBlLmNhbWVyYSBhcyBUSFJFRS5DYW1lcmE7XHJcblxyXG5cdFx0XHR0aGlzLnJlZmxlY3RvcldvcmxkUG9zaXRpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKCB0aGlzLm1hdHJpeFdvcmxkICk7XHJcblx0XHRcdHRoaXMuY2FtZXJhV29ybGRQb3NpdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24oIGNhbWVyYS5tYXRyaXhXb3JsZCApO1xyXG5cclxuXHRcdFx0dGhpcy5yb3RhdGlvbk1hdHJpeC5leHRyYWN0Um90YXRpb24oIHRoaXMubWF0cml4V29ybGQgKTtcclxuXHJcblx0XHRcdHRoaXMubm9ybWFsLnNldCggMCwgMS4wLCAwICk7XHJcblx0XHRcdHRoaXMubm9ybWFsLmFwcGx5TWF0cml4NCggdGhpcy5yb3RhdGlvbk1hdHJpeCApO1xyXG5cclxuXHRcdFx0dGhpcy52aWV3LnN1YlZlY3RvcnMoIHRoaXMucmVmbGVjdG9yV29ybGRQb3NpdGlvbiwgdGhpcy5jYW1lcmFXb3JsZFBvc2l0aW9uICk7XHJcblxyXG5cdFx0XHQvLyBBdm9pZCByZW5kZXJpbmcgd2hlbiByZWZsZWN0b3IgaXMgZmFjaW5nIGF3YXlcclxuXHJcblx0XHRcdGlmICggdGhpcy52aWV3LmRvdCggdGhpcy5ub3JtYWwgKSA+IDAgKSByZXR1cm47XHJcblxyXG5cdFx0XHR0aGlzLnZpZXcucmVmbGVjdCggdGhpcy5ub3JtYWwgKS5uZWdhdGUoKTtcclxuXHRcdFx0dGhpcy52aWV3LmFkZCggdGhpcy5yZWZsZWN0b3JXb3JsZFBvc2l0aW9uICk7XHJcblxyXG5cdFx0XHR0aGlzLnJvdGF0aW9uTWF0cml4LmV4dHJhY3RSb3RhdGlvbiggY2FtZXJhLm1hdHJpeFdvcmxkICk7XHJcblxyXG5cdFx0XHR0aGlzLmxvb2tBdFBvc2l0aW9uLnNldCggMCwgMCwgLSAxICk7XHJcblx0XHRcdHRoaXMubG9va0F0UG9zaXRpb24uYXBwbHlNYXRyaXg0KCB0aGlzLnJvdGF0aW9uTWF0cml4ICk7XHJcblx0XHRcdHRoaXMubG9va0F0UG9zaXRpb24uYWRkKCB0aGlzLmNhbWVyYVdvcmxkUG9zaXRpb24gKTtcclxuXHJcblx0XHRcdHRoaXMudGFyZ2V0LnN1YlZlY3RvcnMoIHRoaXMucmVmbGVjdG9yV29ybGRQb3NpdGlvbiwgdGhpcy5sb29rQXRQb3NpdGlvbiApO1xyXG5cdFx0XHR0aGlzLnRhcmdldC5yZWZsZWN0KCB0aGlzLm5vcm1hbCApLm5lZ2F0ZSgpO1xyXG5cdFx0XHR0aGlzLnRhcmdldC5hZGQoIHRoaXMucmVmbGVjdG9yV29ybGRQb3NpdGlvbiApO1xyXG5cclxuXHRcdFx0dGhpcy52aXJ0dWFsQ2FtZXJhLnBvc2l0aW9uLmNvcHkoIHRoaXMudmlldyApO1xyXG5cdFx0XHR0aGlzLnZpcnR1YWxDYW1lcmEudXAuc2V0KCAwLCAxLCAwICk7XHJcblx0XHRcdHRoaXMudmlydHVhbENhbWVyYS51cC5hcHBseU1hdHJpeDQoIHRoaXMucm90YXRpb25NYXRyaXggKTtcclxuXHRcdFx0dGhpcy52aXJ0dWFsQ2FtZXJhLnVwLnJlZmxlY3QoIHRoaXMubm9ybWFsICk7XHJcblx0XHRcdHRoaXMudmlydHVhbENhbWVyYS5sb29rQXQoIHRoaXMudGFyZ2V0ICk7XHJcblxyXG5cdFx0XHRpZiAoICggY2FtZXJhIGFzIFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhICkuZmFyICkge1xyXG5cclxuXHRcdFx0XHR0aGlzLnZpcnR1YWxDYW1lcmEuZmFyID0gKCBjYW1lcmEgYXMgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEgKS5mYXI7IC8vIFVzZWQgaW4gV2ViR0xCYWNrZ3JvdW5kXHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLnZpcnR1YWxDYW1lcmEudXBkYXRlTWF0cml4V29ybGQoKTtcclxuXHRcdFx0dGhpcy52aXJ0dWFsQ2FtZXJhLnByb2plY3Rpb25NYXRyaXguY29weSggY2FtZXJhLnByb2plY3Rpb25NYXRyaXggKTtcclxuXHJcblx0XHRcdC8vIFVwZGF0ZSB0aGUgdGV4dHVyZSBtYXRyaXhcclxuXHRcdFx0dGhpcy50ZXh0dXJlTWF0cml4LnNldChcclxuXHRcdFx0XHQwLjUsIDAuMCwgMC4wLCAwLjUsXHJcblx0XHRcdFx0MC4wLCAwLjUsIDAuMCwgMC41LFxyXG5cdFx0XHRcdDAuMCwgMC4wLCAwLjUsIDAuNSxcclxuXHRcdFx0XHQwLjAsIDAuMCwgMC4wLCAxLjBcclxuXHRcdFx0KTtcclxuXHJcblx0XHRcdHRoaXMudGV4dHVyZU1hdHJpeC5tdWx0aXBseSggdGhpcy52aXJ0dWFsQ2FtZXJhLnByb2plY3Rpb25NYXRyaXggKTtcclxuXHRcdFx0dGhpcy50ZXh0dXJlTWF0cml4Lm11bHRpcGx5KCB0aGlzLnZpcnR1YWxDYW1lcmEubWF0cml4V29ybGRJbnZlcnNlICk7XHJcblx0XHRcdHRoaXMudGV4dHVyZU1hdHJpeC5tdWx0aXBseSggdGhpcy5tYXRyaXhXb3JsZCApO1xyXG5cclxuXHRcdFx0Ly8gTm93IHVwZGF0ZSBwcm9qZWN0aW9uIG1hdHJpeCB3aXRoIG5ldyBjbGlwIHBsYW5lLCBpbXBsZW1lbnRpbmcgY29kZSBmcm9tOiBodHRwOi8vd3d3LnRlcmF0aG9uLmNvbS9jb2RlL29ibGlxdWUuaHRtbFxyXG5cdFx0XHQvLyBQYXBlciBleHBsYWluaW5nIHRoaXMgdGVjaG5pcXVlOiBodHRwOi8vd3d3LnRlcmF0aG9uLmNvbS9sZW5neWVsL0xlbmd5ZWwtT2JsaXF1ZS5wZGZcclxuXHRcdFx0dGhpcy5yZWZsZWN0b3JQbGFuZS5zZXRGcm9tTm9ybWFsQW5kQ29wbGFuYXJQb2ludCggdGhpcy5ub3JtYWwsIHRoaXMucmVmbGVjdG9yV29ybGRQb3NpdGlvbiApO1xyXG5cdFx0XHR0aGlzLnJlZmxlY3RvclBsYW5lLmFwcGx5TWF0cml4NCggdGhpcy52aXJ0dWFsQ2FtZXJhLm1hdHJpeFdvcmxkSW52ZXJzZSApO1xyXG5cclxuXHRcdFx0dGhpcy5jbGlwUGxhbmUuc2V0KCB0aGlzLnJlZmxlY3RvclBsYW5lLm5vcm1hbC54LCB0aGlzLnJlZmxlY3RvclBsYW5lLm5vcm1hbC55LCB0aGlzLnJlZmxlY3RvclBsYW5lLm5vcm1hbC56LCB0aGlzLnJlZmxlY3RvclBsYW5lLmNvbnN0YW50ICk7XHJcblxyXG5cdFx0XHR2YXIgcHJvamVjdGlvbk1hdHJpeCA9IHRoaXMudmlydHVhbENhbWVyYS5wcm9qZWN0aW9uTWF0cml4O1xyXG5cclxuXHRcdFx0dGhpcy5xLnggPSAoIE1hdGguc2lnbiggdGhpcy5jbGlwUGxhbmUueCApICsgcHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1sgOCBdICkgLyBwcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzWyAwIF07XHJcblx0XHRcdHRoaXMucS55ID0gKCBNYXRoLnNpZ24oIHRoaXMuY2xpcFBsYW5lLnkgKSArIHByb2plY3Rpb25NYXRyaXguZWxlbWVudHNbIDkgXSApIC8gcHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1sgNSBdO1xyXG5cdFx0XHR0aGlzLnEueiA9IC0gMS4wO1xyXG5cdFx0XHR0aGlzLnEudyA9ICggMS4wICsgcHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1sgMTAgXSApIC8gcHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1sgMTQgXTtcclxuXHJcblx0XHRcdC8vIENhbGN1bGF0ZSB0aGUgc2NhbGVkIHBsYW5lIHZlY3RvclxyXG5cdFx0XHR0aGlzLmNsaXBQbGFuZS5tdWx0aXBseVNjYWxhciggMi4wIC8gdGhpcy5jbGlwUGxhbmUuZG90KCB0aGlzLnEgKSApO1xyXG5cclxuXHRcdFx0Ly8gUmVwbGFjaW5nIHRoZSB0aGlyZCByb3cgb2YgdGhlIHByb2plY3Rpb24gbWF0cml4XHJcblx0XHRcdHByb2plY3Rpb25NYXRyaXguZWxlbWVudHNbIDIgXSA9IHRoaXMuY2xpcFBsYW5lLng7XHJcblx0XHRcdHByb2plY3Rpb25NYXRyaXguZWxlbWVudHNbIDYgXSA9IHRoaXMuY2xpcFBsYW5lLnk7XHJcblx0XHRcdHByb2plY3Rpb25NYXRyaXguZWxlbWVudHNbIDEwIF0gPSB0aGlzLmNsaXBQbGFuZS56ICsgMS4wIC0gdGhpcy5jbGlwQmlhcztcclxuXHRcdFx0cHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1sgMTQgXSA9IHRoaXMuY2xpcFBsYW5lLnc7XHJcblxyXG5cdFx0XHQvL3JlbmRlclxyXG5cdFx0XHRsZXQgY3VycmVudFJlbmRlclRhcmdldCA9IHJlbmRlcmVyLmdldFJlbmRlclRhcmdldCgpO1xyXG5cclxuXHRcdFx0cmVuZGVyZXIuc2V0UmVuZGVyVGFyZ2V0KCB0aGlzLnJlbmRlclRhcmdldHMucmVmICk7XHJcblx0XHRcdHRoaXMudmlzaWJsZSA9IGZhbHNlO1xyXG5cclxuXHRcdFx0cmVuZGVyZXIuY2xlYXIoKTtcclxuXHRcdFx0cmVuZGVyZXIucmVuZGVyKCBzY2VuZSwgdGhpcy52aXJ0dWFsQ2FtZXJhICk7XHJcblx0XHRcdHJlbmRlcmVyLmNsZWFyRGVwdGgoKTtcclxuXHJcblx0XHRcdHJlbmRlcmVyLnNldFJlbmRlclRhcmdldCggY3VycmVudFJlbmRlclRhcmdldCApO1xyXG5cdFx0XHR0aGlzLnZpc2libGUgPSB0cnVlO1xyXG5cclxuXHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHRcdFx0TWlwTWFwUFBcclxuXHRcdFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5cdFx0XHRpZiAoIHRoaXMubWlwbWFwUFAgPT0gbnVsbCApIHtcclxuXHJcblx0XHRcdFx0dGhpcy5taXBtYXBQUCA9IG5ldyBPUkUuUG9zdFByb2Nlc3NpbmcoIHJlbmRlcmVyLCB7XHJcblx0XHRcdFx0XHRmcmFnbWVudFNoYWRlcjogbWlwbWFwRnJhZyxcclxuXHRcdFx0XHRcdHNpZGU6IFRIUkVFLkRvdWJsZVNpZGVcclxuXHRcdFx0XHR9LCB0aGlzLm1pcG1hcEdlbyApO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5taXBtYXBQUC5yZW5kZXIoIHsgdGV4OiB0aGlzLnJlbmRlclRhcmdldHMucmVmLnRleHR1cmUgfSwgdGhpcy5yZW5kZXJUYXJnZXRzLm1pcG1hcCApO1xyXG5cdFx0XHR0aGlzLmNvbW1vblVuaWZvcm1zLnJlZmxlY3Rpb25UZXgudmFsdWUgPSB0aGlzLnJlbmRlclRhcmdldHMubWlwbWFwLnRleHR1cmU7XHJcblxyXG5cdFx0XHRsZXQgcnQgPSByZW5kZXJlci5nZXRSZW5kZXJUYXJnZXQoKSBhcyBUSFJFRS5XZWJHTFJlbmRlclRhcmdldDtcclxuXHJcblx0XHRcdGlmICggcnQgKSB7XHJcblxyXG5cdFx0XHRcdHRoaXMuY29tbW9uVW5pZm9ybXMucmVuZGVyUmVzb2x1dGlvbi52YWx1ZS5zZXQoIHJ0LndpZHRoLCBydC5oZWlnaHQgKTtcclxuXHJcblx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdHJlbmRlcmVyLmdldFNpemUoIHRoaXMuY29tbW9uVW5pZm9ybXMucmVuZGVyUmVzb2x1dGlvbi52YWx1ZSApO1xyXG5cdFx0XHRcdHRoaXMuY29tbW9uVW5pZm9ybXMucmVuZGVyUmVzb2x1dGlvbi52YWx1ZS5tdWx0aXBseVNjYWxhciggcmVuZGVyZXIuZ2V0UGl4ZWxSYXRpbygpICk7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0fSApO1xyXG5cclxuXHRcdHRoaXMucmVzaXplKCk7XHJcblxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZXNpemUoKSB7XHJcblxyXG5cdFx0bGV0IHNpemUgPSA1MTI7XHJcblx0XHR0aGlzLnJlbmRlclRhcmdldHMucmVmLnNldFNpemUoIHNpemUsIHNpemUgKTtcclxuXHJcblx0XHRsZXQgbWlwTWFwU2l6ZSA9IG5ldyBUSFJFRS5WZWN0b3IyKCBzaXplICogMS41LCBzaXplICk7XHJcblx0XHR0aGlzLnJlbmRlclRhcmdldHMubWlwbWFwLnNldFNpemUoIG1pcE1hcFNpemUueCwgbWlwTWFwU2l6ZS55ICk7XHJcblx0XHR0aGlzLmNvbW1vblVuaWZvcm1zLm1pcE1hcFJlc29sdXRpb24udmFsdWUuY29weSggbWlwTWFwU2l6ZSApO1xyXG5cclxuXHR9XHJcblxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IFwiI2RlZmluZSBHTFNMSUZZIDFcXG51bmlmb3JtIHNhbXBsZXIyRCB0ZXg7XFxudmFyeWluZyB2ZWMyIHZVdjtcXG5cXG5mbG9hdCBjbGlwKCB2ZWMyIHV2ICkge1xcblxcdHZlYzIgYyA9IHN0ZXAoIGFicyh1diAtIDAuNSksIHZlYzIoIDAuNSApICk7XFxuXFx0cmV0dXJuIGMueCAqIGMueTtcXG59XFxuXFxudm9pZCBtYWluKCB2b2lkICkge1xcblxcblxcdHZlYzQgY29sID0gdGV4dHVyZTJEKCB0ZXgsIHZVdiApO1xcblxcdGdsX0ZyYWdDb2xvciA9IGNvbDtcXG5cXG59XCI7Il0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsInJlcXVpcmUiLCJkZWZpbmUiLCJhbWQiLCJzZWxmIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMzgxX18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX185MDZfXyIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJQb3dlck1lc2giLCJjb25zdHJ1Y3RvciIsImdlb01lc2giLCJtYXRlcmlhbE9wdGlvbiIsIm92ZXJyaWRlIiwiZ2VvIiwidW5pIiwidW5pZm9ybXMiLCJlbnZNYXAiLCJlbnZNYXBJbnRlbnNpdHkiLCJpYmxJbnRlbnNpdHkiLCJtYXhMb2RMZXZlbCIsInNoYWRvd0xpZ2h0TW9kZWxWaWV3TWF0cml4Iiwic2hhZG93TGlnaHRQcm9qZWN0aW9uTWF0cml4Iiwic2hhZG93TGlnaHREaXJlY3Rpb24iLCJzaGFkb3dMaWdodENhbWVyYUNsaXAiLCJzaGFkb3dNYXAiLCJzaGFkb3dNYXBTaXplIiwic2hhZG93TWFwUmVzb2x1dGlvbiIsInNoYWRvd0xpZ2h0U2l6ZSIsImNhbWVyYU5lYXIiLCJjYW1lcmFGYXIiLCJjb2xvciIsIm1ldGFsbmVzcyIsInJvdWdobmVzcyIsIm9wYWNpdHkiLCJlbWlzc2lvbiIsImdlb21ldHJ5IiwibWF0IiwibWF0ZXJpYWwiLCJpc01lc2hTdGFuZGFyZE1hdGVyaWFsIiwibWFwIiwiY29weSIsInJvdWdobmVzc01hcCIsImFscGhhTWFwIiwibWV0YWxuZXNzTWFwIiwiY29uc29sZSIsImxvZyIsIm5vcm1hbE1hcCIsImVtaXNzaXZlTWFwIiwiZW1pc3Npb25NYXAiLCJlbWlzc2l2ZSIsImdldEF0dHJpYnV0ZSIsImdldEluZGV4IiwiY29tcHV0ZVRhbmdlbnRzIiwidmVydGV4U2hhZGVyIiwicG93ZXIiLCJmcmFnbWVudFNoYWRlciIsImxpZ2h0cyIsInRyYW5zcGFyZW50Iiwic2lkZSIsImV4dGVuc2lvbnMiLCJkZXJpdmF0aXZlcyIsImRlZmluZXMiLCJVU0VfTUFQIiwiVVNFX1JPVUdITkVTU19NQVAiLCJVU0VfTUVUQUxORVNTX01BUCIsIlVTRV9BTFBIQV9NQVAiLCJVU0VfTk9STUFMX01BUCIsIlVTRV9FTUlTU0lPTl9NQVAiLCJzdXBlciIsInRoaXMiLCJuYW1lIiwidXNlckRhdGEiLCJjb2xvck1hdCIsImN1c3RvbURlcHRoTWF0ZXJpYWwiLCJjb21tb25Vbmlmb3JtcyIsImRpc3Bvc2UiLCJjaGlsZHJlbiIsInNsaWNlIiwiZm9yRWFjaCIsImNoaWxkIiwiYWRkIiwicG9zaXRpb24iLCJyb3RhdGlvbiIsInNjYWxlIiwicGFyZW50IiwicmVtb3ZlIiwiZW52TWFwU3JjIiwiZW52TWFwVXBkYXRlIiwiZW52TWFwUmVzb2x1dGlvbiIsImVudk1hcFJlbmRlclRhcmdldCIsImZvcm1hdCIsImdlbmVyYXRlTWlwbWFwcyIsIm1hZ0ZpbHRlciIsIm1pbkZpbHRlciIsImVudk1hcENhbWVyYSIsImdldFdvcmxkUG9zaXRpb24iLCJvbkJlZm9yZVJlbmRlciIsInJlbmRlcmVyIiwic2NlbmUiLCJjYW1lcmEiLCJkaXNwYXRjaEV2ZW50IiwidHlwZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiZW52TWFwUlQiLCJwbXJlbUdlbmVyYXRvciIsImNvbXBpbGVFcXVpcmVjdGFuZ3VsYXJTaGFkZXIiLCJmcm9tQ3ViZW1hcCIsImZyb21FcXVpcmVjdGFuZ3VsYXIiLCJ2aXNpYmxlIiwidXBkYXRlIiwidGV4dHVyZSIsImhlaWdodCIsIm1heE1pcCIsIk1hdGgiLCJyb3VuZCIsImxvZzIiLCJ0ZXhlbEhlaWdodCIsInRleGVsV2lkdGgiLCJtYXgiLCJwb3ciLCJkZXB0aENhbWVyYSIsImRlcHRoTWF0IiwibmVhciIsImZhciIsIm9uRGlzcG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ1cGRhdGVFbnZNYXAiLCJpc1Bvd2VyTWVzaCIsIlBvd2VyUmVmbGVjdGlvbk1lc2giLCJyZWZsZWN0aW9uVGV4IiwicmVuZGVyUmVzb2x1dGlvbiIsInRleHR1cmVNYXRyaXgiLCJtaXBNYXBSZXNvbHV0aW9uIiwiSVNfUkVGTEVDVElPTlBMQU5FIiwicmVmbGVjdG9yUGxhbmUiLCJub3JtYWwiLCJyZWZsZWN0b3JXb3JsZFBvc2l0aW9uIiwiY2FtZXJhV29ybGRQb3NpdGlvbiIsInJvdGF0aW9uTWF0cml4IiwibG9va0F0UG9zaXRpb24iLCJjbGlwUGxhbmUiLCJjbGlwQmlhcyIsInZpZXciLCJ0YXJnZXQiLCJxIiwidmlydHVhbENhbWVyYSIsIm1pcG1hcFBQIiwibWlwbWFwR2VvIiwicG9zQXJyYXkiLCJ1dkFycmF5IiwiaW5kZXhBcnJheSIsInAiLCJzIiwicHVzaCIsIngiLCJ5Iiwic2V0IiwiaSIsImluZGV4T2Zmc2V0IiwicG9zQXR0ciIsIkZsb2F0MzJBcnJheSIsInV2QXR0ciIsImluZGV4QXR0ciIsIlVpbnQxNkFycmF5IiwiYXBwbHlNYXRyaXg0IiwibWFrZVNjYWxlIiwibWFrZVRyYW5zbGF0aW9uIiwic2V0QXR0cmlidXRlIiwic2V0SW5kZXgiLCJyZW5kZXJUYXJnZXRzIiwicmVmIiwibWlwbWFwIiwic2V0RnJvbU1hdHJpeFBvc2l0aW9uIiwibWF0cml4V29ybGQiLCJleHRyYWN0Um90YXRpb24iLCJzdWJWZWN0b3JzIiwiZG90IiwicmVmbGVjdCIsIm5lZ2F0ZSIsInVwIiwibG9va0F0IiwidXBkYXRlTWF0cml4V29ybGQiLCJwcm9qZWN0aW9uTWF0cml4IiwibXVsdGlwbHkiLCJtYXRyaXhXb3JsZEludmVyc2UiLCJzZXRGcm9tTm9ybWFsQW5kQ29wbGFuYXJQb2ludCIsInoiLCJjb25zdGFudCIsInNpZ24iLCJlbGVtZW50cyIsInciLCJtdWx0aXBseVNjYWxhciIsImN1cnJlbnRSZW5kZXJUYXJnZXQiLCJnZXRSZW5kZXJUYXJnZXQiLCJzZXRSZW5kZXJUYXJnZXQiLCJjbGVhciIsInJlbmRlciIsImNsZWFyRGVwdGgiLCJ0ZXgiLCJydCIsIndpZHRoIiwiZ2V0U2l6ZSIsImdldFBpeGVsUmF0aW8iLCJyZXNpemUiLCJzZXRTaXplIiwibWlwTWFwU2l6ZSIsInNpemUiXSwic291cmNlUm9vdCI6IiJ9