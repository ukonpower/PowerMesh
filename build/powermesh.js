!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("three"),require("ore-three-ts")):"function"==typeof define&&define.amd?define(["three","ore-three-ts"],n):"object"==typeof exports?exports.PowerMesh=n(require("three"),require("ore-three-ts")):t.PowerMesh=n(t.THREE,t.ORE)}(self,(function(t,n){return(()=>{"use strict";var e={644:t=>{t.exports=n},381:n=>{n.exports=t}},i={};function a(t){var n=i[t];if(void 0!==n)return n.exports;var o=i[t]={exports:{}};return e[t](o,o.exports,a),o.exports}a.d=(t,n)=>{for(var e in n)a.o(n,e)&&!a.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:n[e]})},a.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};return(()=>{a.r(o),a.d(o,{PowerMesh:()=>r,PowerReflectionMesh:()=>s});var t=a(381),n=a(644);const e="#define GLSLIFY 1\nattribute vec4 tangent;\n\nvarying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewNormal;\nvarying vec3 vTangent;\nvarying vec3 vBitangent;\nvarying vec3 vViewPos;\nvarying vec3 vWorldPos;\nvarying vec2 vHighPrecisionZW;\n\n/*-------------------------------\n\tShadowMap\n-------------------------------*/\n\n#include <shadowmap_pars_vertex>\n\nvoid main( void ) {\n\n\t/*-------------------------------\n\t\tPosition\n\t-------------------------------*/\n\n\tvec3 pos = position;\n\tvec4 worldPos = modelMatrix * vec4( pos, 1.0 );\n\tvec4 mvPosition = viewMatrix * worldPos;\n\t\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t/*-------------------------------\n\t\tNormal / Tangent\n\t-------------------------------*/\n\n\tvec3 transformedNormal = normalMatrix * normal;\n\tvec4 flipedTangent = tangent;\n\tflipedTangent.w *= -1.0;\n\n\t#ifdef FLIP_SIDED\n\t\ttransformedNormal *= -1.0;\n\t\tflipedTangent *= -1.0;\n\t#endif\n\t\n\tvec3 normal = normalize( transformedNormal );\n\tvec3 tangent = normalize( ( modelViewMatrix * vec4( flipedTangent.xyz, 0.0 ) ).xyz );\n\tvec3 biTangent = normalize( cross( normal, tangent ) * flipedTangent.w );\n\n\t/*-------------------------------\n\t\tShadow\n\t-------------------------------*/\n\t\n\tvec4 shadowWorldPos;\n\t\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\t\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\t\n\t\t\tshadowWorldPos = worldPos + vec4( vec4( transformedNormal, 0.0 ) * modelMatrix ) * directionalLightShadows[ i ].shadowNormalBias;\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPos;\n\t\t\t\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t\n\t#endif\n\n\t/*-------------------------------\n\t\tVarying\n\t-------------------------------*/\n\t\n\tvUv = uv;\n\tvNormal = normal;\n\tvTangent = tangent;\n\tvBitangent = biTangent;\n\tvViewPos = -mvPosition.xyz;\n\tvWorldPos = worldPos.xyz;\n\tvHighPrecisionZW = gl_Position.zw;\n\t\n}",i="#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec3 vTangent;\nvarying vec3 vBitangent;\n\n/*-------------------------------\n\tRequire\n-------------------------------*/\n\n#define PI 3.14159265359\n#define TPI 6.28318530718\n#define HPI 1.57079632679\n\n#include <packing>\n\nvec2 packing16( float value ) { \n\n\tfloat v1 = value * 255.0;\n\tfloat r = floor(v1);\n\n\tfloat v2 = ( v1 - r ) * 255.0;\n\tfloat g = floor( v2 );\n\n\treturn vec2( r, g ) / 255.0;\n\n}\n\n/*-------------------------------\n\tRequiers\n-------------------------------*/\n\nfloat random(vec2 p){\n\treturn fract(sin(dot(p.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\n/*-------------------------------\n\tMaterial Uniforms\n-------------------------------*/\n\nuniform float time;\n\n/*-------------------------------\n\tTextures\n-------------------------------*/\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#else\n\n\tuniform vec3 color;\n\n#endif\n\n#ifdef USE_NORMAL_MAP\n\n\tuniform sampler2D normalMap;\n\n#endif\n\n#ifdef USE_ROUGHNESS_MAP\n\n\tuniform sampler2D roughnessMap;\n\n#else\n\n\tuniform float roughness;\n\n#endif\n\n#ifdef USE_ALPHA_MAP\n\n\tuniform sampler2D alphaMap;\n\n#else\n\n\tuniform float opacity;\n\t\n#endif\n\n#ifdef USE_METALNESS_MAP\n\n\tuniform sampler2D metalnessMap;\n\n#else\n\n\tuniform float metalness;\n\n#endif\n#ifdef USE_EMISSION_MAP\n\n\tuniform sampler2D emissionMap;\n\n#else\n\n\tuniform vec3 emission;\n\n#endif\n\n#ifdef REFLECTPLANE\n\n\tuniform sampler2D reflectionTex;\n\tuniform vec2 renderResolution;\n\tuniform vec2 mipMapResolution;\n\t\n#endif\n\n/*-------------------------------\n\tTypes\n-------------------------------*/\n\nstruct Geometry {\n\tvec3 pos;\n\tvec3 posWorld;\n\tvec3 viewDir;\n\tvec3 viewDirWorld;\n\tvec3 normal;\n\tvec3 normalWorld;\n};\n\nstruct Light {\n\tvec3 direction;\n\tvec3 color;\n};\n\nstruct Material {\n\tvec3 albedo;\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat metalness;\n\tfloat roughness;\n\tfloat opacity;\n};\n\n/*-------------------------------\n\tLights\n-------------------------------*/\n\n#if NUM_DIR_LIGHTS > 0\n\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\n#endif\n\n#if NUM_POINT_LIGHTS > 0\n\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\n#endif\n\n/*-------------------------------\n\tEnvMap\n-------------------------------*/\n\nuniform sampler2D envMap;\nuniform float envMapIntensity;\nuniform float iblIntensity;\nuniform float maxLodLevel;\n\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\n\n/*-------------------------------\n\tReflection\n-------------------------------*/\n\n#define REF_MIPMAP_LEVEL 8.0\n\n#ifdef REFLECTPLANE\n\n\tuniform vec3 a;\n\n\tvec2 getRefMipmapUV( vec2 uv, float level ) {\n\n\t\tvec2 ruv = uv;\n\n\t\tif( level > 0.0 ) {\n\n\t\t\truv.x *= 1.0 / ( 3.0 * ( pow( 2.0, level ) / 2.0 ) );\n\t\t\truv.y *= 1.0 / ( pow( 2.0, level ) );\n\t\t\truv.y += 1.0 / ( pow( 2.0, level ) );\n\t\t\truv.x += 1.0 / 1.5;\n\t\t\n\t\t} else {\n\n\t\t\truv.x /= 1.5;\n\t\t\t\n\t\t}\n\n\t\treturn ruv;\n\n\t}\n\t\n\tvec4 cubic(float v) {\n\t\tvec4 n = vec4(1.0, 2.0, 3.0, 4.0) - v;\n\t\tvec4 s = n * n * n;\n\t\tfloat x = s.x;\n\t\tfloat y = s.y - 4.0 * s.x;\n\t\tfloat z = s.z - 4.0 * s.y + 6.0 * s.x;\n\t\tfloat w = 6.0 - x - y - z;\n\t\treturn vec4(x, y, z, w);\n\t}\n\n\t// https://stackoverflow.com/questions/13501081/efficient-bicubic-filtering-code-in-glsl\n\tvec4 textureBicubic(sampler2D t, vec2 texCoords, vec2 textureSize) {\n\t\tvec2 invTexSize = 1.0 / textureSize;\n\t\ttexCoords = texCoords * textureSize - 0.5;\n\t\tvec2 fxy = fract(texCoords);\n\t\ttexCoords -= fxy;\n\t\tvec4 xcubic = cubic(fxy.x);\n\t\tvec4 ycubic = cubic(fxy.y);\n\t\tvec4 c = texCoords.xxyy + vec2 (-0.5, 1.5).xyxy;\n\t\tvec4 s = vec4(xcubic.xz + xcubic.yw, ycubic.xz + ycubic.yw);\n\t\tvec4 offset = c + vec4 (xcubic.yw, ycubic.yw) / s;\n\t\toffset *= invTexSize.xxyy;\n\t\tvec4 sample0 = texture2D(t, offset.xz);\n\t\tvec4 sample1 = texture2D(t, offset.yz);\n\t\tvec4 sample2 = texture2D(t, offset.xw);\n\t\tvec4 sample3 = texture2D(t, offset.yw);\n\t\tfloat sx = s.x / (s.x + s.y);\n\t\tfloat sy = s.z / (s.z + s.w);\n\t\treturn mix(\n\t\tmix(sample3, sample2, sx), mix(sample1, sample0, sx), sy);\n\t}\n\n#endif\n\n/*-------------------------------\n\tShadow\n-------------------------------*/\n\n#ifdef DEPTH\n\n\tvarying vec2 vHighPrecisionZW;\n\tuniform float cameraNear;\n\tuniform float cameraFar;\n\n#endif\n\n#ifdef USE_SHADOWMAP\n\n#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#define SHADOW_SAMPLE_COUNT 4\n\n\tvec2 poissonDisk[ SHADOW_SAMPLE_COUNT ];\n\n\tvoid initPoissonDisk( float seed ) {\n\n\t\tfloat r = 0.1;\n\t\tfloat rStep = (1.0 - r) / float( SHADOW_SAMPLE_COUNT );\n\n\t\tfloat ang = random( gl_FragCoord.xy * 0.01 + sin( time ) ) * TPI * 1.0;\n\t\tfloat angStep = ( ( TPI * 11.0 ) / float( SHADOW_SAMPLE_COUNT ) );\n\t\t\n\t\tfor( int i = 0; i < SHADOW_SAMPLE_COUNT; i++ ) {\n\n\t\t\tpoissonDisk[ i ] = vec2(\n\t\t\t\tsin( ang ),\n\t\t\t\tcos( ang )\n\t\t\t) * pow( r, 0.75 );\n\n\t\t\tr += rStep;\n\t\t\tang += angStep;\n\t\t}\n\t\t\n\t}\n\n\tvec2 compairShadowMapDepth( sampler2D shadowMap, vec2 shadowMapUV, float depth ) {\n\n\t\tif( shadowMapUV.x < 0.0 || shadowMapUV.x > 1.0 || shadowMapUV.y < 0.0 || shadowMapUV.y > 1.0 ) {\n\n\t\t\treturn vec2( 1.0, 0.0 );\n\n\t\t}\n\n\t\tfloat shadowMapDepth = unpackRGBAToDepth( texture2D( shadowMap, shadowMapUV ) );\n\n\t\tif( 0.0 >= shadowMapDepth || shadowMapDepth >= 1.0 ) {\n\n\t\t\treturn vec2( 1.0, 0.0 );\n\n\t\t}\n\t\t\n\t\tfloat shadow = depth <= shadowMapDepth ? 1.0 : 0.0;\n\n\t\treturn vec2( shadow, shadowMapDepth );\n\t\t\n\t}\n\n\tfloat shadowMapPCF( sampler2D shadowMap, vec4 shadowMapCoord, vec2 shadowSize ) {\n\n\t\tfloat shadow = 0.0;\n\t\t\n\t\tfor( int i = 0; i < SHADOW_SAMPLE_COUNT; i ++  ) {\n\t\t\t\n\t\t\tvec2 offset = poissonDisk[ i ] * shadowSize; \n\n\t\t\tshadow += compairShadowMapDepth( shadowMap, shadowMapCoord.xy + offset, shadowMapCoord.z ).x;\n\t\t\t\n\t\t}\n\n\t\tshadow /= float( SHADOW_SAMPLE_COUNT );\n\n\t\treturn shadow;\n\n\t}\n\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float bias, vec4 shadowMapCoord ) {\n\t\t\n\t\tshadowMapCoord.xyz /= shadowMapCoord.w;\n\t\tshadowMapCoord.z += bias - 0.0001;\n\n\t\tinitPoissonDisk(time);\n\n\t\tvec2 shadowSize = 1.0 / shadowMapSize;\n\n\t\treturn shadowMapPCF( shadowMap, shadowMapCoord, shadowSize );\n\n\t}\n\n#endif\n\n/*-------------------------------\n\tRE\n-------------------------------*/\n\nvarying vec3 vNormal;\nvarying vec3 vViewNormal;\nvarying vec3 vViewPos;\nvarying vec3 vWorldPos;\n\nfloat ggx( float dNH, float roughness ) {\n\t\n\tfloat a2 = roughness * roughness;\n\ta2 = a2 * a2;\n\tfloat dNH2 = dNH * dNH;\n\n\tif( dNH2 <= 0.0 ) return 0.0;\n\n\treturn a2 / ( PI * pow( dNH2 * ( a2 - 1.0 ) + 1.0, 2.0) );\n\n}\n\nvec3 lambert( vec3 diffuseColor ) {\n\n\treturn diffuseColor / PI;\n\n}\n\nfloat gSchlick( float d, float k ) {\n\n\tif( d == 0.0 ) return 0.0;\n\n\treturn d / ( d * ( 1.0 - k ) + k );\n\t\n}\n\nfloat gSmith( float dNV, float dNL, float roughness ) {\n\n\tfloat k = clamp( roughness * sqrt( 2.0 / PI ), 0.0, 1.0 );\n\n\treturn gSchlick( dNV, k ) * gSchlick( dNL, k );\n\t\n}\n\nfloat fresnel( float d ) {\n\t\n\tfloat f0 = 0.04;\n\n\treturn f0 + ( 1.0 - f0 ) * pow( 1.0 - d, 5.0 );\n\n}\n\nvec3 RE( Geometry geo, Material mat, Light light) {\n\n\tvec3 lightDir = normalize( light.direction );\n\tvec3 halfVec = normalize( geo.viewDir + lightDir );\n\n\tfloat dLH = clamp( dot( lightDir, halfVec ), 0.0, 1.0 );\n\tfloat dNH = clamp( dot( geo.normal, halfVec ), 0.0, 1.0 );\n\tfloat dNV = clamp( dot( geo.normal, geo.viewDir ), 0.0, 1.0 );\n\tfloat dNL = clamp( dot( geo.normal, lightDir), 0.0, 1.0 );\n\n\tvec3 irradiance = light.color * dNL;\n\n\t// diffuse\n\tvec3 diffuse = lambert( mat.diffuseColor ) * irradiance;\n\n\t// specular\n\tfloat D = ggx( dNH, mat.roughness );\n\tfloat G = gSmith( dNV, dNL, mat.roughness );\n\tfloat F = fresnel( dLH );\n\t\n\tvec3 specular = (( D * G * F ) / ( 4.0 * dNL * dNV + 0.0001 ) * mat.specularColor ) * irradiance; \n\n\tvec3 c = vec3( 0.0 );\n\tc += diffuse * ( 1.0 - F ) + specular;\n\n\treturn c;\n\n}\n\n/*-------------------------------\n\tMain\n-------------------------------*/\n\nvoid main( void ) {\n\n\t/*-------------------------------\n\t\tMaterial\n\t-------------------------------*/\n\n\tMaterial mat;\n\n\t#ifdef USE_MAP\n\n\t\tvec4 color = LinearTosRGB( texture2D( map, vUv ) );\n\t\tmat.albedo = color.xyz;\n\n\t#else\n\n\t\tmat.albedo = color.xyz;\n\t\tmat.opacity = 1.0;\n\t\n\t#endif\n\n\t#ifdef USE_ROUGHNESS_MAP\n\n\t\tmat.roughness = texture2D( roughnessMap, vUv ).y;\n\n\t#else\n\n\t\tmat.roughness = roughness;\n\t\n\t#endif\n\n\t#ifdef USE_METALNESS_MAP\n\n\t\tmat.metalness = texture2D( metalnessMap, vUv ).z;\n\n\t#else\n\n\t\tmat.metalness = metalness;\n\t\n\t#endif\n\n\t#ifdef USE_ALPHA_MAP\n\n\t\tmat.opacity = texture2D( alphaMap, vUv ).x;\n\n\t#else\n\n\t\tmat.opacity = opacity;\n\n\t#endif\n\t\n\tif( mat.opacity < 0.5 ) discard;\n\n\tmat.diffuseColor = mix( mat.albedo, vec3( 0.0, 0.0, 0.0 ), mat.metalness );\n\tmat.specularColor = mix( vec3( 1.0, 1.0, 1.0 ), mat.albedo, mat.metalness );\n\n\t// output\n\tvec3 outColor = vec3( 0.0 );\n\tfloat outOpacity = mat.opacity;\n\n\t/*-------------------------------\n\t\tDepth\n\t-------------------------------*/\n\n\t#ifdef DEPTH\n\n\t\tfloat fragCoordZ = 0.5 * vHighPrecisionZW.x / vHighPrecisionZW.y + 0.5;\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t\treturn;\n\t\n\t#endif\n\n\t/*-------------------------------\n\t\tGeometry\n\t-------------------------------*/\n\n\tfloat faceDirection = gl_FrontFacing ? 1.0 : -1.0;\n\n\tGeometry geo;\n\tgeo.pos = -vViewPos;\n\tgeo.posWorld = vWorldPos;\n\tgeo.viewDir = normalize( vViewPos );\n\tgeo.viewDirWorld = normalize( geo.posWorld - cameraPosition );\n\tgeo.normal = normalize( vNormal ) * faceDirection;\n\n\t#ifdef USE_NORMAL_MAP\n\t\t\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\ttangent *= faceDirection;\n\t\t\tbitangent *= faceDirection;\n\t\t\n\t\t#endif\n\t\t\n\t\tmat3 vTBN = mat3( tangent, bitangent, geo.normal );\n\t\t\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz;\n\t\tmapN = mapN * 2.0 - 1.0;\n\t\tgeo.normal = normalize( vTBN * mapN );\n\n\t#endif\n\t\n\tgeo.normalWorld = normalize( ( vec4( geo.normal, 0.0 ) * viewMatrix ).xyz );\n\n\t/*-------------------------------\n\t\tLighting\n\t-------------------------------*/\n\t\n\tLight light;\n\n\t#if NUM_DIR_LIGHTS > 0\n\n\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\t\t\tlight.direction = directionalLights[ i ].direction;\n\t\t\t\tlight.color = directionalLights[ i ].color;\n\n\t\t\t\tfloat shadow = 1.0;\n\t\t\t\t\n\t\t\t\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\t\t\t\tshadow = getShadow( directionalShadowMap[ i ], directionalLightShadows[ i ].shadowMapSize, directionalLightShadows[ i ].shadowBias, vDirectionalShadowCoord[ i ] );\n\n\t\t\t\t#endif\n\n\t\t\t\toutColor += RE( geo, mat, light ) * shadow;\n\t\t\t\t\n\t\t\t}\n\t\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_POINT_LIGHTS > 0\n\n\t\tPointLight pLight;\n\t\tvec3 v;\n\t\tfloat d;\n\t\tfloat attenuation;\n\t\t#pragma unroll_loop_start\n\n\t\t\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\t\t\tpLight = pointLights[ i ];\n\n\t\t\t\tv = pLight.position - geo.pos;\n\t\t\t\td = length( v );\n\t\t\t\tlight.direction = normalize( v );\n\t\t\n\t\t\t\tlight.color = pLight.color;\n\n\t\t\t\tif( pLight.distance > 0.0 && pLight.decay > 0.0 ) {\n\n\t\t\t\t\tattenuation = pow( clamp( -d / pLight.distance + 1.0, 0.0, 1.0 ), pLight.decay );\n\t\t\t\t\tlight.color *= attenuation;\n\n\t\t\t\t}\n\n\t\t\t\toutColor += RE( geo, mat, light );\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t#pragma unroll_loop_end\n\n\t#endif\n\n\t/*-------------------------------\n\t\tEnvironment Lighting\n\t-------------------------------*/\n\n\tfloat dNV = clamp( dot( geo.normal, geo.viewDir ), 0.0, 1.0 );\n\n\tvec3 refDir = reflect( geo.viewDirWorld, geo.normalWorld );\n\trefDir.x *= -1.0;\n\n\tvec4 envMapColor = LinearTosRGB( textureCubeUV( envMap, geo.normalWorld, 1.0 ) ) * iblIntensity * envMapIntensity;\n\toutColor += mat.diffuseColor * envMapColor.xyz * ( 1.0 - mat.metalness );\n\n\t/*-------------------------------\n\t\tReflection\n\t-------------------------------*/\n\t\n\tfloat EF = mix( fresnel( dNV ), 1.0, mat.metalness );\n\n\t#ifdef REFLECTPLANE\n\t\n\t\tvec2 refUV = gl_FragCoord.xy / renderResolution;\n\n\t\trefUV.x += geo.normal.x * 0.5;\n\n\t\tfloat l = (1.0 - exp( -mat.roughness  ) ) * 1.6 * REF_MIPMAP_LEVEL;\n\n\t\tfloat offset1 = floor( l );\n\t\tfloat offset2 = offset1 + 1.0;\n\t\tfloat blend = fract( l );\n\t\t\n\t\tvec2 ruv1 = getRefMipmapUV( refUV, offset1 );\n\t\tvec2 ruv2 = getRefMipmapUV( refUV, offset2 );\n\n\t\tvec3 ref1 = textureBicubic( reflectionTex, ruv1, mipMapResolution ).xyz;\n\t\tvec3 ref2 = textureBicubic( reflectionTex, ruv2, mipMapResolution ).xyz;\n\n\t\toutColor += mix( ref1, ref2, blend ) * EF;\n\n\t#else\n\t\n\t\toutColor += mat.specularColor * LinearTosRGB( textureCubeUV( envMap, refDir, mat.roughness ) ).xyz * EF * envMapIntensity;\n\t\n\t#endif\n\n\t/*-------------------------------\n\t\tEmission\n\t-------------------------------*/\n\n\t#ifdef USE_EMISSION_MAP\n\n\t\toutColor += LinearTosRGB( texture2D( emissionMap, vUv ) ).xyz;\n\t\n\t#else\n\n\t\toutColor += emission;\n\n\t#endif\n\n\tgl_FragColor = vec4( outColor, outOpacity );\n\n}";class r extends t.Mesh{constructor(a,o){o=o||{};let r,s=n.UniformsLib.mergeUniforms(o.uniforms||{},{envMap:{value:null},envMapIntensity:{value:null},iblIntensity:{value:null},maxLodLevel:{value:0},shadowLightModelViewMatrix:{value:new t.Matrix4},shadowLightProjectionMatrix:{value:new t.Matrix4},shadowLightDirection:{value:new t.Vector3},shadowLightCameraClip:{value:new t.Vector2},shadowMap:{value:null},shadowMapSize:{value:new t.Vector2},shadowMapResolution:{value:new t.Vector2},shadowLightSize:{value:1},cameraNear:{value:.01},cameraFar:{value:1e3}});if(s=n.UniformsLib.mergeUniforms(s,t.UniformsUtils.clone(t.UniformsLib.lights)),"isBufferGeometry"in a)r=a;else if("isMesh"in a){r=a.geometry;let t=a.material;t.isMeshStandardMaterial&&(t.map?s.map={value:t.map}:t.color&&(s.color={value:t.color}),t.roughnessMap?s.roughnessMap={value:t.roughnessMap}:s.roughness={value:t.roughness},t.alphaMap?s.alphaMap={value:t.alphaMap}:s.opacity={value:t.opacity},t.metalnessMap?s.metalnessMap={value:t.metalnessMap}:s.metalness={value:t.metalness},t.normalMap&&(s.normalMap={value:t.normalMap}),t.emissiveMap?s.emissionMap={value:t.emissiveMap}:s.emission={value:t.emissive})}else r=new t.BufferGeometry;r.getAttribute("tangent")||r.getIndex()&&r.getAttribute("position")&&r.getAttribute("normal")&&r.getAttribute("uv")&&r.computeTangents(),o.uniforms=s;let l=new t.ShaderMaterial(Object.assign({vertexShader:e,fragmentShader:i,lights:!0,transparent:!0,side:t.DoubleSide,extensions:{derivatives:!0},defines:{}},o));s.map&&(l.defines.USE_MAP=""),s.roughnessMap&&(l.defines.USE_ROUGHNESS_MAP=""),s.metalnessMap&&(l.defines.USE_METALNESS_MAP=""),s.alphaMap&&(l.defines.USE_ALPHA_MAP=""),s.normalMap&&(l.defines.USE_NORMAL_MAP=""),s.emissionMap&&(l.defines.USE_EMISSION_MAP=""),super(r,l),this.name=a.name,this.userData.colorMat=this.material,this.customDepthMaterial=new t.ShaderMaterial(Object.assign(Object.assign({vertexShader:e,fragmentShader:i,side:t.DoubleSide,lights:!0,extensions:{derivatives:!0}},o),{defines:Object.assign(Object.assign({},l.defines),{DEPTH:""})})),this.commonUniforms=s,"isMesh"in a&&(this.position.copy(a.position),this.rotation.copy(a.rotation),this.scale.copy(a.scale)),this.envMapSrc=null,this.envMapUpdate=!1,this.envMapRenderTarget=new t.WebGLCubeRenderTarget(256,{format:t.RGBAFormat,generateMipmaps:!0,magFilter:t.LinearFilter,minFilter:t.LinearFilter}),this.envMapCamera=new t.CubeCamera(.001,1e3,this.envMapRenderTarget),this.getWorldPosition(this.envMapCamera.position),this.onBeforeRender=(t,n,e)=>{this.dispatchEvent({type:"beforeRender",renderer:t,scene:n,camera:e})},this.addEventListener("beforeRender",(n=>{let e=n.renderer,i=n.scene,a=n.camera;if(this.envMapUpdate){let n=null,a=new t.PMREMGenerator(e);a.compileEquirectangularShader(),this.envMapSrc?n="isCubeTexture"in this.envMapSrc?a.fromCubemap(this.envMapSrc):a.fromEquirectangular(this.envMapSrc):(this.visible=!1,this.envMapCamera.update(e,i),n=a.fromCubemap(this.envMapRenderTarget.texture),this.visible=!0),this.commonUniforms.envMap.value=n.texture,this.envMapUpdate=!1}a.userData.depthCamera&&(this.material=this.userData.depthMat,this.commonUniforms.cameraNear.value=a.near,this.commonUniforms.cameraFar.value=a.far,this.material||(this.visible=!1))}));const c=()=>{this.envMapRenderTarget.dispose(),this.geometry.dispose(),this.material.dispose(),this.removeEventListener("dispose",c)};this.addEventListener("dispose",c)}updateEnvMap(t=null){this.envMapSrc=t,this.envMapUpdate=!0,null==this.commonUniforms.envMapIntensity.value&&(this.commonUniforms.envMapIntensity.value=1),null==this.commonUniforms.iblIntensity.value&&(this.commonUniforms.iblIntensity.value=1)}set envMapIntensity(t){this.commonUniforms.envMapIntensity.value=t}set iblIntensity(t){this.commonUniforms.iblIntensity.value=t}dispose(){this.dispatchEvent({type:"dispsoe"})}get isPowerMesh(){return!0}}class s extends r{constructor(e,i){(i=i||{}).uniforms=n.UniformsLib.mergeUniforms(i.uniforms||{},{reflectionTex:{value:null},renderResolution:{value:new t.Vector2(1,1)},textureMatrix:{value:new t.Matrix4},mipMapResolution:{value:new t.Vector2(1,1)}}),super(e,i),this.material.defines.REFLECTPLANE="",this.reflectorPlane=new t.Plane,this.normal=new t.Vector3,this.reflectorWorldPosition=new t.Vector3,this.cameraWorldPosition=new t.Vector3,this.rotationMatrix=new t.Matrix4,this.lookAtPosition=new t.Vector3(0,0,-1),this.clipPlane=new t.Vector4,this.textureMatrix=this.commonUniforms.textureMatrix.value,this.clipBias=.1,this.view=new t.Vector3,this.target=new t.Vector3,this.q=new t.Vector4,this.virtualCamera=new t.PerspectiveCamera,this.mipmapPP=null,this.mipmapGeo=new t.BufferGeometry;let a=[],o=[],r=[],s=new t.Vector2(0,0),l=2;a.push(s.x,s.y,0),a.push(s.x+l,s.y,0),a.push(s.x+l,s.y-l,0),a.push(s.x,s.y-l,0),o.push(1,1),o.push(0,1),o.push(0,0),o.push(1,0),r.push(0,2,1,0,3,2),s.set(l,0);for(let t=0;t<7;t++){l*=.5,a.push(s.x,s.y,0),a.push(s.x+l,s.y,0),a.push(s.x+l,s.y-l,0),a.push(s.x,s.y-l,0),o.push(1,1),o.push(0,1),o.push(0,0),o.push(1,0);let n=4*(t+0);r.push(n+0,n+2,n+1,n+0,n+3,n+2),s.y=s.y-l}let c=new t.BufferAttribute(new Float32Array(a),3),m=new t.BufferAttribute(new Float32Array(o),2),d=new t.BufferAttribute(new Uint16Array(r),1);c.applyMatrix4((new t.Matrix4).makeScale(1/1.5,1,1)),c.applyMatrix4((new t.Matrix4).makeTranslation(-1,1,0)),this.mipmapGeo.setAttribute("position",c),this.mipmapGeo.setAttribute("uv",m),this.mipmapGeo.setIndex(d),this.renderTargets={ref:new t.WebGLRenderTarget(1,1),mipmap:new t.WebGLRenderTarget(1,1)},this.addEventListener("beforeRender",(e=>{let i=e.renderer,a=e.scene,o=e.camera;if(!o.userData.mainCamera)return;if(this.reflectorWorldPosition.setFromMatrixPosition(this.matrixWorld),this.cameraWorldPosition.setFromMatrixPosition(o.matrixWorld),this.rotationMatrix.extractRotation(this.matrixWorld),this.normal.set(0,1,0),this.normal.applyMatrix4(this.rotationMatrix),this.view.subVectors(this.reflectorWorldPosition,this.cameraWorldPosition),this.view.dot(this.normal)>0)return;this.view.reflect(this.normal).negate(),this.view.add(this.reflectorWorldPosition),this.rotationMatrix.extractRotation(o.matrixWorld),this.lookAtPosition.set(0,0,-1),this.lookAtPosition.applyMatrix4(this.rotationMatrix),this.lookAtPosition.add(this.cameraWorldPosition),this.target.subVectors(this.reflectorWorldPosition,this.lookAtPosition),this.target.reflect(this.normal).negate(),this.target.add(this.reflectorWorldPosition),this.virtualCamera.position.copy(this.view),this.virtualCamera.up.set(0,1,0),this.virtualCamera.up.applyMatrix4(this.rotationMatrix),this.virtualCamera.up.reflect(this.normal),this.virtualCamera.lookAt(this.target),o.far&&(this.virtualCamera.far=o.far),this.virtualCamera.updateMatrixWorld(),this.virtualCamera.projectionMatrix.copy(o.projectionMatrix),this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.virtualCamera.projectionMatrix),this.textureMatrix.multiply(this.virtualCamera.matrixWorldInverse),this.textureMatrix.multiply(this.matrixWorld),this.reflectorPlane.setFromNormalAndCoplanarPoint(this.normal,this.reflectorWorldPosition),this.reflectorPlane.applyMatrix4(this.virtualCamera.matrixWorldInverse),this.clipPlane.set(this.reflectorPlane.normal.x,this.reflectorPlane.normal.y,this.reflectorPlane.normal.z,this.reflectorPlane.constant);var r=this.virtualCamera.projectionMatrix;this.q.x=(Math.sign(this.clipPlane.x)+r.elements[8])/r.elements[0],this.q.y=(Math.sign(this.clipPlane.y)+r.elements[9])/r.elements[5],this.q.z=-1,this.q.w=(1+r.elements[10])/r.elements[14],this.clipPlane.multiplyScalar(2/this.clipPlane.dot(this.q)),r.elements[2]=this.clipPlane.x,r.elements[6]=this.clipPlane.y,r.elements[10]=this.clipPlane.z+1-this.clipBias,r.elements[14]=this.clipPlane.w;let s=i.getRenderTarget();i.setRenderTarget(this.renderTargets.ref),this.visible=!1,i.clear(),i.render(a,this.virtualCamera),i.clearDepth(),i.setRenderTarget(s),this.visible=!0,null==this.mipmapPP&&(this.mipmapPP=new n.PostProcessing(i,{fragmentShader:"#define GLSLIFY 1\nuniform sampler2D tex;\nvarying vec2 vUv;\n\nfloat clip( vec2 uv ) {\n\tvec2 c = step( abs(uv - 0.5), vec2( 0.5 ) );\n\treturn c.x * c.y;\n}\n\nvoid main( void ) {\n\n\tvec4 col = texture2D( tex, vUv );\n\tgl_FragColor = col;\n\n}",side:t.DoubleSide},this.mipmapGeo)),this.mipmapPP.render({tex:this.renderTargets.ref.texture},this.renderTargets.mipmap),this.commonUniforms.reflectionTex.value=this.renderTargets.mipmap.texture;let l=i.getRenderTarget();l?this.commonUniforms.renderResolution.value.set(l.width,l.height):(i.getSize(this.commonUniforms.renderResolution.value),this.commonUniforms.renderResolution.value.multiplyScalar(i.getPixelRatio()))})),this.resize()}resize(){this.renderTargets.ref.setSize(512,512);let n=new t.Vector2(768,512);this.renderTargets.mipmap.setSize(n.x,n.y),this.commonUniforms.mipMapResolution.value.copy(n)}}})(),o})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG93ZXJtZXNoLmpzIiwibWFwcGluZ3MiOiJDQUFBLFNBQTJDQSxFQUFNQyxHQUMxQixpQkFBWkMsU0FBMEMsaUJBQVhDLE9BQ3hDQSxPQUFPRCxRQUFVRCxFQUFRRyxRQUFRLFNBQVVBLFFBQVEsaUJBQzFCLG1CQUFYQyxRQUF5QkEsT0FBT0MsSUFDOUNELE9BQU8sQ0FBQyxRQUFTLGdCQUFpQkosR0FDUixpQkFBWkMsUUFDZEEsUUFBbUIsVUFBSUQsRUFBUUcsUUFBUSxTQUFVQSxRQUFRLGlCQUV6REosRUFBZ0IsVUFBSUMsRUFBUUQsRUFBWSxNQUFHQSxFQUFVLEtBUnZELENBU0dPLE1BQU0sU0FBU0MsRUFBa0NDLEdBQ3BELE0sa0NDVkFOLEVBQU9ELFFBQVVPLEcsUUNBakJOLEVBQU9ELFFBQVVNLElDQ2JFLEVBQTJCLEdBRy9CLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUJFLElBQWpCRCxFQUNILE9BQU9BLEVBQWFYLFFBR3JCLElBQUlDLEVBQVNPLEVBQXlCRSxHQUFZLENBR2pEVixRQUFTLElBT1YsT0FIQWEsRUFBb0JILEdBQVVULEVBQVFBLEVBQU9ELFFBQVNTLEdBRy9DUixFQUFPRCxRQ3BCZlMsRUFBb0JLLEVBQUksQ0FBQ2QsRUFBU2UsS0FDakMsSUFBSSxJQUFJQyxLQUFPRCxFQUNYTixFQUFvQlEsRUFBRUYsRUFBWUMsS0FBU1AsRUFBb0JRLEVBQUVqQixFQUFTZ0IsSUFDNUVFLE9BQU9DLGVBQWVuQixFQUFTZ0IsRUFBSyxDQUFFSSxZQUFZLEVBQU1DLElBQUtOLEVBQVdDLE1DSjNFUCxFQUFvQlEsRUFBSSxDQUFDSyxFQUFLQyxJQUFVTCxPQUFPTSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxHQ0NsRmQsRUFBb0JrQixFQUFLM0IsSUFDSCxvQkFBWDRCLFFBQTBCQSxPQUFPQyxhQUMxQ1gsT0FBT0MsZUFBZW5CLEVBQVM0QixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RaLE9BQU9DLGVBQWVuQixFQUFTLGFBQWMsQ0FBRThCLE9BQU8sSyxxR0NMdkQsZy9EQ0FBLDQzYkNPTyxNQUFNQyxVQUFrQixPQWM5QkMsWUFBYUMsRUFBNENDLEdBRXhEQSxFQUFpQkEsR0FBa0IsR0FFbkMsSUFtRElDLEVBbkRBQyxFQUFNLDRCQUErQkYsRUFBZUcsVUFBWSxHQUFJLENBQ3ZFQyxPQUFRLENBQ1BSLE1BQU8sTUFFUlMsZ0JBQWlCLENBQ2hCVCxNQUFPLE1BRVJVLGFBQWMsQ0FDYlYsTUFBTyxNQUVSVyxZQUFhLENBQ1pYLE1BQU8sR0FFUlksMkJBQTRCLENBQzNCWixNQUFPLElBQUksV0FFWmEsNEJBQTZCLENBQzVCYixNQUFPLElBQUksV0FFWmMscUJBQXNCLENBQ3JCZCxNQUFPLElBQUksV0FFWmUsc0JBQXVCLENBQ3RCZixNQUFPLElBQUksV0FFWmdCLFVBQVcsQ0FDVmhCLE1BQU8sTUFFUmlCLGNBQWUsQ0FDZGpCLE1BQU8sSUFBSSxXQUVaa0Isb0JBQXFCLENBQ3BCbEIsTUFBTyxJQUFJLFdBRVptQixnQkFBaUIsQ0FDaEJuQixNQUFPLEdBRVJvQixXQUFZLENBQ1hwQixNQUFPLEtBRVJxQixVQUFXLENBQ1ZyQixNQUFPLE9BWVQsR0FSQU0sRUFBTSw0QkFBK0JBLEVBQUssc0JBQTJCLHVCQVFoRSxxQkFBc0JILEVBRTFCRSxFQUFNRixPQUVBLEdBQUssV0FBWUEsRUFBVSxDQUVqQ0UsRUFBTUYsRUFBUW1CLFNBRWQsSUFBSUMsRUFBUXBCLEVBQVFxQixTQUVmRCxFQUFJRSx5QkFFSEYsRUFBSUcsSUFFUnBCLEVBQUlvQixJQUFNLENBQ1QxQixNQUFPdUIsRUFBSUcsS0FHREgsRUFBSUksUUFFZnJCLEVBQUlxQixNQUFRLENBQ1gzQixNQUFPdUIsRUFBSUksUUFLUkosRUFBSUssYUFFUnRCLEVBQUlzQixhQUFlLENBQ2xCNUIsTUFBT3VCLEVBQUlLLGNBS1p0QixFQUFJdUIsVUFBWSxDQUNmN0IsTUFBT3VCLEVBQUlNLFdBS1JOLEVBQUlPLFNBRVJ4QixFQUFJd0IsU0FBVyxDQUNkOUIsTUFBT3VCLEVBQUlPLFVBS1p4QixFQUFJeUIsUUFBVSxDQUNiL0IsTUFBT3VCLEVBQUlRLFNBS1JSLEVBQUlTLGFBRVIxQixFQUFJMEIsYUFBZSxDQUNsQmhDLE1BQU91QixFQUFJUyxjQUtaMUIsRUFBSTJCLFVBQVksQ0FDZmpDLE1BQU91QixFQUFJVSxXQUtSVixFQUFJVyxZQUVSNUIsRUFBSTRCLFVBQVksQ0FDZmxDLE1BQU91QixFQUFJVyxZQUtSWCxFQUFJWSxZQUVSN0IsRUFBSThCLFlBQWMsQ0FDakJwQyxNQUFPdUIsRUFBSVksYUFLWjdCLEVBQUkrQixTQUFXLENBQ2RyQyxNQUFPdUIsRUFBSWUsZ0JBU2RqQyxFQUFNLElBQUksaUJBTUpBLEVBQUlrQyxhQUFjLFlBR3ZCbEMsRUFBSW1DLFlBQ0puQyxFQUFJa0MsYUFBYyxhQUNsQmxDLEVBQUlrQyxhQUFjLFdBQ2xCbEMsRUFBSWtDLGFBQWMsT0FHbEJsQyxFQUFJb0Msa0JBVU5yQyxFQUFlRyxTQUFXRCxFQUUxQixJQUFJaUIsRUFBTSxJQUFJLGlCQUFxQixPQUFELFFBQ2pDbUIsYUFBY0MsRUFDZEMsZUFBZ0IsRUFDaEJDLFFBQVEsRUFDUkMsYUFBYSxFQUNiQyxLQUFNLGFBQ05DLFdBQVksQ0FDWEMsYUFBYSxHQUVkQyxRQUFTLElBRU45QyxJQUdDRSxFQUFJb0IsTUFFUkgsRUFBSTJCLFFBQVFDLFFBQVUsSUFJbEI3QyxFQUFJc0IsZUFFUkwsRUFBSTJCLFFBQVFFLGtCQUFvQixJQUk1QjlDLEVBQUkwQixlQUVSVCxFQUFJMkIsUUFBUUcsa0JBQW9CLElBSTVCL0MsRUFBSXdCLFdBRVJQLEVBQUkyQixRQUFRSSxjQUFnQixJQUl4QmhELEVBQUk0QixZQUVSWCxFQUFJMkIsUUFBUUssZUFBaUIsSUFJekJqRCxFQUFJOEIsY0FFUmIsRUFBSTJCLFFBQVFNLGlCQUFtQixJQUloQ0MsTUFBT3BELEVBQUtrQixHQUVabUMsS0FBS0MsS0FBT3hELEVBQVF3RCxLQUVwQkQsS0FBS0UsU0FBU0MsU0FBV0gsS0FBS2xDLFNBRTlCa0MsS0FBS0ksb0JBQXNCLElBQUksaUJBQXFCLE9BQUQsc0JBQ2xEcEIsYUFBY0MsRUFDZEMsZUFBZ0IsRUFDaEJHLEtBQU0sYUFDTkYsUUFBUSxFQUNSRyxXQUFZLENBQ1hDLGFBQWEsSUFFWDdDLEdBQWMsQ0FDakI4QyxRQUFTLE9BQUYsd0JBQ0gzQixFQUFJMkIsU0FBTyxDQUNkLE1BQVMsUUFJWFEsS0FBS0ssZUFBaUJ6RCxFQU1qQixXQUFZSCxJQUVoQnVELEtBQUtNLFNBQVNDLEtBQU05RCxFQUFRNkQsVUFDNUJOLEtBQUtRLFNBQVNELEtBQU05RCxFQUFRK0QsVUFDNUJSLEtBQUtTLE1BQU1GLEtBQU05RCxFQUFRZ0UsUUFRMUJULEtBQUtVLFVBQVksS0FDakJWLEtBQUtXLGNBQWUsRUFJcEJYLEtBQUtZLG1CQUFxQixJQUFJLHdCQUZQLElBRXNELENBQzVFQyxPQUFRLGFBQ1JDLGlCQUFpQixFQUNqQkMsVUFBVyxlQUNYQyxVQUFXLGlCQUdaaEIsS0FBS2lCLGFBQWUsSUFBSSxhQUFrQixLQUFPLElBQU1qQixLQUFLWSxvQkFDNURaLEtBQUtrQixpQkFBa0JsQixLQUFLaUIsYUFBYVgsVUFFekNOLEtBQUttQixlQUFpQixDQUFFQyxFQUFVQyxFQUFPQyxLQUV4Q3RCLEtBQUt1QixjQUFlLENBQ25CQyxLQUFNLGVBQ05KLFNBQUFBLEVBQ0FDLE1BQUFBLEVBQ0FDLE9BQUFBLEtBS0Z0QixLQUFLeUIsaUJBQWtCLGdCQUFrQkMsSUFFeEMsSUFBSU4sRUFBV00sRUFBRU4sU0FDYkMsRUFBUUssRUFBRUwsTUFDVkMsRUFBU0ksRUFBRUosT0FNZixHQUFLdEIsS0FBS1csYUFBZSxDQUV4QixJQUFJZ0IsRUFBMkMsS0FFM0NDLEVBQWlCLElBQUksaUJBQXNCUixHQUMvQ1EsRUFBZUMsK0JBRVY3QixLQUFLVSxVQUlSaUIsRUFGSSxrQkFBbUIzQixLQUFLVSxVQUVqQmtCLEVBQWVFLFlBQWE5QixLQUFLVSxXQUlqQ2tCLEVBQWVHLG9CQUFxQi9CLEtBQUtVLFlBTXJEVixLQUFLZ0MsU0FBVSxFQUVmaEMsS0FBS2lCLGFBQWFnQixPQUFRYixFQUFVQyxHQUNwQ00sRUFBV0MsRUFBZUUsWUFBYTlCLEtBQUtZLG1CQUFtQnNCLFNBRS9EbEMsS0FBS2dDLFNBQVUsR0FJaEJoQyxLQUFLSyxlQUFldkQsT0FBT1IsTUFBUXFGLEVBQVNPLFFBQzVDbEMsS0FBS1csY0FBZSxFQVFoQlcsRUFBT3BCLFNBQVNpQyxjQUVwQm5DLEtBQUtsQyxTQUFXa0MsS0FBS0UsU0FBU2tDLFNBQzlCcEMsS0FBS0ssZUFBZTNDLFdBQVdwQixNQUFRZ0YsRUFBT2UsS0FDOUNyQyxLQUFLSyxlQUFlMUMsVUFBVXJCLE1BQVFnRixFQUFPZ0IsSUFFdEN0QyxLQUFLbEMsV0FFWGtDLEtBQUtnQyxTQUFVLE9BOEJsQixNQUFNTyxFQUFZLEtBRWpCdkMsS0FBS1ksbUJBQW1CNEIsVUFDeEJ4QyxLQUFLcEMsU0FBUzRFLFVBQ2R4QyxLQUFLbEMsU0FBUzBFLFVBRWR4QyxLQUFLeUMsb0JBQXFCLFVBQVdGLElBSXRDdkMsS0FBS3lCLGlCQUFrQixVQUFXYyxHQVE1QkcsYUFBYzVGLEVBQW1ELE1BRXZFa0QsS0FBS1UsVUFBWTVELEVBQ2pCa0QsS0FBS1csY0FBZSxFQUU4QixNQUE3Q1gsS0FBS0ssZUFBZXRELGdCQUFnQlQsUUFFeEMwRCxLQUFLSyxlQUFldEQsZ0JBQWdCVCxNQUFRLEdBSUUsTUFBMUMwRCxLQUFLSyxlQUFlckQsYUFBYVYsUUFFckMwRCxLQUFLSyxlQUFlckQsYUFBYVYsTUFBUSxHQU1oQ1Msb0JBQWlCVCxHQUUzQjBELEtBQUtLLGVBQWV0RCxnQkFBZ0JULE1BQVFBLEVBSWxDVSxpQkFBY1YsR0FFeEIwRCxLQUFLSyxlQUFlckQsYUFBYVYsTUFBUUEsRUFJbkNrRyxVQUVOeEMsS0FBS3VCLGNBQWUsQ0FBRUMsS0FBTSxZQUlsQm1CLGtCQUVWLE9BQU8sR0NsY0YsTUFBTUMsVUFBNEJyRyxFQTRDeENDLFlBQWFDLEVBQWtFQyxJQUU5RUEsRUFBaUJBLEdBQWtCLElBRXBCRyxTQUFXLDRCQUErQkgsRUFBZUcsVUFBWSxHQUFJLENBQ3ZGZ0csY0FBZSxDQUNkdkcsTUFBTyxNQUVSd0csaUJBQWtCLENBQ2pCeEcsTUFBTyxJQUFJLFVBQWUsRUFBRyxJQUU5QnlHLGNBQWUsQ0FDZHpHLE1BQU8sSUFBSSxXQUVaMEcsaUJBQWtCLENBQ2pCMUcsTUFBTyxJQUFJLFVBQWUsRUFBRyxNQUkvQnlELE1BQU90RCxFQUFpQ0MsR0FFeENzRCxLQUFLbEMsU0FBUzBCLFFBQVF5RCxhQUFlLEdBRXJDakQsS0FBS2tELGVBQWlCLElBQUksUUFDMUJsRCxLQUFLbUQsT0FBUyxJQUFJLFVBQ2xCbkQsS0FBS29ELHVCQUF5QixJQUFJLFVBQ2xDcEQsS0FBS3FELG9CQUFzQixJQUFJLFVBQy9CckQsS0FBS3NELGVBQWlCLElBQUksVUFDMUJ0RCxLQUFLdUQsZUFBaUIsSUFBSSxVQUFlLEVBQUcsR0FBSyxHQUNqRHZELEtBQUt3RCxVQUFZLElBQUksVUFDckJ4RCxLQUFLK0MsY0FBZ0IvQyxLQUFLSyxlQUFlMEMsY0FBY3pHLE1BQ3ZEMEQsS0FBS3lELFNBQVcsR0FFaEJ6RCxLQUFLMEQsS0FBTyxJQUFJLFVBQ2hCMUQsS0FBSzJELE9BQVMsSUFBSSxVQUNsQjNELEtBQUs0RCxFQUFJLElBQUksVUFFYjVELEtBQUs2RCxjQUFnQixJQUFJLG9CQU16QjdELEtBQUs4RCxTQUFXLEtBQ2hCOUQsS0FBSytELFVBQVksSUFBSSxpQkFFckIsSUFBSUMsRUFBVyxHQUNYQyxFQUFVLEdBQ1ZDLEVBQWEsR0FFYkMsRUFBSSxJQUFJLFVBQWUsRUFBRyxHQUMxQkMsRUFBSSxFQUVSSixFQUFTSyxLQUFNRixFQUFFRyxFQUFHSCxFQUFFSSxFQUFHLEdBQ3pCUCxFQUFTSyxLQUFNRixFQUFFRyxFQUFJRixFQUFHRCxFQUFFSSxFQUFHLEdBQzdCUCxFQUFTSyxLQUFNRixFQUFFRyxFQUFJRixFQUFHRCxFQUFFSSxFQUFJSCxFQUFHLEdBQ2pDSixFQUFTSyxLQUFNRixFQUFFRyxFQUFHSCxFQUFFSSxFQUFJSCxFQUFHLEdBRTdCSCxFQUFRSSxLQUFNLEVBQUssR0FDbkJKLEVBQVFJLEtBQU0sRUFBSyxHQUNuQkosRUFBUUksS0FBTSxFQUFLLEdBQ25CSixFQUFRSSxLQUFNLEVBQUssR0FFbkJILEVBQVdHLEtBQU0sRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdBRWhDRixFQUFFSyxJQUFLSixFQUFHLEdBRVYsSUFBTSxJQUFJSyxFQUFJLEVBQUdBLEVBQUksRUFBR0EsSUFBTyxDQUU5QkwsR0FBSyxHQUVMSixFQUFTSyxLQUFNRixFQUFFRyxFQUFJSCxFQUFFSSxFQUFJLEdBQzNCUCxFQUFTSyxLQUFNRixFQUFFRyxFQUFJRixFQUFHRCxFQUFFSSxFQUFJLEdBQzlCUCxFQUFTSyxLQUFNRixFQUFFRyxFQUFJRixFQUFHRCxFQUFFSSxFQUFJSCxFQUFHLEdBQ2pDSixFQUFTSyxLQUFNRixFQUFFRyxFQUFJSCxFQUFFSSxFQUFJSCxFQUFJLEdBRS9CSCxFQUFRSSxLQUFNLEVBQUssR0FDbkJKLEVBQVFJLEtBQU0sRUFBSyxHQUNuQkosRUFBUUksS0FBTSxFQUFLLEdBQ25CSixFQUFRSSxLQUFNLEVBQUssR0FFbkIsSUFBSUssRUFBNEIsR0FBWkQsRUFBSSxHQUN4QlAsRUFBV0csS0FBTUssRUFBYyxFQUFHQSxFQUFjLEVBQUdBLEVBQWMsRUFBR0EsRUFBYyxFQUFHQSxFQUFjLEVBQUdBLEVBQWMsR0FFcEhQLEVBQUVJLEVBQUlKLEVBQUVJLEVBQUlILEVBSWIsSUFBSU8sRUFBVSxJQUFJLGtCQUF1QixJQUFJQyxhQUFjWixHQUFZLEdBQ25FYSxFQUFTLElBQUksa0JBQXVCLElBQUlELGFBQWNYLEdBQVcsR0FDakVhLEVBQVksSUFBSSxrQkFBdUIsSUFBSUMsWUFBYWIsR0FBYyxHQUcxRVMsRUFBUUssY0FBYyxJQUFJLFdBQWdCQyxVQUFhLEVBQU0sSUFEcEQsTUFFVE4sRUFBUUssY0FBYyxJQUFJLFdBQWdCRSxpQkFBbUIsRUFBSyxFQUFLLElBRXZFbEYsS0FBSytELFVBQVVvQixhQUFjLFdBQVlSLEdBQ3pDM0UsS0FBSytELFVBQVVvQixhQUFjLEtBQU1OLEdBQ25DN0UsS0FBSytELFVBQVVxQixTQUFVTixHQU16QjlFLEtBQUtxRixjQUFnQixDQUNwQkMsSUFBSyxJQUFJLG9CQUF5QixFQUFHLEdBQ3JDQyxPQUFRLElBQUksb0JBQXlCLEVBQUcsSUFPekN2RixLQUFLeUIsaUJBQWtCLGdCQUFrQkMsSUFFeEMsSUFBSU4sRUFBV00sRUFBRU4sU0FDYkMsRUFBUUssRUFBRUwsTUFDVkMsRUFBU0ksRUFBRUosT0FFZixJQUFPQSxFQUFPcEIsU0FBU3NGLFdBQWEsT0FjcEMsR0FaQXhGLEtBQUtvRCx1QkFBdUJxQyxzQkFBdUJ6RixLQUFLMEYsYUFDeEQxRixLQUFLcUQsb0JBQW9Cb0Msc0JBQXVCbkUsRUFBT29FLGFBRXZEMUYsS0FBS3NELGVBQWVxQyxnQkFBaUIzRixLQUFLMEYsYUFFMUMxRixLQUFLbUQsT0FBT3FCLElBQUssRUFBRyxFQUFLLEdBQ3pCeEUsS0FBS21ELE9BQU82QixhQUFjaEYsS0FBS3NELGdCQUUvQnRELEtBQUswRCxLQUFLa0MsV0FBWTVGLEtBQUtvRCx1QkFBd0JwRCxLQUFLcUQscUJBSW5EckQsS0FBSzBELEtBQUttQyxJQUFLN0YsS0FBS21ELFFBQVcsRUFBSSxPQUV4Q25ELEtBQUswRCxLQUFLb0MsUUFBUzlGLEtBQUttRCxRQUFTNEMsU0FDakMvRixLQUFLMEQsS0FBS3NDLElBQUtoRyxLQUFLb0Qsd0JBRXBCcEQsS0FBS3NELGVBQWVxQyxnQkFBaUJyRSxFQUFPb0UsYUFFNUMxRixLQUFLdUQsZUFBZWlCLElBQUssRUFBRyxHQUFLLEdBQ2pDeEUsS0FBS3VELGVBQWV5QixhQUFjaEYsS0FBS3NELGdCQUN2Q3RELEtBQUt1RCxlQUFleUMsSUFBS2hHLEtBQUtxRCxxQkFFOUJyRCxLQUFLMkQsT0FBT2lDLFdBQVk1RixLQUFLb0QsdUJBQXdCcEQsS0FBS3VELGdCQUMxRHZELEtBQUsyRCxPQUFPbUMsUUFBUzlGLEtBQUttRCxRQUFTNEMsU0FDbkMvRixLQUFLMkQsT0FBT3FDLElBQUtoRyxLQUFLb0Qsd0JBRXRCcEQsS0FBSzZELGNBQWN2RCxTQUFTQyxLQUFNUCxLQUFLMEQsTUFDdkMxRCxLQUFLNkQsY0FBY29DLEdBQUd6QixJQUFLLEVBQUcsRUFBRyxHQUNqQ3hFLEtBQUs2RCxjQUFjb0MsR0FBR2pCLGFBQWNoRixLQUFLc0QsZ0JBQ3pDdEQsS0FBSzZELGNBQWNvQyxHQUFHSCxRQUFTOUYsS0FBS21ELFFBQ3BDbkQsS0FBSzZELGNBQWNxQyxPQUFRbEcsS0FBSzJELFFBRXpCckMsRUFBb0NnQixNQUUxQ3RDLEtBQUs2RCxjQUFjdkIsSUFBUWhCLEVBQW9DZ0IsS0FJaEV0QyxLQUFLNkQsY0FBY3NDLG9CQUNuQm5HLEtBQUs2RCxjQUFjdUMsaUJBQWlCN0YsS0FBTWUsRUFBTzhFLGtCQUdqRHBHLEtBQUsrQyxjQUFjeUIsSUFDbEIsR0FBSyxFQUFLLEVBQUssR0FDZixFQUFLLEdBQUssRUFBSyxHQUNmLEVBQUssRUFBSyxHQUFLLEdBQ2YsRUFBSyxFQUFLLEVBQUssR0FHaEJ4RSxLQUFLK0MsY0FBY3NELFNBQVVyRyxLQUFLNkQsY0FBY3VDLGtCQUNoRHBHLEtBQUsrQyxjQUFjc0QsU0FBVXJHLEtBQUs2RCxjQUFjeUMsb0JBQ2hEdEcsS0FBSytDLGNBQWNzRCxTQUFVckcsS0FBSzBGLGFBSWxDMUYsS0FBS2tELGVBQWVxRCw4QkFBK0J2RyxLQUFLbUQsT0FBUW5ELEtBQUtvRCx3QkFDckVwRCxLQUFLa0QsZUFBZThCLGFBQWNoRixLQUFLNkQsY0FBY3lDLG9CQUVyRHRHLEtBQUt3RCxVQUFVZ0IsSUFBS3hFLEtBQUtrRCxlQUFlQyxPQUFPbUIsRUFBR3RFLEtBQUtrRCxlQUFlQyxPQUFPb0IsRUFBR3ZFLEtBQUtrRCxlQUFlQyxPQUFPcUQsRUFBR3hHLEtBQUtrRCxlQUFldUQsVUFFbEksSUFBSUwsRUFBbUJwRyxLQUFLNkQsY0FBY3VDLGlCQUUxQ3BHLEtBQUs0RCxFQUFFVSxHQUFNb0MsS0FBS0MsS0FBTTNHLEtBQUt3RCxVQUFVYyxHQUFNOEIsRUFBaUJRLFNBQVUsSUFBUVIsRUFBaUJRLFNBQVUsR0FDM0c1RyxLQUFLNEQsRUFBRVcsR0FBTW1DLEtBQUtDLEtBQU0zRyxLQUFLd0QsVUFBVWUsR0FBTTZCLEVBQWlCUSxTQUFVLElBQVFSLEVBQWlCUSxTQUFVLEdBQzNHNUcsS0FBSzRELEVBQUU0QyxHQUFNLEVBQ2J4RyxLQUFLNEQsRUFBRWlELEdBQU0sRUFBTVQsRUFBaUJRLFNBQVUsS0FBU1IsRUFBaUJRLFNBQVUsSUFHbEY1RyxLQUFLd0QsVUFBVXNELGVBQWdCLEVBQU05RyxLQUFLd0QsVUFBVXFDLElBQUs3RixLQUFLNEQsSUFHOUR3QyxFQUFpQlEsU0FBVSxHQUFNNUcsS0FBS3dELFVBQVVjLEVBQ2hEOEIsRUFBaUJRLFNBQVUsR0FBTTVHLEtBQUt3RCxVQUFVZSxFQUNoRDZCLEVBQWlCUSxTQUFVLElBQU81RyxLQUFLd0QsVUFBVWdELEVBQUksRUFBTXhHLEtBQUt5RCxTQUNoRTJDLEVBQWlCUSxTQUFVLElBQU81RyxLQUFLd0QsVUFBVXFELEVBR2pELElBQUlFLEVBQXNCM0YsRUFBUzRGLGtCQUVuQzVGLEVBQVM2RixnQkFBaUJqSCxLQUFLcUYsY0FBY0MsS0FDN0N0RixLQUFLZ0MsU0FBVSxFQUVmWixFQUFTOEYsUUFDVDlGLEVBQVMrRixPQUFROUYsRUFBT3JCLEtBQUs2RCxlQUM3QnpDLEVBQVNnRyxhQUVUaEcsRUFBUzZGLGdCQUFpQkYsR0FDMUIvRyxLQUFLZ0MsU0FBVSxFQU1PLE1BQWpCaEMsS0FBSzhELFdBRVQ5RCxLQUFLOEQsU0FBVyxJQUFJLGlCQUFvQjFDLEVBQVUsQ0FDakRsQyxlQzlRTCw0UEQrUUtHLEtBQU0sY0FDSlcsS0FBSytELFlBSVQvRCxLQUFLOEQsU0FBU3FELE9BQVEsQ0FBRUUsSUFBS3JILEtBQUtxRixjQUFjQyxJQUFJcEQsU0FBV2xDLEtBQUtxRixjQUFjRSxRQUNsRnZGLEtBQUtLLGVBQWV3QyxjQUFjdkcsTUFBUTBELEtBQUtxRixjQUFjRSxPQUFPckQsUUFFcEUsSUFBSW9GLEVBQUtsRyxFQUFTNEYsa0JBRWJNLEVBRUp0SCxLQUFLSyxlQUFleUMsaUJBQWlCeEcsTUFBTWtJLElBQUs4QyxFQUFHQyxNQUFPRCxFQUFHRSxTQUs3RHBHLEVBQVNxRyxRQUFTekgsS0FBS0ssZUFBZXlDLGlCQUFpQnhHLE9BQ3ZEMEQsS0FBS0ssZUFBZXlDLGlCQUFpQnhHLE1BQU13SyxlQUFnQjFGLEVBQVNzRyxxQkFNdEUxSCxLQUFLMkgsU0FJRUEsU0FHUDNILEtBQUtxRixjQUFjQyxJQUFJc0MsUUFEWixTQUdYLElBQUlDLEVBQWEsSUFBSSxVQUFlQyxJQUh6QixLQUlYOUgsS0FBS3FGLGNBQWNFLE9BQU9xQyxRQUFTQyxFQUFXdkQsRUFBR3VELEVBQVd0RCxHQUM1RHZFLEtBQUtLLGVBQWUyQyxpQkFBaUIxRyxNQUFNaUUsS0FBTXNILE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Qb3dlck1lc2gvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL1Bvd2VyTWVzaC9leHRlcm5hbCB1bWQge1wiY29tbW9uanNcIjpcIm9yZS10aHJlZS10c1wiLFwiY29tbW9uanMyXCI6XCJvcmUtdGhyZWUtdHNcIixcImFtZFwiOlwib3JlLXRocmVlLXRzXCIsXCJyb290XCI6XCJPUkVcIn0iLCJ3ZWJwYWNrOi8vUG93ZXJNZXNoL2V4dGVybmFsIHVtZCB7XCJjb21tb25qc1wiOlwidGhyZWVcIixcImNvbW1vbmpzMlwiOlwidGhyZWVcIixcImFtZFwiOlwidGhyZWVcIixcInJvb3RcIjpcIlRIUkVFXCJ9Iiwid2VicGFjazovL1Bvd2VyTWVzaC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9Qb3dlck1lc2gvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL1Bvd2VyTWVzaC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL1Bvd2VyTWVzaC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL1Bvd2VyTWVzaC8uL3NyYy9Qb3dlck1lc2gvc2hhZGVycy9wb3dlci52cyIsIndlYnBhY2s6Ly9Qb3dlck1lc2gvLi9zcmMvUG93ZXJNZXNoL3NoYWRlcnMvcG93ZXIuZnMiLCJ3ZWJwYWNrOi8vUG93ZXJNZXNoLy4vc3JjL1Bvd2VyTWVzaC9pbmRleC50cyIsIndlYnBhY2s6Ly9Qb3dlck1lc2gvLi9zcmMvUG93ZXJSZWZsZWN0TWVzaC9pbmRleC50cyIsIndlYnBhY2s6Ly9Qb3dlck1lc2gvLi9zcmMvUG93ZXJSZWZsZWN0TWVzaC9zaGFkZXJzL21pcG1hcC5mcyJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJ0aHJlZVwiKSwgcmVxdWlyZShcIm9yZS10aHJlZS10c1wiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJ0aHJlZVwiLCBcIm9yZS10aHJlZS10c1wiXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJQb3dlck1lc2hcIl0gPSBmYWN0b3J5KHJlcXVpcmUoXCJ0aHJlZVwiKSwgcmVxdWlyZShcIm9yZS10aHJlZS10c1wiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wiUG93ZXJNZXNoXCJdID0gZmFjdG9yeShyb290W1wiVEhSRUVcIl0sIHJvb3RbXCJPUkVcIl0pO1xufSkoc2VsZiwgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMzgxX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzY0NF9fKSB7XG5yZXR1cm4gIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX182NDRfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzM4MV9fOyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiZXhwb3J0IGRlZmF1bHQgXCIjZGVmaW5lIEdMU0xJRlkgMVxcbmF0dHJpYnV0ZSB2ZWM0IHRhbmdlbnQ7XFxuXFxudmFyeWluZyB2ZWMyIHZVdjtcXG52YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG52YXJ5aW5nIHZlYzMgdlZpZXdOb3JtYWw7XFxudmFyeWluZyB2ZWMzIHZUYW5nZW50O1xcbnZhcnlpbmcgdmVjMyB2Qml0YW5nZW50O1xcbnZhcnlpbmcgdmVjMyB2Vmlld1BvcztcXG52YXJ5aW5nIHZlYzMgdldvcmxkUG9zO1xcbnZhcnlpbmcgdmVjMiB2SGlnaFByZWNpc2lvblpXO1xcblxcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcblxcdFNoYWRvd01hcFxcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xcblxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc192ZXJ0ZXg+XFxuXFxudm9pZCBtYWluKCB2b2lkICkge1xcblxcblxcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcblxcdFxcdFBvc2l0aW9uXFxuXFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXFxuXFxuXFx0dmVjMyBwb3MgPSBwb3NpdGlvbjtcXG5cXHR2ZWM0IHdvcmxkUG9zID0gbW9kZWxNYXRyaXggKiB2ZWM0KCBwb3MsIDEuMCApO1xcblxcdHZlYzQgbXZQb3NpdGlvbiA9IHZpZXdNYXRyaXggKiB3b3JsZFBvcztcXG5cXHRcXG5cXHRnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtdlBvc2l0aW9uO1xcblxcblxcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcblxcdFxcdE5vcm1hbCAvIFRhbmdlbnRcXG5cXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cXG5cXG5cXHR2ZWMzIHRyYW5zZm9ybWVkTm9ybWFsID0gbm9ybWFsTWF0cml4ICogbm9ybWFsO1xcblxcdHZlYzQgZmxpcGVkVGFuZ2VudCA9IHRhbmdlbnQ7XFxuXFx0ZmxpcGVkVGFuZ2VudC53ICo9IC0xLjA7XFxuXFxuXFx0I2lmZGVmIEZMSVBfU0lERURcXG5cXHRcXHR0cmFuc2Zvcm1lZE5vcm1hbCAqPSAtMS4wO1xcblxcdFxcdGZsaXBlZFRhbmdlbnQgKj0gLTEuMDtcXG5cXHQjZW5kaWZcXG5cXHRcXG5cXHR2ZWMzIG5vcm1hbCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWROb3JtYWwgKTtcXG5cXHR2ZWMzIHRhbmdlbnQgPSBub3JtYWxpemUoICggbW9kZWxWaWV3TWF0cml4ICogdmVjNCggZmxpcGVkVGFuZ2VudC54eXosIDAuMCApICkueHl6ICk7XFxuXFx0dmVjMyBiaVRhbmdlbnQgPSBub3JtYWxpemUoIGNyb3NzKCBub3JtYWwsIHRhbmdlbnQgKSAqIGZsaXBlZFRhbmdlbnQudyApO1xcblxcblxcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcblxcdFxcdFNoYWRvd1xcblxcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xcblxcdFxcblxcdHZlYzQgc2hhZG93V29ybGRQb3M7XFxuXFx0XFxuXFx0I2lmIGRlZmluZWQoIFVTRV9TSEFET1dNQVAgKSAmJiBOVU1fRElSX0xJR0hUX1NIQURPV1MgPiAwXFxuXFx0XFxuXFx0XFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxcblxcdFxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9ESVJfTElHSFRfU0hBRE9XUzsgaSArKyApIHtcXG5cXHRcXHRcXHRcXG5cXHRcXHRcXHRzaGFkb3dXb3JsZFBvcyA9IHdvcmxkUG9zICsgdmVjNCggdmVjNCggdHJhbnNmb3JtZWROb3JtYWwsIDAuMCApICogbW9kZWxNYXRyaXggKSAqIGRpcmVjdGlvbmFsTGlnaHRTaGFkb3dzWyBpIF0uc2hhZG93Tm9ybWFsQmlhcztcXG5cXHRcXHRcXHR2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgaSBdID0gZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXhbIGkgXSAqIHNoYWRvd1dvcmxkUG9zO1xcblxcdFxcdFxcdFxcblxcdFxcdH1cXG5cXHRcXHQjcHJhZ21hIHVucm9sbF9sb29wX2VuZFxcblxcdFxcdFxcblxcdCNlbmRpZlxcblxcblxcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcblxcdFxcdFZhcnlpbmdcXG5cXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cXG5cXHRcXG5cXHR2VXYgPSB1djtcXG5cXHR2Tm9ybWFsID0gbm9ybWFsO1xcblxcdHZUYW5nZW50ID0gdGFuZ2VudDtcXG5cXHR2Qml0YW5nZW50ID0gYmlUYW5nZW50O1xcblxcdHZWaWV3UG9zID0gLW12UG9zaXRpb24ueHl6O1xcblxcdHZXb3JsZFBvcyA9IHdvcmxkUG9zLnh5ejtcXG5cXHR2SGlnaFByZWNpc2lvblpXID0gZ2xfUG9zaXRpb24uenc7XFxuXFx0XFxufVwiOyIsImV4cG9ydCBkZWZhdWx0IFwiI2RlZmluZSBHTFNMSUZZIDFcXG52YXJ5aW5nIHZlYzIgdlV2O1xcbnZhcnlpbmcgdmVjMyB2VGFuZ2VudDtcXG52YXJ5aW5nIHZlYzMgdkJpdGFuZ2VudDtcXG5cXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXG5cXHRSZXF1aXJlXFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXFxuXFxuI2RlZmluZSBQSSAzLjE0MTU5MjY1MzU5XFxuI2RlZmluZSBUUEkgNi4yODMxODUzMDcxOFxcbiNkZWZpbmUgSFBJIDEuNTcwNzk2MzI2NzlcXG5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG5cXG52ZWMyIHBhY2tpbmcxNiggZmxvYXQgdmFsdWUgKSB7IFxcblxcblxcdGZsb2F0IHYxID0gdmFsdWUgKiAyNTUuMDtcXG5cXHRmbG9hdCByID0gZmxvb3IodjEpO1xcblxcblxcdGZsb2F0IHYyID0gKCB2MSAtIHIgKSAqIDI1NS4wO1xcblxcdGZsb2F0IGcgPSBmbG9vciggdjIgKTtcXG5cXG5cXHRyZXR1cm4gdmVjMiggciwgZyApIC8gMjU1LjA7XFxuXFxufVxcblxcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcblxcdFJlcXVpZXJzXFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXFxuXFxuZmxvYXQgcmFuZG9tKHZlYzIgcCl7XFxuXFx0cmV0dXJuIGZyYWN0KHNpbihkb3QocC54eSAsdmVjMigxMi45ODk4LDc4LjIzMykpKSAqIDQzNzU4LjU0NTMpO1xcbn1cXG5cXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXG5cXHRNYXRlcmlhbCBVbmlmb3Jtc1xcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xcblxcbnVuaWZvcm0gZmxvYXQgdGltZTtcXG5cXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXG5cXHRUZXh0dXJlc1xcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xcblxcbiNpZmRlZiBVU0VfTUFQXFxuXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgbWFwO1xcblxcbiNlbHNlXFxuXFxuXFx0dW5pZm9ybSB2ZWMzIGNvbG9yO1xcblxcbiNlbmRpZlxcblxcbiNpZmRlZiBVU0VfTk9STUFMX01BUFxcblxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIG5vcm1hbE1hcDtcXG5cXG4jZW5kaWZcXG5cXG4jaWZkZWYgVVNFX1JPVUdITkVTU19NQVBcXG5cXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCByb3VnaG5lc3NNYXA7XFxuXFxuI2Vsc2VcXG5cXG5cXHR1bmlmb3JtIGZsb2F0IHJvdWdobmVzcztcXG5cXG4jZW5kaWZcXG5cXG4jaWZkZWYgVVNFX0FMUEhBX01BUFxcblxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGFscGhhTWFwO1xcblxcbiNlbHNlXFxuXFxuXFx0dW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcblxcdFxcbiNlbmRpZlxcblxcbiNpZmRlZiBVU0VfTUVUQUxORVNTX01BUFxcblxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIG1ldGFsbmVzc01hcDtcXG5cXG4jZWxzZVxcblxcblxcdHVuaWZvcm0gZmxvYXQgbWV0YWxuZXNzO1xcblxcbiNlbmRpZlxcbiNpZmRlZiBVU0VfRU1JU1NJT05fTUFQXFxuXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgZW1pc3Npb25NYXA7XFxuXFxuI2Vsc2VcXG5cXG5cXHR1bmlmb3JtIHZlYzMgZW1pc3Npb247XFxuXFxuI2VuZGlmXFxuXFxuI2lmZGVmIFJFRkxFQ1RQTEFORVxcblxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIHJlZmxlY3Rpb25UZXg7XFxuXFx0dW5pZm9ybSB2ZWMyIHJlbmRlclJlc29sdXRpb247XFxuXFx0dW5pZm9ybSB2ZWMyIG1pcE1hcFJlc29sdXRpb247XFxuXFx0XFxuI2VuZGlmXFxuXFxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXFxuXFx0VHlwZXNcXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cXG5cXG5zdHJ1Y3QgR2VvbWV0cnkge1xcblxcdHZlYzMgcG9zO1xcblxcdHZlYzMgcG9zV29ybGQ7XFxuXFx0dmVjMyB2aWV3RGlyO1xcblxcdHZlYzMgdmlld0RpcldvcmxkO1xcblxcdHZlYzMgbm9ybWFsO1xcblxcdHZlYzMgbm9ybWFsV29ybGQ7XFxufTtcXG5cXG5zdHJ1Y3QgTGlnaHQge1xcblxcdHZlYzMgZGlyZWN0aW9uO1xcblxcdHZlYzMgY29sb3I7XFxufTtcXG5cXG5zdHJ1Y3QgTWF0ZXJpYWwge1xcblxcdHZlYzMgYWxiZWRvO1xcblxcdHZlYzMgZGlmZnVzZUNvbG9yO1xcblxcdHZlYzMgc3BlY3VsYXJDb2xvcjtcXG5cXHRmbG9hdCBtZXRhbG5lc3M7XFxuXFx0ZmxvYXQgcm91Z2huZXNzO1xcblxcdGZsb2F0IG9wYWNpdHk7XFxufTtcXG5cXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXG5cXHRMaWdodHNcXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cXG5cXG4jaWYgTlVNX0RJUl9MSUdIVFMgPiAwXFxuXFxuXFx0c3RydWN0IERpcmVjdGlvbmFsTGlnaHQge1xcblxcdFxcdHZlYzMgZGlyZWN0aW9uO1xcblxcdFxcdHZlYzMgY29sb3I7XFxuXFx0fTtcXG5cXG5cXHR1bmlmb3JtIERpcmVjdGlvbmFsTGlnaHQgZGlyZWN0aW9uYWxMaWdodHNbIE5VTV9ESVJfTElHSFRTIF07XFxuXFxuI2VuZGlmXFxuXFxuI2lmIE5VTV9QT0lOVF9MSUdIVFMgPiAwXFxuXFxuXFx0c3RydWN0IFBvaW50TGlnaHQge1xcblxcdFxcdHZlYzMgcG9zaXRpb247XFxuXFx0XFx0dmVjMyBjb2xvcjtcXG5cXHRcXHRmbG9hdCBkaXN0YW5jZTtcXG5cXHRcXHRmbG9hdCBkZWNheTtcXG5cXHR9O1xcblxcblxcdHVuaWZvcm0gUG9pbnRMaWdodCBwb2ludExpZ2h0c1sgTlVNX1BPSU5UX0xJR0hUUyBdO1xcblxcbiNlbmRpZlxcblxcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcblxcdEVudk1hcFxcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xcblxcbnVuaWZvcm0gc2FtcGxlcjJEIGVudk1hcDtcXG51bmlmb3JtIGZsb2F0IGVudk1hcEludGVuc2l0eTtcXG51bmlmb3JtIGZsb2F0IGlibEludGVuc2l0eTtcXG51bmlmb3JtIGZsb2F0IG1heExvZExldmVsO1xcblxcbiNkZWZpbmUgRU5WTUFQX1RZUEVfQ1VCRV9VVlxcbiNpbmNsdWRlIDxjdWJlX3V2X3JlZmxlY3Rpb25fZnJhZ21lbnQ+XFxuXFxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXFxuXFx0UmVmbGVjdGlvblxcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xcblxcbiNkZWZpbmUgUkVGX01JUE1BUF9MRVZFTCA4LjBcXG5cXG4jaWZkZWYgUkVGTEVDVFBMQU5FXFxuXFxuXFx0dW5pZm9ybSB2ZWMzIGE7XFxuXFxuXFx0dmVjMiBnZXRSZWZNaXBtYXBVViggdmVjMiB1diwgZmxvYXQgbGV2ZWwgKSB7XFxuXFxuXFx0XFx0dmVjMiBydXYgPSB1djtcXG5cXG5cXHRcXHRpZiggbGV2ZWwgPiAwLjAgKSB7XFxuXFxuXFx0XFx0XFx0cnV2LnggKj0gMS4wIC8gKCAzLjAgKiAoIHBvdyggMi4wLCBsZXZlbCApIC8gMi4wICkgKTtcXG5cXHRcXHRcXHRydXYueSAqPSAxLjAgLyAoIHBvdyggMi4wLCBsZXZlbCApICk7XFxuXFx0XFx0XFx0cnV2LnkgKz0gMS4wIC8gKCBwb3coIDIuMCwgbGV2ZWwgKSApO1xcblxcdFxcdFxcdHJ1di54ICs9IDEuMCAvIDEuNTtcXG5cXHRcXHRcXG5cXHRcXHR9IGVsc2Uge1xcblxcblxcdFxcdFxcdHJ1di54IC89IDEuNTtcXG5cXHRcXHRcXHRcXG5cXHRcXHR9XFxuXFxuXFx0XFx0cmV0dXJuIHJ1djtcXG5cXG5cXHR9XFxuXFx0XFxuXFx0dmVjNCBjdWJpYyhmbG9hdCB2KSB7XFxuXFx0XFx0dmVjNCBuID0gdmVjNCgxLjAsIDIuMCwgMy4wLCA0LjApIC0gdjtcXG5cXHRcXHR2ZWM0IHMgPSBuICogbiAqIG47XFxuXFx0XFx0ZmxvYXQgeCA9IHMueDtcXG5cXHRcXHRmbG9hdCB5ID0gcy55IC0gNC4wICogcy54O1xcblxcdFxcdGZsb2F0IHogPSBzLnogLSA0LjAgKiBzLnkgKyA2LjAgKiBzLng7XFxuXFx0XFx0ZmxvYXQgdyA9IDYuMCAtIHggLSB5IC0gejtcXG5cXHRcXHRyZXR1cm4gdmVjNCh4LCB5LCB6LCB3KTtcXG5cXHR9XFxuXFxuXFx0Ly8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTM1MDEwODEvZWZmaWNpZW50LWJpY3ViaWMtZmlsdGVyaW5nLWNvZGUtaW4tZ2xzbFxcblxcdHZlYzQgdGV4dHVyZUJpY3ViaWMoc2FtcGxlcjJEIHQsIHZlYzIgdGV4Q29vcmRzLCB2ZWMyIHRleHR1cmVTaXplKSB7XFxuXFx0XFx0dmVjMiBpbnZUZXhTaXplID0gMS4wIC8gdGV4dHVyZVNpemU7XFxuXFx0XFx0dGV4Q29vcmRzID0gdGV4Q29vcmRzICogdGV4dHVyZVNpemUgLSAwLjU7XFxuXFx0XFx0dmVjMiBmeHkgPSBmcmFjdCh0ZXhDb29yZHMpO1xcblxcdFxcdHRleENvb3JkcyAtPSBmeHk7XFxuXFx0XFx0dmVjNCB4Y3ViaWMgPSBjdWJpYyhmeHkueCk7XFxuXFx0XFx0dmVjNCB5Y3ViaWMgPSBjdWJpYyhmeHkueSk7XFxuXFx0XFx0dmVjNCBjID0gdGV4Q29vcmRzLnh4eXkgKyB2ZWMyICgtMC41LCAxLjUpLnh5eHk7XFxuXFx0XFx0dmVjNCBzID0gdmVjNCh4Y3ViaWMueHogKyB4Y3ViaWMueXcsIHljdWJpYy54eiArIHljdWJpYy55dyk7XFxuXFx0XFx0dmVjNCBvZmZzZXQgPSBjICsgdmVjNCAoeGN1YmljLnl3LCB5Y3ViaWMueXcpIC8gcztcXG5cXHRcXHRvZmZzZXQgKj0gaW52VGV4U2l6ZS54eHl5O1xcblxcdFxcdHZlYzQgc2FtcGxlMCA9IHRleHR1cmUyRCh0LCBvZmZzZXQueHopO1xcblxcdFxcdHZlYzQgc2FtcGxlMSA9IHRleHR1cmUyRCh0LCBvZmZzZXQueXopO1xcblxcdFxcdHZlYzQgc2FtcGxlMiA9IHRleHR1cmUyRCh0LCBvZmZzZXQueHcpO1xcblxcdFxcdHZlYzQgc2FtcGxlMyA9IHRleHR1cmUyRCh0LCBvZmZzZXQueXcpO1xcblxcdFxcdGZsb2F0IHN4ID0gcy54IC8gKHMueCArIHMueSk7XFxuXFx0XFx0ZmxvYXQgc3kgPSBzLnogLyAocy56ICsgcy53KTtcXG5cXHRcXHRyZXR1cm4gbWl4KFxcblxcdFxcdG1peChzYW1wbGUzLCBzYW1wbGUyLCBzeCksIG1peChzYW1wbGUxLCBzYW1wbGUwLCBzeCksIHN5KTtcXG5cXHR9XFxuXFxuI2VuZGlmXFxuXFxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXFxuXFx0U2hhZG93XFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXFxuXFxuI2lmZGVmIERFUFRIXFxuXFxuXFx0dmFyeWluZyB2ZWMyIHZIaWdoUHJlY2lzaW9uWlc7XFxuXFx0dW5pZm9ybSBmbG9hdCBjYW1lcmFOZWFyO1xcblxcdHVuaWZvcm0gZmxvYXQgY2FtZXJhRmFyO1xcblxcbiNlbmRpZlxcblxcbiNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXFxuI2lmIE5VTV9ESVJfTElHSFRfU0hBRE9XUyA+IDBcXG5cXG5cXHRcXHR1bmlmb3JtIHNhbXBsZXIyRCBkaXJlY3Rpb25hbFNoYWRvd01hcFsgTlVNX0RJUl9MSUdIVF9TSEFET1dTIF07XFxuXFx0XFx0dmFyeWluZyB2ZWM0IHZEaXJlY3Rpb25hbFNoYWRvd0Nvb3JkWyBOVU1fRElSX0xJR0hUX1NIQURPV1MgXTtcXG5cXG5cXHRcXHRzdHJ1Y3QgRGlyZWN0aW9uYWxMaWdodFNoYWRvdyB7XFxuXFx0XFx0XFx0ZmxvYXQgc2hhZG93QmlhcztcXG5cXHRcXHRcXHRmbG9hdCBzaGFkb3dOb3JtYWxCaWFzO1xcblxcdFxcdFxcdGZsb2F0IHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHR2ZWMyIHNoYWRvd01hcFNpemU7XFxuXFx0XFx0fTtcXG5cXG5cXHRcXHR1bmlmb3JtIERpcmVjdGlvbmFsTGlnaHRTaGFkb3cgZGlyZWN0aW9uYWxMaWdodFNoYWRvd3NbIE5VTV9ESVJfTElHSFRfU0hBRE9XUyBdO1xcblxcblxcdCNlbmRpZlxcblxcblxcdCNkZWZpbmUgU0hBRE9XX1NBTVBMRV9DT1VOVCA0XFxuXFxuXFx0dmVjMiBwb2lzc29uRGlza1sgU0hBRE9XX1NBTVBMRV9DT1VOVCBdO1xcblxcblxcdHZvaWQgaW5pdFBvaXNzb25EaXNrKCBmbG9hdCBzZWVkICkge1xcblxcblxcdFxcdGZsb2F0IHIgPSAwLjE7XFxuXFx0XFx0ZmxvYXQgclN0ZXAgPSAoMS4wIC0gcikgLyBmbG9hdCggU0hBRE9XX1NBTVBMRV9DT1VOVCApO1xcblxcblxcdFxcdGZsb2F0IGFuZyA9IHJhbmRvbSggZ2xfRnJhZ0Nvb3JkLnh5ICogMC4wMSArIHNpbiggdGltZSApICkgKiBUUEkgKiAxLjA7XFxuXFx0XFx0ZmxvYXQgYW5nU3RlcCA9ICggKCBUUEkgKiAxMS4wICkgLyBmbG9hdCggU0hBRE9XX1NBTVBMRV9DT1VOVCApICk7XFxuXFx0XFx0XFxuXFx0XFx0Zm9yKCBpbnQgaSA9IDA7IGkgPCBTSEFET1dfU0FNUExFX0NPVU5UOyBpKysgKSB7XFxuXFxuXFx0XFx0XFx0cG9pc3NvbkRpc2tbIGkgXSA9IHZlYzIoXFxuXFx0XFx0XFx0XFx0c2luKCBhbmcgKSxcXG5cXHRcXHRcXHRcXHRjb3MoIGFuZyApXFxuXFx0XFx0XFx0KSAqIHBvdyggciwgMC43NSApO1xcblxcblxcdFxcdFxcdHIgKz0gclN0ZXA7XFxuXFx0XFx0XFx0YW5nICs9IGFuZ1N0ZXA7XFxuXFx0XFx0fVxcblxcdFxcdFxcblxcdH1cXG5cXG5cXHR2ZWMyIGNvbXBhaXJTaGFkb3dNYXBEZXB0aCggc2FtcGxlcjJEIHNoYWRvd01hcCwgdmVjMiBzaGFkb3dNYXBVViwgZmxvYXQgZGVwdGggKSB7XFxuXFxuXFx0XFx0aWYoIHNoYWRvd01hcFVWLnggPCAwLjAgfHwgc2hhZG93TWFwVVYueCA+IDEuMCB8fCBzaGFkb3dNYXBVVi55IDwgMC4wIHx8IHNoYWRvd01hcFVWLnkgPiAxLjAgKSB7XFxuXFxuXFx0XFx0XFx0cmV0dXJuIHZlYzIoIDEuMCwgMC4wICk7XFxuXFxuXFx0XFx0fVxcblxcblxcdFxcdGZsb2F0IHNoYWRvd01hcERlcHRoID0gdW5wYWNrUkdCQVRvRGVwdGgoIHRleHR1cmUyRCggc2hhZG93TWFwLCBzaGFkb3dNYXBVViApICk7XFxuXFxuXFx0XFx0aWYoIDAuMCA+PSBzaGFkb3dNYXBEZXB0aCB8fCBzaGFkb3dNYXBEZXB0aCA+PSAxLjAgKSB7XFxuXFxuXFx0XFx0XFx0cmV0dXJuIHZlYzIoIDEuMCwgMC4wICk7XFxuXFxuXFx0XFx0fVxcblxcdFxcdFxcblxcdFxcdGZsb2F0IHNoYWRvdyA9IGRlcHRoIDw9IHNoYWRvd01hcERlcHRoID8gMS4wIDogMC4wO1xcblxcblxcdFxcdHJldHVybiB2ZWMyKCBzaGFkb3csIHNoYWRvd01hcERlcHRoICk7XFxuXFx0XFx0XFxuXFx0fVxcblxcblxcdGZsb2F0IHNoYWRvd01hcFBDRiggc2FtcGxlcjJEIHNoYWRvd01hcCwgdmVjNCBzaGFkb3dNYXBDb29yZCwgdmVjMiBzaGFkb3dTaXplICkge1xcblxcblxcdFxcdGZsb2F0IHNoYWRvdyA9IDAuMDtcXG5cXHRcXHRcXG5cXHRcXHRmb3IoIGludCBpID0gMDsgaSA8IFNIQURPV19TQU1QTEVfQ09VTlQ7IGkgKysgICkge1xcblxcdFxcdFxcdFxcblxcdFxcdFxcdHZlYzIgb2Zmc2V0ID0gcG9pc3NvbkRpc2tbIGkgXSAqIHNoYWRvd1NpemU7IFxcblxcblxcdFxcdFxcdHNoYWRvdyArPSBjb21wYWlyU2hhZG93TWFwRGVwdGgoIHNoYWRvd01hcCwgc2hhZG93TWFwQ29vcmQueHkgKyBvZmZzZXQsIHNoYWRvd01hcENvb3JkLnogKS54O1xcblxcdFxcdFxcdFxcblxcdFxcdH1cXG5cXG5cXHRcXHRzaGFkb3cgLz0gZmxvYXQoIFNIQURPV19TQU1QTEVfQ09VTlQgKTtcXG5cXG5cXHRcXHRyZXR1cm4gc2hhZG93O1xcblxcblxcdH1cXG5cXG5cXHRmbG9hdCBnZXRTaGFkb3coIHNhbXBsZXIyRCBzaGFkb3dNYXAsIHZlYzIgc2hhZG93TWFwU2l6ZSwgZmxvYXQgYmlhcywgdmVjNCBzaGFkb3dNYXBDb29yZCApIHtcXG5cXHRcXHRcXG5cXHRcXHRzaGFkb3dNYXBDb29yZC54eXogLz0gc2hhZG93TWFwQ29vcmQudztcXG5cXHRcXHRzaGFkb3dNYXBDb29yZC56ICs9IGJpYXMgLSAwLjAwMDE7XFxuXFxuXFx0XFx0aW5pdFBvaXNzb25EaXNrKHRpbWUpO1xcblxcblxcdFxcdHZlYzIgc2hhZG93U2l6ZSA9IDEuMCAvIHNoYWRvd01hcFNpemU7XFxuXFxuXFx0XFx0cmV0dXJuIHNoYWRvd01hcFBDRiggc2hhZG93TWFwLCBzaGFkb3dNYXBDb29yZCwgc2hhZG93U2l6ZSApO1xcblxcblxcdH1cXG5cXG4jZW5kaWZcXG5cXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXG5cXHRSRVxcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xcblxcbnZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbnZhcnlpbmcgdmVjMyB2Vmlld05vcm1hbDtcXG52YXJ5aW5nIHZlYzMgdlZpZXdQb3M7XFxudmFyeWluZyB2ZWMzIHZXb3JsZFBvcztcXG5cXG5mbG9hdCBnZ3goIGZsb2F0IGROSCwgZmxvYXQgcm91Z2huZXNzICkge1xcblxcdFxcblxcdGZsb2F0IGEyID0gcm91Z2huZXNzICogcm91Z2huZXNzO1xcblxcdGEyID0gYTIgKiBhMjtcXG5cXHRmbG9hdCBkTkgyID0gZE5IICogZE5IO1xcblxcblxcdGlmKCBkTkgyIDw9IDAuMCApIHJldHVybiAwLjA7XFxuXFxuXFx0cmV0dXJuIGEyIC8gKCBQSSAqIHBvdyggZE5IMiAqICggYTIgLSAxLjAgKSArIDEuMCwgMi4wKSApO1xcblxcbn1cXG5cXG52ZWMzIGxhbWJlcnQoIHZlYzMgZGlmZnVzZUNvbG9yICkge1xcblxcblxcdHJldHVybiBkaWZmdXNlQ29sb3IgLyBQSTtcXG5cXG59XFxuXFxuZmxvYXQgZ1NjaGxpY2soIGZsb2F0IGQsIGZsb2F0IGsgKSB7XFxuXFxuXFx0aWYoIGQgPT0gMC4wICkgcmV0dXJuIDAuMDtcXG5cXG5cXHRyZXR1cm4gZCAvICggZCAqICggMS4wIC0gayApICsgayApO1xcblxcdFxcbn1cXG5cXG5mbG9hdCBnU21pdGgoIGZsb2F0IGROViwgZmxvYXQgZE5MLCBmbG9hdCByb3VnaG5lc3MgKSB7XFxuXFxuXFx0ZmxvYXQgayA9IGNsYW1wKCByb3VnaG5lc3MgKiBzcXJ0KCAyLjAgLyBQSSApLCAwLjAsIDEuMCApO1xcblxcblxcdHJldHVybiBnU2NobGljayggZE5WLCBrICkgKiBnU2NobGljayggZE5MLCBrICk7XFxuXFx0XFxufVxcblxcbmZsb2F0IGZyZXNuZWwoIGZsb2F0IGQgKSB7XFxuXFx0XFxuXFx0ZmxvYXQgZjAgPSAwLjA0O1xcblxcblxcdHJldHVybiBmMCArICggMS4wIC0gZjAgKSAqIHBvdyggMS4wIC0gZCwgNS4wICk7XFxuXFxufVxcblxcbnZlYzMgUkUoIEdlb21ldHJ5IGdlbywgTWF0ZXJpYWwgbWF0LCBMaWdodCBsaWdodCkge1xcblxcblxcdHZlYzMgbGlnaHREaXIgPSBub3JtYWxpemUoIGxpZ2h0LmRpcmVjdGlvbiApO1xcblxcdHZlYzMgaGFsZlZlYyA9IG5vcm1hbGl6ZSggZ2VvLnZpZXdEaXIgKyBsaWdodERpciApO1xcblxcblxcdGZsb2F0IGRMSCA9IGNsYW1wKCBkb3QoIGxpZ2h0RGlyLCBoYWxmVmVjICksIDAuMCwgMS4wICk7XFxuXFx0ZmxvYXQgZE5IID0gY2xhbXAoIGRvdCggZ2VvLm5vcm1hbCwgaGFsZlZlYyApLCAwLjAsIDEuMCApO1xcblxcdGZsb2F0IGROViA9IGNsYW1wKCBkb3QoIGdlby5ub3JtYWwsIGdlby52aWV3RGlyICksIDAuMCwgMS4wICk7XFxuXFx0ZmxvYXQgZE5MID0gY2xhbXAoIGRvdCggZ2VvLm5vcm1hbCwgbGlnaHREaXIpLCAwLjAsIDEuMCApO1xcblxcblxcdHZlYzMgaXJyYWRpYW5jZSA9IGxpZ2h0LmNvbG9yICogZE5MO1xcblxcblxcdC8vIGRpZmZ1c2VcXG5cXHR2ZWMzIGRpZmZ1c2UgPSBsYW1iZXJ0KCBtYXQuZGlmZnVzZUNvbG9yICkgKiBpcnJhZGlhbmNlO1xcblxcblxcdC8vIHNwZWN1bGFyXFxuXFx0ZmxvYXQgRCA9IGdneCggZE5ILCBtYXQucm91Z2huZXNzICk7XFxuXFx0ZmxvYXQgRyA9IGdTbWl0aCggZE5WLCBkTkwsIG1hdC5yb3VnaG5lc3MgKTtcXG5cXHRmbG9hdCBGID0gZnJlc25lbCggZExIICk7XFxuXFx0XFxuXFx0dmVjMyBzcGVjdWxhciA9ICgoIEQgKiBHICogRiApIC8gKCA0LjAgKiBkTkwgKiBkTlYgKyAwLjAwMDEgKSAqIG1hdC5zcGVjdWxhckNvbG9yICkgKiBpcnJhZGlhbmNlOyBcXG5cXG5cXHR2ZWMzIGMgPSB2ZWMzKCAwLjAgKTtcXG5cXHRjICs9IGRpZmZ1c2UgKiAoIDEuMCAtIEYgKSArIHNwZWN1bGFyO1xcblxcblxcdHJldHVybiBjO1xcblxcbn1cXG5cXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXG5cXHRNYWluXFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXFxuXFxudm9pZCBtYWluKCB2b2lkICkge1xcblxcblxcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcblxcdFxcdE1hdGVyaWFsXFxuXFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXFxuXFxuXFx0TWF0ZXJpYWwgbWF0O1xcblxcblxcdCNpZmRlZiBVU0VfTUFQXFxuXFxuXFx0XFx0dmVjNCBjb2xvciA9IExpbmVhclRvc1JHQiggdGV4dHVyZTJEKCBtYXAsIHZVdiApICk7XFxuXFx0XFx0bWF0LmFsYmVkbyA9IGNvbG9yLnh5ejtcXG5cXG5cXHQjZWxzZVxcblxcblxcdFxcdG1hdC5hbGJlZG8gPSBjb2xvci54eXo7XFxuXFx0XFx0bWF0Lm9wYWNpdHkgPSAxLjA7XFxuXFx0XFxuXFx0I2VuZGlmXFxuXFxuXFx0I2lmZGVmIFVTRV9ST1VHSE5FU1NfTUFQXFxuXFxuXFx0XFx0bWF0LnJvdWdobmVzcyA9IHRleHR1cmUyRCggcm91Z2huZXNzTWFwLCB2VXYgKS55O1xcblxcblxcdCNlbHNlXFxuXFxuXFx0XFx0bWF0LnJvdWdobmVzcyA9IHJvdWdobmVzcztcXG5cXHRcXG5cXHQjZW5kaWZcXG5cXG5cXHQjaWZkZWYgVVNFX01FVEFMTkVTU19NQVBcXG5cXG5cXHRcXHRtYXQubWV0YWxuZXNzID0gdGV4dHVyZTJEKCBtZXRhbG5lc3NNYXAsIHZVdiApLno7XFxuXFxuXFx0I2Vsc2VcXG5cXG5cXHRcXHRtYXQubWV0YWxuZXNzID0gbWV0YWxuZXNzO1xcblxcdFxcblxcdCNlbmRpZlxcblxcblxcdCNpZmRlZiBVU0VfQUxQSEFfTUFQXFxuXFxuXFx0XFx0bWF0Lm9wYWNpdHkgPSB0ZXh0dXJlMkQoIGFscGhhTWFwLCB2VXYgKS54O1xcblxcblxcdCNlbHNlXFxuXFxuXFx0XFx0bWF0Lm9wYWNpdHkgPSBvcGFjaXR5O1xcblxcblxcdCNlbmRpZlxcblxcdFxcblxcdGlmKCBtYXQub3BhY2l0eSA8IDAuNSApIGRpc2NhcmQ7XFxuXFxuXFx0bWF0LmRpZmZ1c2VDb2xvciA9IG1peCggbWF0LmFsYmVkbywgdmVjMyggMC4wLCAwLjAsIDAuMCApLCBtYXQubWV0YWxuZXNzICk7XFxuXFx0bWF0LnNwZWN1bGFyQ29sb3IgPSBtaXgoIHZlYzMoIDEuMCwgMS4wLCAxLjAgKSwgbWF0LmFsYmVkbywgbWF0Lm1ldGFsbmVzcyApO1xcblxcblxcdC8vIG91dHB1dFxcblxcdHZlYzMgb3V0Q29sb3IgPSB2ZWMzKCAwLjAgKTtcXG5cXHRmbG9hdCBvdXRPcGFjaXR5ID0gbWF0Lm9wYWNpdHk7XFxuXFxuXFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXFxuXFx0XFx0RGVwdGhcXG5cXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cXG5cXG5cXHQjaWZkZWYgREVQVEhcXG5cXG5cXHRcXHRmbG9hdCBmcmFnQ29vcmRaID0gMC41ICogdkhpZ2hQcmVjaXNpb25aVy54IC8gdkhpZ2hQcmVjaXNpb25aVy55ICsgMC41O1xcblxcdFxcdGdsX0ZyYWdDb2xvciA9IHBhY2tEZXB0aFRvUkdCQSggZnJhZ0Nvb3JkWiApO1xcblxcdFxcdHJldHVybjtcXG5cXHRcXG5cXHQjZW5kaWZcXG5cXG5cXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXG5cXHRcXHRHZW9tZXRyeVxcblxcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xcblxcblxcdGZsb2F0IGZhY2VEaXJlY3Rpb24gPSBnbF9Gcm9udEZhY2luZyA/IDEuMCA6IC0xLjA7XFxuXFxuXFx0R2VvbWV0cnkgZ2VvO1xcblxcdGdlby5wb3MgPSAtdlZpZXdQb3M7XFxuXFx0Z2VvLnBvc1dvcmxkID0gdldvcmxkUG9zO1xcblxcdGdlby52aWV3RGlyID0gbm9ybWFsaXplKCB2Vmlld1BvcyApO1xcblxcdGdlby52aWV3RGlyV29ybGQgPSBub3JtYWxpemUoIGdlby5wb3NXb3JsZCAtIGNhbWVyYVBvc2l0aW9uICk7XFxuXFx0Z2VvLm5vcm1hbCA9IG5vcm1hbGl6ZSggdk5vcm1hbCApICogZmFjZURpcmVjdGlvbjtcXG5cXG5cXHQjaWZkZWYgVVNFX05PUk1BTF9NQVBcXG5cXHRcXHRcXG5cXHRcXHR2ZWMzIHRhbmdlbnQgPSBub3JtYWxpemUoIHZUYW5nZW50ICk7XFxuXFx0XFx0dmVjMyBiaXRhbmdlbnQgPSBub3JtYWxpemUoIHZCaXRhbmdlbnQgKTtcXG5cXG5cXHRcXHQjaWZkZWYgRE9VQkxFX1NJREVEXFxuXFxuXFx0XFx0XFx0dGFuZ2VudCAqPSBmYWNlRGlyZWN0aW9uO1xcblxcdFxcdFxcdGJpdGFuZ2VudCAqPSBmYWNlRGlyZWN0aW9uO1xcblxcdFxcdFxcblxcdFxcdCNlbmRpZlxcblxcdFxcdFxcblxcdFxcdG1hdDMgdlRCTiA9IG1hdDMoIHRhbmdlbnQsIGJpdGFuZ2VudCwgZ2VvLm5vcm1hbCApO1xcblxcdFxcdFxcblxcdFxcdHZlYzMgbWFwTiA9IHRleHR1cmUyRCggbm9ybWFsTWFwLCB2VXYgKS54eXo7XFxuXFx0XFx0bWFwTiA9IG1hcE4gKiAyLjAgLSAxLjA7XFxuXFx0XFx0Z2VvLm5vcm1hbCA9IG5vcm1hbGl6ZSggdlRCTiAqIG1hcE4gKTtcXG5cXG5cXHQjZW5kaWZcXG5cXHRcXG5cXHRnZW8ubm9ybWFsV29ybGQgPSBub3JtYWxpemUoICggdmVjNCggZ2VvLm5vcm1hbCwgMC4wICkgKiB2aWV3TWF0cml4ICkueHl6ICk7XFxuXFxuXFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXFxuXFx0XFx0TGlnaHRpbmdcXG5cXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cXG5cXHRcXG5cXHRMaWdodCBsaWdodDtcXG5cXG5cXHQjaWYgTlVNX0RJUl9MSUdIVFMgPiAwXFxuXFxuXFx0XFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxcblxcdFxcdFxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9ESVJfTElHSFRTOyBpICsrICkge1xcblxcblxcdFxcdFxcdFxcdGxpZ2h0LmRpcmVjdGlvbiA9IGRpcmVjdGlvbmFsTGlnaHRzWyBpIF0uZGlyZWN0aW9uO1xcblxcdFxcdFxcdFxcdGxpZ2h0LmNvbG9yID0gZGlyZWN0aW9uYWxMaWdodHNbIGkgXS5jb2xvcjtcXG5cXG5cXHRcXHRcXHRcXHRmbG9hdCBzaGFkb3cgPSAxLjA7XFxuXFx0XFx0XFx0XFx0XFxuXFx0XFx0XFx0XFx0I2lmIGRlZmluZWQoIFVTRV9TSEFET1dNQVAgKSAmJiBOVU1fRElSX0xJR0hUX1NIQURPV1MgPiAwXFxuXFxuXFx0XFx0XFx0XFx0XFx0c2hhZG93ID0gZ2V0U2hhZG93KCBkaXJlY3Rpb25hbFNoYWRvd01hcFsgaSBdLCBkaXJlY3Rpb25hbExpZ2h0U2hhZG93c1sgaSBdLnNoYWRvd01hcFNpemUsIGRpcmVjdGlvbmFsTGlnaHRTaGFkb3dzWyBpIF0uc2hhZG93QmlhcywgdkRpcmVjdGlvbmFsU2hhZG93Q29vcmRbIGkgXSApO1xcblxcblxcdFxcdFxcdFxcdCNlbmRpZlxcblxcblxcdFxcdFxcdFxcdG91dENvbG9yICs9IFJFKCBnZW8sIG1hdCwgbGlnaHQgKSAqIHNoYWRvdztcXG5cXHRcXHRcXHRcXHRcXG5cXHRcXHRcXHR9XFxuXFx0XFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9lbmRcXG5cXG5cXHQjZW5kaWZcXG5cXG5cXHQjaWYgTlVNX1BPSU5UX0xJR0hUUyA+IDBcXG5cXG5cXHRcXHRQb2ludExpZ2h0IHBMaWdodDtcXG5cXHRcXHR2ZWMzIHY7XFxuXFx0XFx0ZmxvYXQgZDtcXG5cXHRcXHRmbG9hdCBhdHRlbnVhdGlvbjtcXG5cXHRcXHQjcHJhZ21hIHVucm9sbF9sb29wX3N0YXJ0XFxuXFxuXFx0XFx0XFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1BPSU5UX0xJR0hUUzsgaSArKyApIHtcXG5cXG5cXHRcXHRcXHRcXHRwTGlnaHQgPSBwb2ludExpZ2h0c1sgaSBdO1xcblxcblxcdFxcdFxcdFxcdHYgPSBwTGlnaHQucG9zaXRpb24gLSBnZW8ucG9zO1xcblxcdFxcdFxcdFxcdGQgPSBsZW5ndGgoIHYgKTtcXG5cXHRcXHRcXHRcXHRsaWdodC5kaXJlY3Rpb24gPSBub3JtYWxpemUoIHYgKTtcXG5cXHRcXHRcXG5cXHRcXHRcXHRcXHRsaWdodC5jb2xvciA9IHBMaWdodC5jb2xvcjtcXG5cXG5cXHRcXHRcXHRcXHRpZiggcExpZ2h0LmRpc3RhbmNlID4gMC4wICYmIHBMaWdodC5kZWNheSA+IDAuMCApIHtcXG5cXG5cXHRcXHRcXHRcXHRcXHRhdHRlbnVhdGlvbiA9IHBvdyggY2xhbXAoIC1kIC8gcExpZ2h0LmRpc3RhbmNlICsgMS4wLCAwLjAsIDEuMCApLCBwTGlnaHQuZGVjYXkgKTtcXG5cXHRcXHRcXHRcXHRcXHRsaWdodC5jb2xvciAqPSBhdHRlbnVhdGlvbjtcXG5cXG5cXHRcXHRcXHRcXHR9XFxuXFxuXFx0XFx0XFx0XFx0b3V0Q29sb3IgKz0gUkUoIGdlbywgbWF0LCBsaWdodCApO1xcblxcdFxcdFxcdFxcdFxcblxcdFxcdFxcdH1cXG5cXHRcXHRcXHRcXG5cXHRcXHQjcHJhZ21hIHVucm9sbF9sb29wX2VuZFxcblxcblxcdCNlbmRpZlxcblxcblxcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcblxcdFxcdEVudmlyb25tZW50IExpZ2h0aW5nXFxuXFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXFxuXFxuXFx0ZmxvYXQgZE5WID0gY2xhbXAoIGRvdCggZ2VvLm5vcm1hbCwgZ2VvLnZpZXdEaXIgKSwgMC4wLCAxLjAgKTtcXG5cXG5cXHR2ZWMzIHJlZkRpciA9IHJlZmxlY3QoIGdlby52aWV3RGlyV29ybGQsIGdlby5ub3JtYWxXb3JsZCApO1xcblxcdHJlZkRpci54ICo9IC0xLjA7XFxuXFxuXFx0dmVjNCBlbnZNYXBDb2xvciA9IExpbmVhclRvc1JHQiggdGV4dHVyZUN1YmVVViggZW52TWFwLCBnZW8ubm9ybWFsV29ybGQsIDEuMCApICkgKiBpYmxJbnRlbnNpdHkgKiBlbnZNYXBJbnRlbnNpdHk7XFxuXFx0b3V0Q29sb3IgKz0gbWF0LmRpZmZ1c2VDb2xvciAqIGVudk1hcENvbG9yLnh5eiAqICggMS4wIC0gbWF0Lm1ldGFsbmVzcyApO1xcblxcblxcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcblxcdFxcdFJlZmxlY3Rpb25cXG5cXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cXG5cXHRcXG5cXHRmbG9hdCBFRiA9IG1peCggZnJlc25lbCggZE5WICksIDEuMCwgbWF0Lm1ldGFsbmVzcyApO1xcblxcblxcdCNpZmRlZiBSRUZMRUNUUExBTkVcXG5cXHRcXG5cXHRcXHR2ZWMyIHJlZlVWID0gZ2xfRnJhZ0Nvb3JkLnh5IC8gcmVuZGVyUmVzb2x1dGlvbjtcXG5cXG5cXHRcXHRyZWZVVi54ICs9IGdlby5ub3JtYWwueCAqIDAuNTtcXG5cXG5cXHRcXHRmbG9hdCBsID0gKDEuMCAtIGV4cCggLW1hdC5yb3VnaG5lc3MgICkgKSAqIDEuNiAqIFJFRl9NSVBNQVBfTEVWRUw7XFxuXFxuXFx0XFx0ZmxvYXQgb2Zmc2V0MSA9IGZsb29yKCBsICk7XFxuXFx0XFx0ZmxvYXQgb2Zmc2V0MiA9IG9mZnNldDEgKyAxLjA7XFxuXFx0XFx0ZmxvYXQgYmxlbmQgPSBmcmFjdCggbCApO1xcblxcdFxcdFxcblxcdFxcdHZlYzIgcnV2MSA9IGdldFJlZk1pcG1hcFVWKCByZWZVViwgb2Zmc2V0MSApO1xcblxcdFxcdHZlYzIgcnV2MiA9IGdldFJlZk1pcG1hcFVWKCByZWZVViwgb2Zmc2V0MiApO1xcblxcblxcdFxcdHZlYzMgcmVmMSA9IHRleHR1cmVCaWN1YmljKCByZWZsZWN0aW9uVGV4LCBydXYxLCBtaXBNYXBSZXNvbHV0aW9uICkueHl6O1xcblxcdFxcdHZlYzMgcmVmMiA9IHRleHR1cmVCaWN1YmljKCByZWZsZWN0aW9uVGV4LCBydXYyLCBtaXBNYXBSZXNvbHV0aW9uICkueHl6O1xcblxcblxcdFxcdG91dENvbG9yICs9IG1peCggcmVmMSwgcmVmMiwgYmxlbmQgKSAqIEVGO1xcblxcblxcdCNlbHNlXFxuXFx0XFxuXFx0XFx0b3V0Q29sb3IgKz0gbWF0LnNwZWN1bGFyQ29sb3IgKiBMaW5lYXJUb3NSR0IoIHRleHR1cmVDdWJlVVYoIGVudk1hcCwgcmVmRGlyLCBtYXQucm91Z2huZXNzICkgKS54eXogKiBFRiAqIGVudk1hcEludGVuc2l0eTtcXG5cXHRcXG5cXHQjZW5kaWZcXG5cXG5cXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXG5cXHRcXHRFbWlzc2lvblxcblxcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xcblxcblxcdCNpZmRlZiBVU0VfRU1JU1NJT05fTUFQXFxuXFxuXFx0XFx0b3V0Q29sb3IgKz0gTGluZWFyVG9zUkdCKCB0ZXh0dXJlMkQoIGVtaXNzaW9uTWFwLCB2VXYgKSApLnh5ejtcXG5cXHRcXG5cXHQjZWxzZVxcblxcblxcdFxcdG91dENvbG9yICs9IGVtaXNzaW9uO1xcblxcblxcdCNlbmRpZlxcblxcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dENvbG9yLCBvdXRPcGFjaXR5ICk7XFxuXFxufVwiOyIsImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcclxuaW1wb3J0ICogYXMgT1JFIGZyb20gJ29yZS10aHJlZS10cyc7XHJcblxyXG5pbXBvcnQgcG93ZXJWZXJ0IGZyb20gJy4vc2hhZGVycy9wb3dlci52cyc7XHJcbmltcG9ydCBwb3dlckZyYWcgZnJvbSAnLi9zaGFkZXJzL3Bvd2VyLmZzJztcclxuXHJcbmV4cG9ydCB0eXBlIFBvd2VyTWVzaE1hdGVyaWFsVHlwZSA9ICdjb2xvcicgfCAnZGVwdGgnIHwgJ2NvYydcclxuZXhwb3J0IGNsYXNzIFBvd2VyTWVzaCBleHRlbmRzIFRIUkVFLk1lc2g8VEhSRUUuQnVmZmVyR2VvbWV0cnksIFRIUkVFLlNoYWRlck1hdGVyaWFsPiB7XHJcblxyXG5cdHByb3RlY3RlZCBjb21tb25Vbmlmb3JtczogT1JFLlVuaWZvcm1zO1xyXG5cclxuXHQvLyBlbnZNYXBcclxuXHRwcm90ZWN0ZWQgZW52TWFwUmVuZGVyVGFyZ2V0OiBUSFJFRS5XZWJHTEN1YmVSZW5kZXJUYXJnZXQ7XHJcblx0cHJvdGVjdGVkIGVudk1hcENhbWVyYTogVEhSRUUuQ3ViZUNhbWVyYTtcclxuXHRwcm90ZWN0ZWQgZW52TWFwVXBkYXRlOiBib29sZWFuO1xyXG5cdHByb3RlY3RlZCBlbnZNYXBTcmM6IFRIUkVFLkN1YmVUZXh0dXJlIHwgVEhSRUUuVGV4dHVyZSB8IG51bGw7XHJcblxyXG5cdGNvbnN0cnVjdG9yKCBnZW9tZXRyeTogVEhSRUUuQnVmZmVyR2VvbWV0cnksIG1hdGVyaWFsT3B0aW9uPzogVEhSRUUuU2hhZGVyTWF0ZXJpYWxQYXJhbWV0ZXJzICk7XHJcblxyXG5cdGNvbnN0cnVjdG9yKCBtZXNoOiBUSFJFRS5NZXNoLCBtYXRlcmlhbE9wdGlvbj86IFRIUkVFLlNoYWRlck1hdGVyaWFsUGFyYW1ldGVycyApO1xyXG5cclxuXHRjb25zdHJ1Y3RvciggZ2VvTWVzaDogVEhSRUUuQnVmZmVyR2VvbWV0cnkgfCBUSFJFRS5NZXNoLCBtYXRlcmlhbE9wdGlvbj86IFRIUkVFLlNoYWRlck1hdGVyaWFsUGFyYW1ldGVycyApIHtcclxuXHJcblx0XHRtYXRlcmlhbE9wdGlvbiA9IG1hdGVyaWFsT3B0aW9uIHx8IHt9O1xyXG5cclxuXHRcdGxldCB1bmkgPSBPUkUuVW5pZm9ybXNMaWIubWVyZ2VVbmlmb3JtcyggbWF0ZXJpYWxPcHRpb24udW5pZm9ybXMgfHwge30sIHtcclxuXHRcdFx0ZW52TWFwOiB7XHJcblx0XHRcdFx0dmFsdWU6IG51bGxcclxuXHRcdFx0fSxcclxuXHRcdFx0ZW52TWFwSW50ZW5zaXR5OiB7XHJcblx0XHRcdFx0dmFsdWU6IG51bGxcclxuXHRcdFx0fSxcclxuXHRcdFx0aWJsSW50ZW5zaXR5OiB7XHJcblx0XHRcdFx0dmFsdWU6IG51bGxcclxuXHRcdFx0fSxcclxuXHRcdFx0bWF4TG9kTGV2ZWw6IHtcclxuXHRcdFx0XHR2YWx1ZTogMFxyXG5cdFx0XHR9LFxyXG5cdFx0XHRzaGFkb3dMaWdodE1vZGVsVmlld01hdHJpeDoge1xyXG5cdFx0XHRcdHZhbHVlOiBuZXcgVEhSRUUuTWF0cml4NCgpXHJcblx0XHRcdH0sXHJcblx0XHRcdHNoYWRvd0xpZ2h0UHJvamVjdGlvbk1hdHJpeDoge1xyXG5cdFx0XHRcdHZhbHVlOiBuZXcgVEhSRUUuTWF0cml4NCgpXHJcblx0XHRcdH0sXHJcblx0XHRcdHNoYWRvd0xpZ2h0RGlyZWN0aW9uOiB7XHJcblx0XHRcdFx0dmFsdWU6IG5ldyBUSFJFRS5WZWN0b3IzKClcclxuXHRcdFx0fSxcclxuXHRcdFx0c2hhZG93TGlnaHRDYW1lcmFDbGlwOiB7XHJcblx0XHRcdFx0dmFsdWU6IG5ldyBUSFJFRS5WZWN0b3IyKClcclxuXHRcdFx0fSxcclxuXHRcdFx0c2hhZG93TWFwOiB7XHJcblx0XHRcdFx0dmFsdWU6IG51bGxcclxuXHRcdFx0fSxcclxuXHRcdFx0c2hhZG93TWFwU2l6ZToge1xyXG5cdFx0XHRcdHZhbHVlOiBuZXcgVEhSRUUuVmVjdG9yMigpXHJcblx0XHRcdH0sXHJcblx0XHRcdHNoYWRvd01hcFJlc29sdXRpb246IHtcclxuXHRcdFx0XHR2YWx1ZTogbmV3IFRIUkVFLlZlY3RvcjIoKVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRzaGFkb3dMaWdodFNpemU6IHtcclxuXHRcdFx0XHR2YWx1ZTogMS4wXHJcblx0XHRcdH0sXHJcblx0XHRcdGNhbWVyYU5lYXI6IHtcclxuXHRcdFx0XHR2YWx1ZTogMC4wMVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRjYW1lcmFGYXI6IHtcclxuXHRcdFx0XHR2YWx1ZTogMTAwMC4wXHJcblx0XHRcdH1cclxuXHRcdH0gKTtcclxuXHJcblx0XHR1bmkgPSBPUkUuVW5pZm9ybXNMaWIubWVyZ2VVbmlmb3JtcyggdW5pLCBUSFJFRS5Vbmlmb3Jtc1V0aWxzLmNsb25lKCBUSFJFRS5Vbmlmb3Jtc0xpYi5saWdodHMgKSApO1xyXG5cclxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0XHRHZW9tZXRyeVxyXG5cdFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5cdFx0bGV0IGdlbzogVEhSRUUuQnVmZmVyR2VvbWV0cnk7XHJcblxyXG5cdFx0aWYgKCAnaXNCdWZmZXJHZW9tZXRyeScgaW4gZ2VvTWVzaCApIHtcclxuXHJcblx0XHRcdGdlbyA9IGdlb01lc2g7XHJcblxyXG5cdFx0fSBlbHNlIGlmICggJ2lzTWVzaCcgaW4gZ2VvTWVzaCApIHtcclxuXHJcblx0XHRcdGdlbyA9IGdlb01lc2guZ2VvbWV0cnk7XHJcblxyXG5cdFx0XHRsZXQgbWF0ID0gKCBnZW9NZXNoLm1hdGVyaWFsIGFzIFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsICk7XHJcblxyXG5cdFx0XHRpZiAoIG1hdC5pc01lc2hTdGFuZGFyZE1hdGVyaWFsICkge1xyXG5cclxuXHRcdFx0XHRpZiAoIG1hdC5tYXAgKSB7XHJcblxyXG5cdFx0XHRcdFx0dW5pLm1hcCA9IHtcclxuXHRcdFx0XHRcdFx0dmFsdWU6IG1hdC5tYXBcclxuXHRcdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdH0gZWxzZSBpZiAoIG1hdC5jb2xvciApIHtcclxuXHJcblx0XHRcdFx0XHR1bmkuY29sb3IgPSB7XHJcblx0XHRcdFx0XHRcdHZhbHVlOiBtYXQuY29sb3JcclxuXHRcdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKCBtYXQucm91Z2huZXNzTWFwICkge1xyXG5cclxuXHRcdFx0XHRcdHVuaS5yb3VnaG5lc3NNYXAgPSB7XHJcblx0XHRcdFx0XHRcdHZhbHVlOiBtYXQucm91Z2huZXNzTWFwXHJcblx0XHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHRcdHVuaS5yb3VnaG5lc3MgPSB7XHJcblx0XHRcdFx0XHRcdHZhbHVlOiBtYXQucm91Z2huZXNzXHJcblx0XHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmICggbWF0LmFscGhhTWFwICkge1xyXG5cclxuXHRcdFx0XHRcdHVuaS5hbHBoYU1hcCA9IHtcclxuXHRcdFx0XHRcdFx0dmFsdWU6IG1hdC5hbHBoYU1hcFxyXG5cdFx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0XHR1bmkub3BhY2l0eSA9IHtcclxuXHRcdFx0XHRcdFx0dmFsdWU6IG1hdC5vcGFjaXR5XHJcblx0XHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmICggbWF0Lm1ldGFsbmVzc01hcCApIHtcclxuXHJcblx0XHRcdFx0XHR1bmkubWV0YWxuZXNzTWFwID0ge1xyXG5cdFx0XHRcdFx0XHR2YWx1ZTogbWF0Lm1ldGFsbmVzc01hcFxyXG5cdFx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0XHR1bmkubWV0YWxuZXNzID0ge1xyXG5cdFx0XHRcdFx0XHR2YWx1ZTogbWF0Lm1ldGFsbmVzc1xyXG5cdFx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoIG1hdC5ub3JtYWxNYXAgKSB7XHJcblxyXG5cdFx0XHRcdFx0dW5pLm5vcm1hbE1hcCA9IHtcclxuXHRcdFx0XHRcdFx0dmFsdWU6IG1hdC5ub3JtYWxNYXBcclxuXHRcdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKCBtYXQuZW1pc3NpdmVNYXAgKSB7XHJcblxyXG5cdFx0XHRcdFx0dW5pLmVtaXNzaW9uTWFwID0ge1xyXG5cdFx0XHRcdFx0XHR2YWx1ZTogbWF0LmVtaXNzaXZlTWFwXHJcblx0XHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHRcdHVuaS5lbWlzc2lvbiA9IHtcclxuXHRcdFx0XHRcdFx0dmFsdWU6IG1hdC5lbWlzc2l2ZVxyXG5cdFx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRnZW8gPSBuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gdGFuZ2VudHNcclxuXHJcblx0XHRpZiAoICEgZ2VvLmdldEF0dHJpYnV0ZSggJ3RhbmdlbnQnICkgKSB7XHJcblxyXG5cdFx0XHRpZiAoXHJcblx0XHRcdFx0Z2VvLmdldEluZGV4KCkgJiZcclxuXHRcdFx0XHRnZW8uZ2V0QXR0cmlidXRlKCAncG9zaXRpb24nICkgJiZcclxuXHRcdFx0XHRnZW8uZ2V0QXR0cmlidXRlKCAnbm9ybWFsJyApICYmXHJcblx0XHRcdFx0Z2VvLmdldEF0dHJpYnV0ZSggJ3V2JyApXHJcblx0XHRcdCkge1xyXG5cclxuXHRcdFx0XHRnZW8uY29tcHV0ZVRhbmdlbnRzKCk7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0XHRNYXRlcmlhbFxyXG5cdFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5cdFx0bWF0ZXJpYWxPcHRpb24udW5pZm9ybXMgPSB1bmk7XHJcblxyXG5cdFx0bGV0IG1hdCA9IG5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbCgge1xyXG5cdFx0XHR2ZXJ0ZXhTaGFkZXI6IHBvd2VyVmVydCxcclxuXHRcdFx0ZnJhZ21lbnRTaGFkZXI6IHBvd2VyRnJhZyxcclxuXHRcdFx0bGlnaHRzOiB0cnVlLFxyXG5cdFx0XHR0cmFuc3BhcmVudDogdHJ1ZSxcclxuXHRcdFx0c2lkZTogVEhSRUUuRG91YmxlU2lkZSxcclxuXHRcdFx0ZXh0ZW5zaW9uczoge1xyXG5cdFx0XHRcdGRlcml2YXRpdmVzOiB0cnVlLFxyXG5cdFx0XHR9LFxyXG5cdFx0XHRkZWZpbmVzOiB7XHJcblx0XHRcdH0sXHJcblx0XHRcdC4uLm1hdGVyaWFsT3B0aW9uXHJcblx0XHR9ICk7XHJcblxyXG5cdFx0aWYgKCB1bmkubWFwICkge1xyXG5cclxuXHRcdFx0bWF0LmRlZmluZXMuVVNFX01BUCA9ICcnO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHVuaS5yb3VnaG5lc3NNYXAgKSB7XHJcblxyXG5cdFx0XHRtYXQuZGVmaW5lcy5VU0VfUk9VR0hORVNTX01BUCA9ICcnO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHVuaS5tZXRhbG5lc3NNYXAgKSB7XHJcblxyXG5cdFx0XHRtYXQuZGVmaW5lcy5VU0VfTUVUQUxORVNTX01BUCA9ICcnO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHVuaS5hbHBoYU1hcCApIHtcclxuXHJcblx0XHRcdG1hdC5kZWZpbmVzLlVTRV9BTFBIQV9NQVAgPSAnJztcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCB1bmkubm9ybWFsTWFwICkge1xyXG5cclxuXHRcdFx0bWF0LmRlZmluZXMuVVNFX05PUk1BTF9NQVAgPSAnJztcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCB1bmkuZW1pc3Npb25NYXAgKSB7XHJcblxyXG5cdFx0XHRtYXQuZGVmaW5lcy5VU0VfRU1JU1NJT05fTUFQID0gJyc7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHN1cGVyKCBnZW8sIG1hdCApO1xyXG5cclxuXHRcdHRoaXMubmFtZSA9IGdlb01lc2gubmFtZTtcclxuXHJcblx0XHR0aGlzLnVzZXJEYXRhLmNvbG9yTWF0ID0gdGhpcy5tYXRlcmlhbDtcclxuXHJcblx0XHR0aGlzLmN1c3RvbURlcHRoTWF0ZXJpYWwgPSBuZXcgVEhSRUUuU2hhZGVyTWF0ZXJpYWwoIHtcclxuXHRcdFx0dmVydGV4U2hhZGVyOiBwb3dlclZlcnQsXHJcblx0XHRcdGZyYWdtZW50U2hhZGVyOiBwb3dlckZyYWcsXHJcblx0XHRcdHNpZGU6IFRIUkVFLkRvdWJsZVNpZGUsXHJcblx0XHRcdGxpZ2h0czogdHJ1ZSxcclxuXHRcdFx0ZXh0ZW5zaW9uczoge1xyXG5cdFx0XHRcdGRlcml2YXRpdmVzOiB0cnVlXHJcblx0XHRcdH0sXHJcblx0XHRcdC4uLm1hdGVyaWFsT3B0aW9uLFxyXG5cdFx0XHRkZWZpbmVzOiB7XHJcblx0XHRcdFx0Li4ubWF0LmRlZmluZXMsXHJcblx0XHRcdFx0J0RFUFRIJzogXCJcIixcclxuXHRcdFx0fSxcclxuXHRcdH0gKTtcclxuXHJcblx0XHR0aGlzLmNvbW1vblVuaWZvcm1zID0gdW5pO1xyXG5cclxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0XHRUcmFuc2Zvcm1cclxuXHRcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuXHRcdGlmICggJ2lzTWVzaCcgaW4gZ2VvTWVzaCApIHtcclxuXHJcblx0XHRcdHRoaXMucG9zaXRpb24uY29weSggZ2VvTWVzaC5wb3NpdGlvbiApO1xyXG5cdFx0XHR0aGlzLnJvdGF0aW9uLmNvcHkoIGdlb01lc2gucm90YXRpb24gKTtcclxuXHRcdFx0dGhpcy5zY2FsZS5jb3B5KCBnZW9NZXNoLnNjYWxlICk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0XHRFbnZNYXBcclxuXHRcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuXHRcdHRoaXMuZW52TWFwU3JjID0gbnVsbDtcclxuXHRcdHRoaXMuZW52TWFwVXBkYXRlID0gZmFsc2U7XHJcblxyXG5cdFx0bGV0IGVudk1hcFJlc29sdXRpb24gPSAyNTY7XHJcblxyXG5cdFx0dGhpcy5lbnZNYXBSZW5kZXJUYXJnZXQgPSBuZXcgVEhSRUUuV2ViR0xDdWJlUmVuZGVyVGFyZ2V0KCBlbnZNYXBSZXNvbHV0aW9uLCB7XHJcblx0XHRcdGZvcm1hdDogVEhSRUUuUkdCQUZvcm1hdCxcclxuXHRcdFx0Z2VuZXJhdGVNaXBtYXBzOiB0cnVlLFxyXG5cdFx0XHRtYWdGaWx0ZXI6IFRIUkVFLkxpbmVhckZpbHRlcixcclxuXHRcdFx0bWluRmlsdGVyOiBUSFJFRS5MaW5lYXJGaWx0ZXJcclxuXHRcdH0gKTtcclxuXHJcblx0XHR0aGlzLmVudk1hcENhbWVyYSA9IG5ldyBUSFJFRS5DdWJlQ2FtZXJhKCAwLjAwMSwgMTAwMCwgdGhpcy5lbnZNYXBSZW5kZXJUYXJnZXQgKTtcclxuXHRcdHRoaXMuZ2V0V29ybGRQb3NpdGlvbiggdGhpcy5lbnZNYXBDYW1lcmEucG9zaXRpb24gKTtcclxuXHJcblx0XHR0aGlzLm9uQmVmb3JlUmVuZGVyID0gKCByZW5kZXJlciwgc2NlbmUsIGNhbWVyYSApID0+IHtcclxuXHJcblx0XHRcdHRoaXMuZGlzcGF0Y2hFdmVudCgge1xyXG5cdFx0XHRcdHR5cGU6ICdiZWZvcmVSZW5kZXInLFxyXG5cdFx0XHRcdHJlbmRlcmVyLFxyXG5cdFx0XHRcdHNjZW5lLFxyXG5cdFx0XHRcdGNhbWVyYVxyXG5cdFx0XHR9ICk7XHJcblxyXG5cdFx0fTtcclxuXHJcblx0XHR0aGlzLmFkZEV2ZW50TGlzdGVuZXIoICdiZWZvcmVSZW5kZXInLCAoIGU6IFRIUkVFLkV2ZW50ICkgPT4ge1xyXG5cclxuXHRcdFx0bGV0IHJlbmRlcmVyID0gZS5yZW5kZXJlcjtcclxuXHRcdFx0bGV0IHNjZW5lID0gZS5zY2VuZTtcclxuXHRcdFx0bGV0IGNhbWVyYSA9IGUuY2FtZXJhO1xyXG5cclxuXHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHRcdFx0RW52TWFwXHJcblx0XHRcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLmVudk1hcFVwZGF0ZSApIHtcclxuXHJcblx0XHRcdFx0bGV0IGVudk1hcFJUOiBUSFJFRS5XZWJHTFJlbmRlclRhcmdldCB8IG51bGwgPSBudWxsO1xyXG5cclxuXHRcdFx0XHRsZXQgcG1yZW1HZW5lcmF0b3IgPSBuZXcgVEhSRUUuUE1SRU1HZW5lcmF0b3IoIHJlbmRlcmVyICk7XHJcblx0XHRcdFx0cG1yZW1HZW5lcmF0b3IuY29tcGlsZUVxdWlyZWN0YW5ndWxhclNoYWRlcigpO1xyXG5cclxuXHRcdFx0XHRpZiAoIHRoaXMuZW52TWFwU3JjICkge1xyXG5cclxuXHRcdFx0XHRcdGlmICggJ2lzQ3ViZVRleHR1cmUnIGluIHRoaXMuZW52TWFwU3JjICkge1xyXG5cclxuXHRcdFx0XHRcdFx0ZW52TWFwUlQgPSBwbXJlbUdlbmVyYXRvci5mcm9tQ3ViZW1hcCggdGhpcy5lbnZNYXBTcmMgKTtcclxuXHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHRcdFx0ZW52TWFwUlQgPSBwbXJlbUdlbmVyYXRvci5mcm9tRXF1aXJlY3Rhbmd1bGFyKCB0aGlzLmVudk1hcFNyYyApO1xyXG5cclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0XHR0aGlzLnZpc2libGUgPSBmYWxzZTtcclxuXHJcblx0XHRcdFx0XHR0aGlzLmVudk1hcENhbWVyYS51cGRhdGUoIHJlbmRlcmVyLCBzY2VuZSApO1xyXG5cdFx0XHRcdFx0ZW52TWFwUlQgPSBwbXJlbUdlbmVyYXRvci5mcm9tQ3ViZW1hcCggdGhpcy5lbnZNYXBSZW5kZXJUYXJnZXQudGV4dHVyZSApO1xyXG5cclxuXHRcdFx0XHRcdHRoaXMudmlzaWJsZSA9IHRydWU7XHJcblxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dGhpcy5jb21tb25Vbmlmb3Jtcy5lbnZNYXAudmFsdWUgPSBlbnZNYXBSVC50ZXh0dXJlO1xyXG5cdFx0XHRcdHRoaXMuZW52TWFwVXBkYXRlID0gZmFsc2U7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdFx0XHREZXB0aFxyXG5cdFx0XHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcblx0XHRcdGlmICggY2FtZXJhLnVzZXJEYXRhLmRlcHRoQ2FtZXJhICkge1xyXG5cclxuXHRcdFx0XHR0aGlzLm1hdGVyaWFsID0gdGhpcy51c2VyRGF0YS5kZXB0aE1hdDtcclxuXHRcdFx0XHR0aGlzLmNvbW1vblVuaWZvcm1zLmNhbWVyYU5lYXIudmFsdWUgPSBjYW1lcmEubmVhcjtcclxuXHRcdFx0XHR0aGlzLmNvbW1vblVuaWZvcm1zLmNhbWVyYUZhci52YWx1ZSA9IGNhbWVyYS5mYXI7XHJcblxyXG5cdFx0XHRcdGlmICggISB0aGlzLm1hdGVyaWFsICkge1xyXG5cclxuXHRcdFx0XHRcdHRoaXMudmlzaWJsZSA9IGZhbHNlO1xyXG5cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdFx0XHRTaGFkb3dNYXAgRGVwdGhcclxuXHRcdFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5cdFx0XHQvLyBpZiAoIGNhbWVyYS51c2VyRGF0YS5zaGFkb3dDYW1lcmEgKSB7XHJcblxyXG5cdFx0XHQvLyBcdHRoaXMuY29tbW9uVW5pZm9ybXMuc2hhZG93TWFwLnZhbHVlID0gY2FtZXJhLnVzZXJEYXRhLnNoYWRvd01hcC52YWx1ZTtcclxuXHRcdFx0Ly8gXHR0aGlzLmNvbW1vblVuaWZvcm1zLnNoYWRvd01hcFNpemUudmFsdWUgPSBjYW1lcmEudXNlckRhdGEuc2hhZG93TWFwU2l6ZTtcclxuXHJcblx0XHRcdC8vIFx0dGhpcy5jb21tb25Vbmlmb3Jtcy5zaGFkb3dMaWdodE1vZGVsVmlld01hdHJpeC52YWx1ZS5jb3B5KCBuZXcgVEhSRUUuTWF0cml4NCgpLm11bHRpcGx5KCBjYW1lcmEubWF0cml4V29ybGRJbnZlcnNlICkubXVsdGlwbHkoIHRoaXMubWF0cml4V29ybGQgKSApO1xyXG5cdFx0XHQvLyBcdHRoaXMuY29tbW9uVW5pZm9ybXMuc2hhZG93TGlnaHRQcm9qZWN0aW9uTWF0cml4LnZhbHVlLmNvcHkoIGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4ICk7XHJcblxyXG5cdFx0XHQvLyBcdHRoaXMuY29tbW9uVW5pZm9ybXMuc2hhZG93TGlnaHRTaXplLnZhbHVlID0gY2FtZXJhLnVzZXJEYXRhLnNoYWRvd0xpZ2h0U2l6ZTtcclxuXHRcdFx0Ly8gXHRjYW1lcmEuZ2V0V29ybGREaXJlY3Rpb24oIHRoaXMuY29tbW9uVW5pZm9ybXMuc2hhZG93TGlnaHREaXJlY3Rpb24udmFsdWUgKTtcclxuXHRcdFx0Ly8gXHR0aGlzLmNvbW1vblVuaWZvcm1zLnNoYWRvd0xpZ2h0Q2FtZXJhQ2xpcC52YWx1ZS5jb3B5KCBjYW1lcmEudXNlckRhdGEuc2hhZG93TGlnaHRDYW1lcmFDbGlwICk7XHJcblxyXG5cdFx0XHQvLyB9XHJcblxyXG5cdFx0fSApO1xyXG5cclxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0XHREaXNwb3NlXHJcblx0XHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcblx0XHRjb25zdCBvbkRpc3Bvc2UgPSAoKSA9PiB7XHJcblxyXG5cdFx0XHR0aGlzLmVudk1hcFJlbmRlclRhcmdldC5kaXNwb3NlKCk7XHJcblx0XHRcdHRoaXMuZ2VvbWV0cnkuZGlzcG9zZSgpO1xyXG5cdFx0XHR0aGlzLm1hdGVyaWFsLmRpc3Bvc2UoKTtcclxuXHJcblx0XHRcdHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2Rpc3Bvc2UnLCBvbkRpc3Bvc2UgKTtcclxuXHJcblx0XHR9O1xyXG5cclxuXHRcdHRoaXMuYWRkRXZlbnRMaXN0ZW5lciggJ2Rpc3Bvc2UnLCBvbkRpc3Bvc2UgKTtcclxuXHJcblx0fVxyXG5cclxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdEVudk1hcCAvIElCTFxyXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuXHRwdWJsaWMgdXBkYXRlRW52TWFwKCBlbnZNYXA6IFRIUkVFLkN1YmVUZXh0dXJlIHwgVEhSRUUuVGV4dHVyZSB8IG51bGwgPSBudWxsICkge1xyXG5cclxuXHRcdHRoaXMuZW52TWFwU3JjID0gZW52TWFwO1xyXG5cdFx0dGhpcy5lbnZNYXBVcGRhdGUgPSB0cnVlO1xyXG5cclxuXHRcdGlmICggdGhpcy5jb21tb25Vbmlmb3Jtcy5lbnZNYXBJbnRlbnNpdHkudmFsdWUgPT0gbnVsbCApIHtcclxuXHJcblx0XHRcdHRoaXMuY29tbW9uVW5pZm9ybXMuZW52TWFwSW50ZW5zaXR5LnZhbHVlID0gMTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCB0aGlzLmNvbW1vblVuaWZvcm1zLmlibEludGVuc2l0eS52YWx1ZSA9PSBudWxsICkge1xyXG5cclxuXHRcdFx0dGhpcy5jb21tb25Vbmlmb3Jtcy5pYmxJbnRlbnNpdHkudmFsdWUgPSAxO1xyXG5cclxuXHRcdH1cclxuXHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0IGVudk1hcEludGVuc2l0eSggdmFsdWU6IG51bWJlciApIHtcclxuXHJcblx0XHR0aGlzLmNvbW1vblVuaWZvcm1zLmVudk1hcEludGVuc2l0eS52YWx1ZSA9IHZhbHVlO1xyXG5cclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXQgaWJsSW50ZW5zaXR5KCB2YWx1ZTogbnVtYmVyICkge1xyXG5cclxuXHRcdHRoaXMuY29tbW9uVW5pZm9ybXMuaWJsSW50ZW5zaXR5LnZhbHVlID0gdmFsdWU7XHJcblxyXG5cdH1cclxuXHJcblx0cHVibGljIGRpc3Bvc2UoKSB7XHJcblxyXG5cdFx0dGhpcy5kaXNwYXRjaEV2ZW50KCB7IHR5cGU6ICdkaXNwc29lJyB9ICk7XHJcblxyXG5cdH1cclxuXHJcblx0cHVibGljIGdldCBpc1Bvd2VyTWVzaCgpIHtcclxuXHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHJcblx0fVxyXG5cclxufVxyXG4iLCJpbXBvcnQgKiBhcyBUSFJFRSBmcm9tICd0aHJlZSc7XHJcbmltcG9ydCAqIGFzIE9SRSBmcm9tICdvcmUtdGhyZWUtdHMnO1xyXG5cclxuaW1wb3J0IHsgUG93ZXJNZXNoIH0gZnJvbSAnLi4vUG93ZXJNZXNoJztcclxuXHJcbmltcG9ydCBtaXBtYXBWZXJ0IGZyb20gJy4vc2hhZGVycy9taXBtYXAudnMnO1xyXG5pbXBvcnQgbWlwbWFwRnJhZyBmcm9tICcuL3NoYWRlcnMvbWlwbWFwLmZzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3dlclJlZmxlY3Rpb25NZXNoIGV4dGVuZHMgUG93ZXJNZXNoIHtcclxuXHJcblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHRSZW5kZXJUYXJnZXRcclxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJUYXJnZXRzOiB7XHJcblx0XHRyZWY6IFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0LFxyXG5cdFx0bWlwbWFwOiBUSFJFRS5XZWJHTFJlbmRlclRhcmdldFxyXG5cdH07XHJcblxyXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0TWlwbWFwXHJcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5cdHByaXZhdGUgbWlwbWFwR2VvOiBUSFJFRS5CdWZmZXJHZW9tZXRyeTtcclxuXHRwcml2YXRlIG1pcG1hcFBQOiBPUkUuUG9zdFByb2Nlc3NpbmcgfCBudWxsO1xyXG5cclxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdFJlZmxlY3Rpb24gQ2FtZXJhXHJcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5cdHByaXZhdGUgbG9va0F0UG9zaXRpb246IFRIUkVFLlZlY3RvcjM7XHJcblx0cHJpdmF0ZSByb3RhdGlvbk1hdHJpeDogVEhSRUUuTWF0cml4NDtcclxuXHRwcml2YXRlIHRhcmdldDogVEhSRUUuVmVjdG9yMztcclxuXHRwcml2YXRlIHZpZXc6IFRIUkVFLlZlY3RvcjM7XHJcblxyXG5cdHByaXZhdGUgdmlydHVhbENhbWVyYTogVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmE7XHJcblx0cHJpdmF0ZSByZWZsZWN0b3JQbGFuZTogVEhSRUUuUGxhbmU7XHJcblx0cHJpdmF0ZSBub3JtYWw6IFRIUkVFLlZlY3RvcjM7XHJcblxyXG5cdHByaXZhdGUgcmVmbGVjdG9yV29ybGRQb3NpdGlvbjogVEhSRUUuVmVjdG9yMztcclxuXHRwcml2YXRlIGNhbWVyYVdvcmxkUG9zaXRpb246IFRIUkVFLlZlY3RvcjM7XHJcblxyXG5cdHByaXZhdGUgY2xpcFBsYW5lOiBUSFJFRS5WZWN0b3I0O1xyXG5cdHByaXZhdGUgY2xpcEJpYXM6IG51bWJlcjtcclxuXHRwcml2YXRlIHE6IFRIUkVFLlZlY3RvcjQ7XHJcblxyXG5cdHByaXZhdGUgdGV4dHVyZU1hdHJpeDogVEhSRUUuTWF0cml4NDtcclxuXHJcblx0Y29uc3RydWN0b3IoIGdlb21ldHJ5OiBUSFJFRS5CdWZmZXJHZW9tZXRyeSwgbWF0ZXJpYWxPcHRpb24/OiBUSFJFRS5TaGFkZXJNYXRlcmlhbFBhcmFtZXRlcnMgKTtcclxuXHJcblx0Y29uc3RydWN0b3IoIG1lc2g6IFRIUkVFLk1lc2gsIG1hdGVyaWFsT3B0aW9uPzogVEhSRUUuU2hhZGVyTWF0ZXJpYWxQYXJhbWV0ZXJzICk7XHJcblxyXG5cdGNvbnN0cnVjdG9yKCBnZW9NZXNoOiBUSFJFRS5CdWZmZXJHZW9tZXRyeSB8IFRIUkVFLk1lc2g8VEhSRUUuQnVmZmVyR2VvbWV0cnk+LCBtYXRlcmlhbE9wdGlvbj86IFRIUkVFLlNoYWRlck1hdGVyaWFsUGFyYW1ldGVycyApIHtcclxuXHJcblx0XHRtYXRlcmlhbE9wdGlvbiA9IG1hdGVyaWFsT3B0aW9uIHx8IHt9O1xyXG5cclxuXHRcdG1hdGVyaWFsT3B0aW9uLnVuaWZvcm1zID0gT1JFLlVuaWZvcm1zTGliLm1lcmdlVW5pZm9ybXMoIG1hdGVyaWFsT3B0aW9uLnVuaWZvcm1zIHx8IHt9LCB7XHJcblx0XHRcdHJlZmxlY3Rpb25UZXg6IHtcclxuXHRcdFx0XHR2YWx1ZTogbnVsbFxyXG5cdFx0XHR9LFxyXG5cdFx0XHRyZW5kZXJSZXNvbHV0aW9uOiB7XHJcblx0XHRcdFx0dmFsdWU6IG5ldyBUSFJFRS5WZWN0b3IyKCAxLCAxIClcclxuXHRcdFx0fSxcclxuXHRcdFx0dGV4dHVyZU1hdHJpeDoge1xyXG5cdFx0XHRcdHZhbHVlOiBuZXcgVEhSRUUuTWF0cml4NCgpXHJcblx0XHRcdH0sXHJcblx0XHRcdG1pcE1hcFJlc29sdXRpb246IHtcclxuXHRcdFx0XHR2YWx1ZTogbmV3IFRIUkVFLlZlY3RvcjIoIDEsIDEgKVxyXG5cdFx0XHR9XHJcblx0XHR9ICk7XHJcblxyXG5cdFx0c3VwZXIoIGdlb01lc2ggYXMgVEhSRUUuQnVmZmVyR2VvbWV0cnksIG1hdGVyaWFsT3B0aW9uICk7XHJcblxyXG5cdFx0dGhpcy5tYXRlcmlhbC5kZWZpbmVzLlJFRkxFQ1RQTEFORSA9ICcnO1xyXG5cclxuXHRcdHRoaXMucmVmbGVjdG9yUGxhbmUgPSBuZXcgVEhSRUUuUGxhbmUoKTtcclxuXHRcdHRoaXMubm9ybWFsID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuXHRcdHRoaXMucmVmbGVjdG9yV29ybGRQb3NpdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcblx0XHR0aGlzLmNhbWVyYVdvcmxkUG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG5cdFx0dGhpcy5yb3RhdGlvbk1hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXg0KCk7XHJcblx0XHR0aGlzLmxvb2tBdFBvc2l0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMoIDAsIDAsIC0gMSApO1xyXG5cdFx0dGhpcy5jbGlwUGxhbmUgPSBuZXcgVEhSRUUuVmVjdG9yNCgpO1xyXG5cdFx0dGhpcy50ZXh0dXJlTWF0cml4ID0gdGhpcy5jb21tb25Vbmlmb3Jtcy50ZXh0dXJlTWF0cml4LnZhbHVlO1xyXG5cdFx0dGhpcy5jbGlwQmlhcyA9IDAuMTtcclxuXHJcblx0XHR0aGlzLnZpZXcgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG5cdFx0dGhpcy50YXJnZXQgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG5cdFx0dGhpcy5xID0gbmV3IFRIUkVFLlZlY3RvcjQoKTtcclxuXHJcblx0XHR0aGlzLnZpcnR1YWxDYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoKTtcclxuXHJcblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdFx0TWlwTWFwXHJcblx0XHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcblx0XHR0aGlzLm1pcG1hcFBQID0gbnVsbDtcclxuXHRcdHRoaXMubWlwbWFwR2VvID0gbmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5KCk7XHJcblxyXG5cdFx0bGV0IHBvc0FycmF5ID0gW107XHJcblx0XHRsZXQgdXZBcnJheSA9IFtdO1xyXG5cdFx0bGV0IGluZGV4QXJyYXkgPSBbXTtcclxuXHJcblx0XHRsZXQgcCA9IG5ldyBUSFJFRS5WZWN0b3IyKCAwLCAwICk7XHJcblx0XHRsZXQgcyA9IDIuMDtcclxuXHJcblx0XHRwb3NBcnJheS5wdXNoKCBwLngsIHAueSwgMCApO1xyXG5cdFx0cG9zQXJyYXkucHVzaCggcC54ICsgcywgcC55LCAwICk7XHJcblx0XHRwb3NBcnJheS5wdXNoKCBwLnggKyBzLCBwLnkgLSBzLCAwICk7XHJcblx0XHRwb3NBcnJheS5wdXNoKCBwLngsIHAueSAtIHMsIDAgKTtcclxuXHJcblx0XHR1dkFycmF5LnB1c2goIDEuMCwgMS4wICk7XHJcblx0XHR1dkFycmF5LnB1c2goIDAuMCwgMS4wICk7XHJcblx0XHR1dkFycmF5LnB1c2goIDAuMCwgMC4wICk7XHJcblx0XHR1dkFycmF5LnB1c2goIDEuMCwgMC4wICk7XHJcblxyXG5cdFx0aW5kZXhBcnJheS5wdXNoKCAwLCAyLCAxLCAwLCAzLCAyICk7XHJcblxyXG5cdFx0cC5zZXQoIHMsIDAgKTtcclxuXHJcblx0XHRmb3IgKCBsZXQgaSA9IDA7IGkgPCA3OyBpICsrICkge1xyXG5cclxuXHRcdFx0cyAqPSAwLjU7XHJcblxyXG5cdFx0XHRwb3NBcnJheS5wdXNoKCBwLngsXHRcdHAueSxcdFx0MCApO1xyXG5cdFx0XHRwb3NBcnJheS5wdXNoKCBwLnggKyBzLCBwLnksXHRcdDAgKTtcclxuXHRcdFx0cG9zQXJyYXkucHVzaCggcC54ICsgcywgcC55IC0gcyxcdDAgKTtcclxuXHRcdFx0cG9zQXJyYXkucHVzaCggcC54LFx0XHRwLnkgLSBzLCBcdDAgKTtcclxuXHJcblx0XHRcdHV2QXJyYXkucHVzaCggMS4wLCAxLjAgKTtcclxuXHRcdFx0dXZBcnJheS5wdXNoKCAwLjAsIDEuMCApO1xyXG5cdFx0XHR1dkFycmF5LnB1c2goIDAuMCwgMC4wICk7XHJcblx0XHRcdHV2QXJyYXkucHVzaCggMS4wLCAwLjAgKTtcclxuXHJcblx0XHRcdGxldCBpbmRleE9mZnNldCA9ICggaSArIDAuMCApICogNDtcclxuXHRcdFx0aW5kZXhBcnJheS5wdXNoKCBpbmRleE9mZnNldCArIDAsIGluZGV4T2Zmc2V0ICsgMiwgaW5kZXhPZmZzZXQgKyAxLCBpbmRleE9mZnNldCArIDAsIGluZGV4T2Zmc2V0ICsgMywgaW5kZXhPZmZzZXQgKyAyICk7XHJcblxyXG5cdFx0XHRwLnkgPSBwLnkgLSBzO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRsZXQgcG9zQXR0ciA9IG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoIG5ldyBGbG9hdDMyQXJyYXkoIHBvc0FycmF5ICksIDMgKTtcclxuXHRcdGxldCB1dkF0dHIgPSBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKCBuZXcgRmxvYXQzMkFycmF5KCB1dkFycmF5ICksIDIgKTtcclxuXHRcdGxldCBpbmRleEF0dHIgPSBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKCBuZXcgVWludDE2QXJyYXkoIGluZGV4QXJyYXkgKSwgMSApO1xyXG5cclxuXHRcdGxldCBncyA9IDE7XHJcblx0XHRwb3NBdHRyLmFwcGx5TWF0cml4NCggbmV3IFRIUkVFLk1hdHJpeDQoKS5tYWtlU2NhbGUoICggMS4wIC8gMS41ICksIGdzLCBncyApICk7XHJcblx0XHRwb3NBdHRyLmFwcGx5TWF0cml4NCggbmV3IFRIUkVFLk1hdHJpeDQoKS5tYWtlVHJhbnNsYXRpb24oIC0gMS4wLCAxLjAsIDAgKSApO1xyXG5cclxuXHRcdHRoaXMubWlwbWFwR2VvLnNldEF0dHJpYnV0ZSggJ3Bvc2l0aW9uJywgcG9zQXR0ciApO1xyXG5cdFx0dGhpcy5taXBtYXBHZW8uc2V0QXR0cmlidXRlKCAndXYnLCB1dkF0dHIgKTtcclxuXHRcdHRoaXMubWlwbWFwR2VvLnNldEluZGV4KCBpbmRleEF0dHIgKTtcclxuXHJcblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdFx0UmVuZGVyVGFyZ2V0c1xyXG5cdFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5cdFx0dGhpcy5yZW5kZXJUYXJnZXRzID0ge1xyXG5cdFx0XHRyZWY6IG5ldyBUSFJFRS5XZWJHTFJlbmRlclRhcmdldCggMSwgMSApLFxyXG5cdFx0XHRtaXBtYXA6IG5ldyBUSFJFRS5XZWJHTFJlbmRlclRhcmdldCggMSwgMSApLFxyXG5cdFx0fTtcclxuXHJcblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdFx0UmVmbGVjdGlvblxyXG5cdFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5cdFx0dGhpcy5hZGRFdmVudExpc3RlbmVyKCAnYmVmb3JlUmVuZGVyJywgKCBlOiBUSFJFRS5FdmVudCApID0+IHtcclxuXHJcblx0XHRcdGxldCByZW5kZXJlciA9IGUucmVuZGVyZXIgYXMgVEhSRUUuV2ViR0xSZW5kZXJlcjtcclxuXHRcdFx0bGV0IHNjZW5lID0gZS5zY2VuZSBhcyBUSFJFRS5TY2VuZTtcclxuXHRcdFx0bGV0IGNhbWVyYSA9IGUuY2FtZXJhIGFzIFRIUkVFLkNhbWVyYTtcclxuXHJcblx0XHRcdGlmICggISBjYW1lcmEudXNlckRhdGEubWFpbkNhbWVyYSApIHJldHVybjtcclxuXHJcblx0XHRcdHRoaXMucmVmbGVjdG9yV29ybGRQb3NpdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24oIHRoaXMubWF0cml4V29ybGQgKTtcclxuXHRcdFx0dGhpcy5jYW1lcmFXb3JsZFBvc2l0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbiggY2FtZXJhLm1hdHJpeFdvcmxkICk7XHJcblxyXG5cdFx0XHR0aGlzLnJvdGF0aW9uTWF0cml4LmV4dHJhY3RSb3RhdGlvbiggdGhpcy5tYXRyaXhXb3JsZCApO1xyXG5cclxuXHRcdFx0dGhpcy5ub3JtYWwuc2V0KCAwLCAxLjAsIDAgKTtcclxuXHRcdFx0dGhpcy5ub3JtYWwuYXBwbHlNYXRyaXg0KCB0aGlzLnJvdGF0aW9uTWF0cml4ICk7XHJcblxyXG5cdFx0XHR0aGlzLnZpZXcuc3ViVmVjdG9ycyggdGhpcy5yZWZsZWN0b3JXb3JsZFBvc2l0aW9uLCB0aGlzLmNhbWVyYVdvcmxkUG9zaXRpb24gKTtcclxuXHJcblx0XHRcdC8vIEF2b2lkIHJlbmRlcmluZyB3aGVuIHJlZmxlY3RvciBpcyBmYWNpbmcgYXdheVxyXG5cclxuXHRcdFx0aWYgKCB0aGlzLnZpZXcuZG90KCB0aGlzLm5vcm1hbCApID4gMCApIHJldHVybjtcclxuXHJcblx0XHRcdHRoaXMudmlldy5yZWZsZWN0KCB0aGlzLm5vcm1hbCApLm5lZ2F0ZSgpO1xyXG5cdFx0XHR0aGlzLnZpZXcuYWRkKCB0aGlzLnJlZmxlY3RvcldvcmxkUG9zaXRpb24gKTtcclxuXHJcblx0XHRcdHRoaXMucm90YXRpb25NYXRyaXguZXh0cmFjdFJvdGF0aW9uKCBjYW1lcmEubWF0cml4V29ybGQgKTtcclxuXHJcblx0XHRcdHRoaXMubG9va0F0UG9zaXRpb24uc2V0KCAwLCAwLCAtIDEgKTtcclxuXHRcdFx0dGhpcy5sb29rQXRQb3NpdGlvbi5hcHBseU1hdHJpeDQoIHRoaXMucm90YXRpb25NYXRyaXggKTtcclxuXHRcdFx0dGhpcy5sb29rQXRQb3NpdGlvbi5hZGQoIHRoaXMuY2FtZXJhV29ybGRQb3NpdGlvbiApO1xyXG5cclxuXHRcdFx0dGhpcy50YXJnZXQuc3ViVmVjdG9ycyggdGhpcy5yZWZsZWN0b3JXb3JsZFBvc2l0aW9uLCB0aGlzLmxvb2tBdFBvc2l0aW9uICk7XHJcblx0XHRcdHRoaXMudGFyZ2V0LnJlZmxlY3QoIHRoaXMubm9ybWFsICkubmVnYXRlKCk7XHJcblx0XHRcdHRoaXMudGFyZ2V0LmFkZCggdGhpcy5yZWZsZWN0b3JXb3JsZFBvc2l0aW9uICk7XHJcblxyXG5cdFx0XHR0aGlzLnZpcnR1YWxDYW1lcmEucG9zaXRpb24uY29weSggdGhpcy52aWV3ICk7XHJcblx0XHRcdHRoaXMudmlydHVhbENhbWVyYS51cC5zZXQoIDAsIDEsIDAgKTtcclxuXHRcdFx0dGhpcy52aXJ0dWFsQ2FtZXJhLnVwLmFwcGx5TWF0cml4NCggdGhpcy5yb3RhdGlvbk1hdHJpeCApO1xyXG5cdFx0XHR0aGlzLnZpcnR1YWxDYW1lcmEudXAucmVmbGVjdCggdGhpcy5ub3JtYWwgKTtcclxuXHRcdFx0dGhpcy52aXJ0dWFsQ2FtZXJhLmxvb2tBdCggdGhpcy50YXJnZXQgKTtcclxuXHJcblx0XHRcdGlmICggKCBjYW1lcmEgYXMgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEgKS5mYXIgKSB7XHJcblxyXG5cdFx0XHRcdHRoaXMudmlydHVhbENhbWVyYS5mYXIgPSAoIGNhbWVyYSBhcyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSApLmZhcjsgLy8gVXNlZCBpbiBXZWJHTEJhY2tncm91bmRcclxuXHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMudmlydHVhbENhbWVyYS51cGRhdGVNYXRyaXhXb3JsZCgpO1xyXG5cdFx0XHR0aGlzLnZpcnR1YWxDYW1lcmEucHJvamVjdGlvbk1hdHJpeC5jb3B5KCBjYW1lcmEucHJvamVjdGlvbk1hdHJpeCApO1xyXG5cclxuXHRcdFx0Ly8gVXBkYXRlIHRoZSB0ZXh0dXJlIG1hdHJpeFxyXG5cdFx0XHR0aGlzLnRleHR1cmVNYXRyaXguc2V0KFxyXG5cdFx0XHRcdDAuNSwgMC4wLCAwLjAsIDAuNSxcclxuXHRcdFx0XHQwLjAsIDAuNSwgMC4wLCAwLjUsXHJcblx0XHRcdFx0MC4wLCAwLjAsIDAuNSwgMC41LFxyXG5cdFx0XHRcdDAuMCwgMC4wLCAwLjAsIDEuMFxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdFx0dGhpcy50ZXh0dXJlTWF0cml4Lm11bHRpcGx5KCB0aGlzLnZpcnR1YWxDYW1lcmEucHJvamVjdGlvbk1hdHJpeCApO1xyXG5cdFx0XHR0aGlzLnRleHR1cmVNYXRyaXgubXVsdGlwbHkoIHRoaXMudmlydHVhbENhbWVyYS5tYXRyaXhXb3JsZEludmVyc2UgKTtcclxuXHRcdFx0dGhpcy50ZXh0dXJlTWF0cml4Lm11bHRpcGx5KCB0aGlzLm1hdHJpeFdvcmxkICk7XHJcblxyXG5cdFx0XHQvLyBOb3cgdXBkYXRlIHByb2plY3Rpb24gbWF0cml4IHdpdGggbmV3IGNsaXAgcGxhbmUsIGltcGxlbWVudGluZyBjb2RlIGZyb206IGh0dHA6Ly93d3cudGVyYXRob24uY29tL2NvZGUvb2JsaXF1ZS5odG1sXHJcblx0XHRcdC8vIFBhcGVyIGV4cGxhaW5pbmcgdGhpcyB0ZWNobmlxdWU6IGh0dHA6Ly93d3cudGVyYXRob24uY29tL2xlbmd5ZWwvTGVuZ3llbC1PYmxpcXVlLnBkZlxyXG5cdFx0XHR0aGlzLnJlZmxlY3RvclBsYW5lLnNldEZyb21Ob3JtYWxBbmRDb3BsYW5hclBvaW50KCB0aGlzLm5vcm1hbCwgdGhpcy5yZWZsZWN0b3JXb3JsZFBvc2l0aW9uICk7XHJcblx0XHRcdHRoaXMucmVmbGVjdG9yUGxhbmUuYXBwbHlNYXRyaXg0KCB0aGlzLnZpcnR1YWxDYW1lcmEubWF0cml4V29ybGRJbnZlcnNlICk7XHJcblxyXG5cdFx0XHR0aGlzLmNsaXBQbGFuZS5zZXQoIHRoaXMucmVmbGVjdG9yUGxhbmUubm9ybWFsLngsIHRoaXMucmVmbGVjdG9yUGxhbmUubm9ybWFsLnksIHRoaXMucmVmbGVjdG9yUGxhbmUubm9ybWFsLnosIHRoaXMucmVmbGVjdG9yUGxhbmUuY29uc3RhbnQgKTtcclxuXHJcblx0XHRcdHZhciBwcm9qZWN0aW9uTWF0cml4ID0gdGhpcy52aXJ0dWFsQ2FtZXJhLnByb2plY3Rpb25NYXRyaXg7XHJcblxyXG5cdFx0XHR0aGlzLnEueCA9ICggTWF0aC5zaWduKCB0aGlzLmNsaXBQbGFuZS54ICkgKyBwcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzWyA4IF0gKSAvIHByb2plY3Rpb25NYXRyaXguZWxlbWVudHNbIDAgXTtcclxuXHRcdFx0dGhpcy5xLnkgPSAoIE1hdGguc2lnbiggdGhpcy5jbGlwUGxhbmUueSApICsgcHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1sgOSBdICkgLyBwcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzWyA1IF07XHJcblx0XHRcdHRoaXMucS56ID0gLSAxLjA7XHJcblx0XHRcdHRoaXMucS53ID0gKCAxLjAgKyBwcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzWyAxMCBdICkgLyBwcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzWyAxNCBdO1xyXG5cclxuXHRcdFx0Ly8gQ2FsY3VsYXRlIHRoZSBzY2FsZWQgcGxhbmUgdmVjdG9yXHJcblx0XHRcdHRoaXMuY2xpcFBsYW5lLm11bHRpcGx5U2NhbGFyKCAyLjAgLyB0aGlzLmNsaXBQbGFuZS5kb3QoIHRoaXMucSApICk7XHJcblxyXG5cdFx0XHQvLyBSZXBsYWNpbmcgdGhlIHRoaXJkIHJvdyBvZiB0aGUgcHJvamVjdGlvbiBtYXRyaXhcclxuXHRcdFx0cHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1sgMiBdID0gdGhpcy5jbGlwUGxhbmUueDtcclxuXHRcdFx0cHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1sgNiBdID0gdGhpcy5jbGlwUGxhbmUueTtcclxuXHRcdFx0cHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1sgMTAgXSA9IHRoaXMuY2xpcFBsYW5lLnogKyAxLjAgLSB0aGlzLmNsaXBCaWFzO1xyXG5cdFx0XHRwcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzWyAxNCBdID0gdGhpcy5jbGlwUGxhbmUudztcclxuXHJcblx0XHRcdC8vcmVuZGVyXHJcblx0XHRcdGxldCBjdXJyZW50UmVuZGVyVGFyZ2V0ID0gcmVuZGVyZXIuZ2V0UmVuZGVyVGFyZ2V0KCk7XHJcblxyXG5cdFx0XHRyZW5kZXJlci5zZXRSZW5kZXJUYXJnZXQoIHRoaXMucmVuZGVyVGFyZ2V0cy5yZWYgKTtcclxuXHRcdFx0dGhpcy52aXNpYmxlID0gZmFsc2U7XHJcblxyXG5cdFx0XHRyZW5kZXJlci5jbGVhcigpO1xyXG5cdFx0XHRyZW5kZXJlci5yZW5kZXIoIHNjZW5lLCB0aGlzLnZpcnR1YWxDYW1lcmEgKTtcclxuXHRcdFx0cmVuZGVyZXIuY2xlYXJEZXB0aCgpO1xyXG5cclxuXHRcdFx0cmVuZGVyZXIuc2V0UmVuZGVyVGFyZ2V0KCBjdXJyZW50UmVuZGVyVGFyZ2V0ICk7XHJcblx0XHRcdHRoaXMudmlzaWJsZSA9IHRydWU7XHJcblxyXG5cdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdFx0XHRNaXBNYXBQUFxyXG5cdFx0XHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcblx0XHRcdGlmICggdGhpcy5taXBtYXBQUCA9PSBudWxsICkge1xyXG5cclxuXHRcdFx0XHR0aGlzLm1pcG1hcFBQID0gbmV3IE9SRS5Qb3N0UHJvY2Vzc2luZyggcmVuZGVyZXIsIHtcclxuXHRcdFx0XHRcdGZyYWdtZW50U2hhZGVyOiBtaXBtYXBGcmFnLFxyXG5cdFx0XHRcdFx0c2lkZTogVEhSRUUuRG91YmxlU2lkZVxyXG5cdFx0XHRcdH0sIHRoaXMubWlwbWFwR2VvICk7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLm1pcG1hcFBQLnJlbmRlciggeyB0ZXg6IHRoaXMucmVuZGVyVGFyZ2V0cy5yZWYudGV4dHVyZSB9LCB0aGlzLnJlbmRlclRhcmdldHMubWlwbWFwICk7XHJcblx0XHRcdHRoaXMuY29tbW9uVW5pZm9ybXMucmVmbGVjdGlvblRleC52YWx1ZSA9IHRoaXMucmVuZGVyVGFyZ2V0cy5taXBtYXAudGV4dHVyZTtcclxuXHJcblx0XHRcdGxldCBydCA9IHJlbmRlcmVyLmdldFJlbmRlclRhcmdldCgpIGFzIFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0O1xyXG5cclxuXHRcdFx0aWYgKCBydCApIHtcclxuXHJcblx0XHRcdFx0dGhpcy5jb21tb25Vbmlmb3Jtcy5yZW5kZXJSZXNvbHV0aW9uLnZhbHVlLnNldCggcnQud2lkdGgsIHJ0LmhlaWdodCApO1xyXG5cclxuXHJcblx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdHJlbmRlcmVyLmdldFNpemUoIHRoaXMuY29tbW9uVW5pZm9ybXMucmVuZGVyUmVzb2x1dGlvbi52YWx1ZSApO1xyXG5cdFx0XHRcdHRoaXMuY29tbW9uVW5pZm9ybXMucmVuZGVyUmVzb2x1dGlvbi52YWx1ZS5tdWx0aXBseVNjYWxhciggcmVuZGVyZXIuZ2V0UGl4ZWxSYXRpbygpICk7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0fSApO1xyXG5cclxuXHRcdHRoaXMucmVzaXplKCk7XHJcblxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZXNpemUoKSB7XHJcblxyXG5cdFx0bGV0IHNpemUgPSA1MTI7XHJcblx0XHR0aGlzLnJlbmRlclRhcmdldHMucmVmLnNldFNpemUoIHNpemUsIHNpemUgKTtcclxuXHJcblx0XHRsZXQgbWlwTWFwU2l6ZSA9IG5ldyBUSFJFRS5WZWN0b3IyKCBzaXplICogMS41LCBzaXplICk7XHJcblx0XHR0aGlzLnJlbmRlclRhcmdldHMubWlwbWFwLnNldFNpemUoIG1pcE1hcFNpemUueCwgbWlwTWFwU2l6ZS55ICk7XHJcblx0XHR0aGlzLmNvbW1vblVuaWZvcm1zLm1pcE1hcFJlc29sdXRpb24udmFsdWUuY29weSggbWlwTWFwU2l6ZSApO1xyXG5cclxuXHR9XHJcblxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IFwiI2RlZmluZSBHTFNMSUZZIDFcXG51bmlmb3JtIHNhbXBsZXIyRCB0ZXg7XFxudmFyeWluZyB2ZWMyIHZVdjtcXG5cXG5mbG9hdCBjbGlwKCB2ZWMyIHV2ICkge1xcblxcdHZlYzIgYyA9IHN0ZXAoIGFicyh1diAtIDAuNSksIHZlYzIoIDAuNSApICk7XFxuXFx0cmV0dXJuIGMueCAqIGMueTtcXG59XFxuXFxudm9pZCBtYWluKCB2b2lkICkge1xcblxcblxcdHZlYzQgY29sID0gdGV4dHVyZTJEKCB0ZXgsIHZVdiApO1xcblxcdGdsX0ZyYWdDb2xvciA9IGNvbDtcXG5cXG59XCI7Il0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsInJlcXVpcmUiLCJkZWZpbmUiLCJhbWQiLCJzZWxmIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMzgxX18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX182NDRfXyIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJQb3dlck1lc2giLCJjb25zdHJ1Y3RvciIsImdlb01lc2giLCJtYXRlcmlhbE9wdGlvbiIsImdlbyIsInVuaSIsInVuaWZvcm1zIiwiZW52TWFwIiwiZW52TWFwSW50ZW5zaXR5IiwiaWJsSW50ZW5zaXR5IiwibWF4TG9kTGV2ZWwiLCJzaGFkb3dMaWdodE1vZGVsVmlld01hdHJpeCIsInNoYWRvd0xpZ2h0UHJvamVjdGlvbk1hdHJpeCIsInNoYWRvd0xpZ2h0RGlyZWN0aW9uIiwic2hhZG93TGlnaHRDYW1lcmFDbGlwIiwic2hhZG93TWFwIiwic2hhZG93TWFwU2l6ZSIsInNoYWRvd01hcFJlc29sdXRpb24iLCJzaGFkb3dMaWdodFNpemUiLCJjYW1lcmFOZWFyIiwiY2FtZXJhRmFyIiwiZ2VvbWV0cnkiLCJtYXQiLCJtYXRlcmlhbCIsImlzTWVzaFN0YW5kYXJkTWF0ZXJpYWwiLCJtYXAiLCJjb2xvciIsInJvdWdobmVzc01hcCIsInJvdWdobmVzcyIsImFscGhhTWFwIiwib3BhY2l0eSIsIm1ldGFsbmVzc01hcCIsIm1ldGFsbmVzcyIsIm5vcm1hbE1hcCIsImVtaXNzaXZlTWFwIiwiZW1pc3Npb25NYXAiLCJlbWlzc2lvbiIsImVtaXNzaXZlIiwiZ2V0QXR0cmlidXRlIiwiZ2V0SW5kZXgiLCJjb21wdXRlVGFuZ2VudHMiLCJ2ZXJ0ZXhTaGFkZXIiLCJwb3dlciIsImZyYWdtZW50U2hhZGVyIiwibGlnaHRzIiwidHJhbnNwYXJlbnQiLCJzaWRlIiwiZXh0ZW5zaW9ucyIsImRlcml2YXRpdmVzIiwiZGVmaW5lcyIsIlVTRV9NQVAiLCJVU0VfUk9VR0hORVNTX01BUCIsIlVTRV9NRVRBTE5FU1NfTUFQIiwiVVNFX0FMUEhBX01BUCIsIlVTRV9OT1JNQUxfTUFQIiwiVVNFX0VNSVNTSU9OX01BUCIsInN1cGVyIiwidGhpcyIsIm5hbWUiLCJ1c2VyRGF0YSIsImNvbG9yTWF0IiwiY3VzdG9tRGVwdGhNYXRlcmlhbCIsImNvbW1vblVuaWZvcm1zIiwicG9zaXRpb24iLCJjb3B5Iiwicm90YXRpb24iLCJzY2FsZSIsImVudk1hcFNyYyIsImVudk1hcFVwZGF0ZSIsImVudk1hcFJlbmRlclRhcmdldCIsImZvcm1hdCIsImdlbmVyYXRlTWlwbWFwcyIsIm1hZ0ZpbHRlciIsIm1pbkZpbHRlciIsImVudk1hcENhbWVyYSIsImdldFdvcmxkUG9zaXRpb24iLCJvbkJlZm9yZVJlbmRlciIsInJlbmRlcmVyIiwic2NlbmUiLCJjYW1lcmEiLCJkaXNwYXRjaEV2ZW50IiwidHlwZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiZW52TWFwUlQiLCJwbXJlbUdlbmVyYXRvciIsImNvbXBpbGVFcXVpcmVjdGFuZ3VsYXJTaGFkZXIiLCJmcm9tQ3ViZW1hcCIsImZyb21FcXVpcmVjdGFuZ3VsYXIiLCJ2aXNpYmxlIiwidXBkYXRlIiwidGV4dHVyZSIsImRlcHRoQ2FtZXJhIiwiZGVwdGhNYXQiLCJuZWFyIiwiZmFyIiwib25EaXNwb3NlIiwiZGlzcG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ1cGRhdGVFbnZNYXAiLCJpc1Bvd2VyTWVzaCIsIlBvd2VyUmVmbGVjdGlvbk1lc2giLCJyZWZsZWN0aW9uVGV4IiwicmVuZGVyUmVzb2x1dGlvbiIsInRleHR1cmVNYXRyaXgiLCJtaXBNYXBSZXNvbHV0aW9uIiwiUkVGTEVDVFBMQU5FIiwicmVmbGVjdG9yUGxhbmUiLCJub3JtYWwiLCJyZWZsZWN0b3JXb3JsZFBvc2l0aW9uIiwiY2FtZXJhV29ybGRQb3NpdGlvbiIsInJvdGF0aW9uTWF0cml4IiwibG9va0F0UG9zaXRpb24iLCJjbGlwUGxhbmUiLCJjbGlwQmlhcyIsInZpZXciLCJ0YXJnZXQiLCJxIiwidmlydHVhbENhbWVyYSIsIm1pcG1hcFBQIiwibWlwbWFwR2VvIiwicG9zQXJyYXkiLCJ1dkFycmF5IiwiaW5kZXhBcnJheSIsInAiLCJzIiwicHVzaCIsIngiLCJ5Iiwic2V0IiwiaSIsImluZGV4T2Zmc2V0IiwicG9zQXR0ciIsIkZsb2F0MzJBcnJheSIsInV2QXR0ciIsImluZGV4QXR0ciIsIlVpbnQxNkFycmF5IiwiYXBwbHlNYXRyaXg0IiwibWFrZVNjYWxlIiwibWFrZVRyYW5zbGF0aW9uIiwic2V0QXR0cmlidXRlIiwic2V0SW5kZXgiLCJyZW5kZXJUYXJnZXRzIiwicmVmIiwibWlwbWFwIiwibWFpbkNhbWVyYSIsInNldEZyb21NYXRyaXhQb3NpdGlvbiIsIm1hdHJpeFdvcmxkIiwiZXh0cmFjdFJvdGF0aW9uIiwic3ViVmVjdG9ycyIsImRvdCIsInJlZmxlY3QiLCJuZWdhdGUiLCJhZGQiLCJ1cCIsImxvb2tBdCIsInVwZGF0ZU1hdHJpeFdvcmxkIiwicHJvamVjdGlvbk1hdHJpeCIsIm11bHRpcGx5IiwibWF0cml4V29ybGRJbnZlcnNlIiwic2V0RnJvbU5vcm1hbEFuZENvcGxhbmFyUG9pbnQiLCJ6IiwiY29uc3RhbnQiLCJNYXRoIiwic2lnbiIsImVsZW1lbnRzIiwidyIsIm11bHRpcGx5U2NhbGFyIiwiY3VycmVudFJlbmRlclRhcmdldCIsImdldFJlbmRlclRhcmdldCIsInNldFJlbmRlclRhcmdldCIsImNsZWFyIiwicmVuZGVyIiwiY2xlYXJEZXB0aCIsInRleCIsInJ0Iiwid2lkdGgiLCJoZWlnaHQiLCJnZXRTaXplIiwiZ2V0UGl4ZWxSYXRpbyIsInJlc2l6ZSIsInNldFNpemUiLCJtaXBNYXBTaXplIiwic2l6ZSJdLCJzb3VyY2VSb290IjoiIn0=